<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸŒ´ Ultimate Adventure Trip 2026</title>
  <meta name="theme-color" content="#f8fafc">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon" href="/icon-192.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
    body { font-family: 'Inter', sans-serif; background: linear-gradient(180deg, #fef3c7 0%, #fed7aa 50%, #fecaca 100%); min-height: 100vh; }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    
    /* Activity card colors */
    .card-transport { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); }
    .card-warning { background: linear-gradient(135deg, #fecaca 0%, #fca5a5 100%); }
    .card-food { background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); }
    .card-accommodation { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); }
    .card-highlight { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); }
    .card-beach { background: linear-gradient(135deg, #cffafe 0%, #a5f3fc 100%); }
    .card-activity { background: linear-gradient(135deg, #e9d5ff 0%, #d8b4fe 100%); }
    
    .day-tab { transition: all 0.2s ease; }
    .day-tab.active { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; }
    /* Dark Mode */
    body.dark-mode { background: linear-gradient(135deg, #1e3a5f, #1e293b, #1e3a5f) !important; }
    body.dark-mode .bg-white { background: #1e293b !important; }
    body.dark-mode .text-gray-800 { color: #f1f5f9 !important; }
    body.dark-mode .text-gray-700 { color: #e2e8f0 !important; }
    body.dark-mode .text-gray-600 { color: #cbd5e1 !important; }
    body.dark-mode .text-gray-500 { color: #94a3b8 !important; }
    body.dark-mode .bg-gray-50 { background: #334155 !important; }
    body.dark-mode .bg-gray-100 { background: #334155 !important; }
    body.dark-mode .border-gray-100 { border-color: #475569 !important; }
    body.dark-mode .border-gray-200 { border-color: #475569 !important; }
    body.dark-mode .hover\:bg-gray-50:hover { background: #475569 !important; }
    body.dark-mode .card-transport { background: linear-gradient(135deg, #78350f 0%, #92400e 100%) !important; }
    body.dark-mode .card-warning { background: linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%) !important; }
    body.dark-mode .card-food { background: linear-gradient(135deg, #14532d 0%, #166534 100%) !important; }
    body.dark-mode .card-highlight { background: linear-gradient(135deg, #1e3a5f 0%, #1e40af 100%) !important; }
    body.dark-mode .card-beach { background: linear-gradient(135deg, #164e63 0%, #0e7490 100%) !important; }
    body.dark-mode .card-activity { background: linear-gradient(135deg, #4c1d95 0%, #5b21b6 100%) !important; }
  </style>
</head>
<body>
  <div id="app" class="max-w-2xl mx-auto p-4 pb-8"></div>

  <script>
    // ============================================
    // TENERIFE & GRAN CANARIA - ORIGINAL STYLE
    // Met parkeerinfo, accommodatie boxes, kleuren
    // ============================================

    let activeDay = 1;
    let activeTab = 'planning';
    let selectedModal = null;
    let checklist = JSON.parse(localStorage.getItem('tenerifeChecklist2') || '{}');
    let packingList = JSON.parse(localStorage.getItem('tenerifePackingList') || '{}');

    // Auto-generated packing list based on activities
    const packingCategories = {
      documents: { title: 'ğŸ“„ Documenten', items: ['Paspoort / ID-kaart', 'Rijbewijs', 'Creditcard', 'EHIC / Zorgpas', 'Bevestigingen (print/digitaal)', 'Reisverzekering documenten'] },
      teide: { title: 'ğŸ§¥ El Teide (5-10Â°C!)', items: ['Winterjas', 'Handschoenen', 'Muts / sjaal', 'Wandelschoenen', 'Zonnebril (reflectie)', 'Water 2L', 'Lunch / snacks'] },
      strand: { title: 'ğŸ–ï¸ Strand & Watersport', items: ['Zwemkleding (2x)', 'Badhanddoek', 'Zonnebrand SPF50', 'Zonnebril', 'Slippers', 'Waterproof telefoonhoesje'] },
      cueva: { title: 'ğŸ¦‡ Cueva del Viento', items: ['Comfortabele schoenen', 'Lichte jas (15Â°C in grot)', 'Camera'] },
      walvissen: { title: 'ğŸ‹ Walvissen Tour', items: ['Reiziektepillen!', 'Zonnebrand', 'Camera met zoom', 'Pet / zonnehoed', 'Jas (wind op zee)'] },
      algemeen: { title: 'ğŸ‘• Algemene Kleding', items: ['T-shirts (6x)', 'Shorts (3x)', 'Lange broek (2x)', 'Ondergoed (9x)', 'Sokken (9x)', 'Pyjama', 'Nette outfit (diner)'] },
      tech: { title: 'ğŸ“± Elektronica', items: ['Telefoon + oplader', 'Powerbank', 'Camera + oplader', 'Koptelefoon', 'EU stekker (standaard)'] },
      toilettas: { title: 'ğŸ§´ Toilettas', items: ['Tandenborstel & tandpasta', 'Deodorant', 'Shampoo / douchegel', 'Medicijnen (persoonlijk)', 'Aftersun', 'Lippenbalsem SPF'] }
    };
    let weatherData = null;
    let weatherLoading = false;

    // Weather coordinates for destinations
    const weatherLocations = {
      tenerife: { lat: 28.47, lon: -16.25, name: 'Tenerife' },
      grancanaria: { lat: 28.12, lon: -15.44, name: 'Gran Canaria' }
    };

    // Fetch current weather
    async function fetchWeather() {
      if (weatherLoading || weatherData) return;
      weatherLoading = true;
      try {
        const loc = weatherLocations.tenerife;
        const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${loc.lat}&longitude=${loc.lon}&current=temperature_2m,weather_code,wind_speed_10m&daily=temperature_2m_max,temperature_2m_min,weather_code&timezone=auto&forecast_days=3`);
        weatherData = await res.json();
        render();
      } catch (e) { console.log('Weather fetch failed:', e); }
      weatherLoading = false;
    }

    // Weather code to emoji
    function getWeatherEmoji(code) {
      if (code <= 3) return 'â˜€ï¸';
      if (code <= 48) return 'â˜ï¸';
      if (code <= 67) return 'ğŸŒ§ï¸';
      if (code <= 77) return 'ğŸŒ¨ï¸';
      if (code <= 82) return 'ğŸŒ§ï¸';
      if (code >= 95) return 'â›ˆï¸';
      return 'ğŸŒ¤ï¸';
    }

    // TRIP INFO
    const trip = {
      title: 'ğŸŒ´ Ultimate Adventure Trip',
      subtitle: 'Tenerife & Gran Canaria',
      dates: '16-24 mei 2026',
      duration: '9 dagen',
      persons: 2,
      timezone: 'â° 1 uur ACHTER Nederland!'
    };

    // ACCOMMODATIONS
    const accommodations = {
      tenerife: {
        name: 'Home2Book Lovely Apartment in Santa Cruz',
        location: 'Santa Cruz de Tenerife',
        dates: '16-20 mei 2026',
        nights: 4,
        price: 309.80,
        status: 'âœ… GEBOEKT',
        lat: 28.4698, lng: -16.2549
      },
      grancanaria: {
        name: 'Las Palmas Beach House Retreat',
        location: 'Las Palmas de Gran Canaria',
        dates: '20-24 mei 2026',
        nights: 4,
        price: 323.36,
        status: 'âœ… GEBOEKT',
        lat: 28.1235, lng: -15.4363
      }
    };

    // PARKING INFO TENERIFE
    const parkingTenerife = {
      warning: 'âš ï¸ Geen parking bij appartement!',
      estimated: '~â‚¬50-70 totaal (4 nachten)',
      options: [
        { 
          name: 'Parking Plaza de EspaÃ±a', 
          address: 'Plaza de EspaÃ±a, Santa Cruz',
          distance: '5-10 min lopen',
          price: 'â‚¬1.50-2.00/uur, max â‚¬15-18/dag',
          tip: 'Beste optie voor overnachten - veilig & overdekt',
          recommended: true
        },
        { 
          name: 'Parking Meridiano', 
          address: 'Av. 3 de Mayo, 3 (El Corte InglÃ©s)',
          distance: '10 min lopen',
          price: 'â‚¬1.20/uur',
          tip: 'Gratis eerste uren bij aankoop'
        },
        { 
          name: 'Zona Azul (straat)', 
          address: 'Diverse straten',
          distance: 'Variabel',
          price: 'â‚¬0.50-1.00/uur',
          tip: 'ğŸ‰ ZONDAG = GRATIS straatparkeren!'
        }
      ],
      recommendation: 'ğŸ’¡ Aanbeveling: Plaza de EspaÃ±a voor overnachten. Zondag = straatparkeren GRATIS!'
    };

    // LOCATIONS
    const locations = {
      tfs_airport: { lat: 28.0445, lng: -16.5725 },
      santa_cruz: { lat: 28.4698, lng: -16.2549 },
      anaga: { lat: 28.5500, lng: -16.2000 },
      cruz_carmen: { lat: 28.5361, lng: -16.2758 },
      taganana: { lat: 28.5667, lng: -16.2000 },
      benijo: { lat: 28.5731, lng: -16.1856 },
      teresitas: { lat: 28.5083, lng: -16.1889 },
      cueva_viento: { lat: 28.3500, lng: -16.7000 },
      los_gigantes: { lat: 28.2472, lng: -16.8417 },
      teide: { lat: 28.2723, lng: -16.6426 },
      roques_garcia: { lat: 28.2242, lng: -16.6294 },
      costa_adeje: { lat: 28.0800, lng: -16.7300 },
      agaete: { lat: 28.1000, lng: -15.7000 },
      las_palmas: { lat: 28.1235, lng: -15.4363 },
      las_canteras: { lat: 28.1350, lng: -15.4450 },
      roque_nublo: { lat: 27.9708, lng: -15.6125 },
      tejeda: { lat: 27.9942, lng: -15.6139 },
      maspalomas: { lat: 27.7600, lng: -15.5800 },
      puerto_rico: { lat: 27.7900, lng: -15.7100 },
      mogan: { lat: 27.8167, lng: -15.7667 },
      poema_mar: { lat: 28.1400, lng: -15.4300 },
      lpa_airport: { lat: 27.9319, lng: -15.3866 }
    };

    // Calculate distance
    function calcDist(loc1, loc2) {
      if (!locations[loc1] || !locations[loc2]) return null;
      const R = 6371;
      const l1 = locations[loc1], l2 = locations[loc2];
      const dLat = (l2.lat - l1.lat) * Math.PI / 180;
      const dLon = (l2.lng - l1.lng) * Math.PI / 180;
      const a = Math.sin(dLat/2)**2 + Math.cos(l1.lat * Math.PI/180) * Math.cos(l2.lat * Math.PI/180) * Math.sin(dLon/2)**2;
      return Math.round(R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)));
    }

    function driveTime(km) {
      if (!km) return '';
      const m = Math.round((km / 50) * 60);
      return m < 60 ? `~${m} min` : `~${Math.floor(m/60)}u${m%60 > 0 ? ` ${m%60}min` : ''}`;
    }

    // Google Maps URL generator
    function getMapsUrl(locKey) {
      if (!locations[locKey]) return null;
      const loc = locations[locKey];
      return `https://www.google.com/maps/search/?api=1&query=${loc.lat},${loc.lng}`;
    }

    // DAYS
    const days = [
      { day: 1, date: 'Za 16 mei', title: 'Aankomst', icon: 'âœˆï¸', island: 'Tenerife', highlight: 'Supermarkt MOET vandaag!', accom: 'tenerife', showParking: true, weather: { high: 24, low: 18, icon: 'â˜€ï¸', rain: 5 } },
      { day: 2, date: 'Zo 17 mei', title: 'Anaga', icon: 'ğŸŒ¿', island: 'Tenerife', highlight: 'Jurassic Park + Stranden', accom: 'tenerife', weather: { high: 24, low: 18, icon: 'ğŸŒ¤ï¸', rain: 10, note: 'ğŸŒ¿ Nevelwoud: frisser!' } },
      { day: 3, date: 'Ma 18 mei', title: 'Walvissen', icon: 'ğŸ‹', island: 'Tenerife', highlight: 'Cueva + Walvissen spotten', accom: 'tenerife', featured: true, weather: { high: 25, low: 18, icon: 'â˜€ï¸', rain: 5 } },
      { day: 4, date: 'Di 19 mei', title: 'El Teide', icon: 'ğŸŒ‹', island: 'Tenerife', highlight: '3.718m - Hoogste berg Spanje!', accom: 'tenerife', featured: true, weather: { high: 25, low: 19, icon: 'â˜€ï¸', rain: 5, note: 'ğŸ§¥ Op Teide: 5-10Â°C!' } },
      { day: 5, date: 'Wo 20 mei', title: 'Ferry', icon: 'â›´ï¸', island: 'Ferry', highlight: 'Naar Gran Canaria!', accom: 'grancanaria', weather: { high: 25, low: 19, icon: 'â˜€ï¸', rain: 5 } },
      { day: 6, date: 'Do 21 mei', title: 'Roque Nublo', icon: 'ğŸ”ï¸', island: 'Gran Canaria', highlight: 'Bergen + UNESCO Vegueta', accom: 'grancanaria', weather: { high: 26, low: 19, icon: 'â˜€ï¸', rain: 5 } },
      { day: 7, date: 'Vr 22 mei', title: 'Watersport!', icon: 'ğŸš€', island: 'Gran Canaria', highlight: 'Jetski + Parasailing!', accom: 'grancanaria', featured: true, weather: { high: 26, low: 20, icon: 'â˜€ï¸', rain: 5, note: 'ğŸŒŠ Perfect strandweer!' } },
      { day: 8, date: 'Za 23 mei', title: 'Aquarium', icon: 'ğŸŸ', island: 'Gran Canaria', highlight: 'Poema del Mar + Strand', accom: 'grancanaria', weather: { high: 26, low: 20, icon: 'â˜€ï¸', rain: 5 } },
      { day: 9, date: 'Zo 24 mei', title: 'Terug', icon: 'ğŸ ', island: 'Terug', highlight: 'Tot ziens!', accom: null, weather: { high: 26, low: 20, icon: 'â˜€ï¸', rain: 5 } }
    ];

    // ACTIVITIES - with card types for colors
    const activities = {
      1: [
        { time: '14:40', title: 'Vertrek Amsterdam', subtitle: 'Vlucht naar Tenerife Zuid', icon: 'ğŸ›«', type: 'transport', loc: 'tfs_airport', 
          info: { desc: 'Vlucht Amsterdam Schiphol â†’ Tenerife Zuid (TFS)', tips: ['2 uur voor vertrek aanwezig', 'Online inchecken', 'Handbagage max 40Ã—30Ã—20cm'], duration: '4u 45min', price: 'â‚¬382 (2p retour)' }},
        { time: '18:25', title: 'Landing TFS', subtitle: 'Tenerife Zuid luchthaven (lokale tijd!)', icon: 'ğŸ›¬', type: 'transport', loc: 'tfs_airport',
          info: { desc: 'Aankomst Tenerife Zuid Airport', tips: ['â° Lokale tijd = 1 uur EERDER dan NL!', 'Paspoort/ID klaar houden'], warning: 'Let op tijdsverschil!' }},
        { time: '19:00', title: 'Auto ophalen', subtitle: 'CICAR terminal', icon: 'ğŸš—', type: 'transport', loc: 'tfs_airport',
          info: { desc: 'Huurauto ophalen bij CICAR', tips: ['Creditcard VERPLICHT op naam bestuurder', 'Check auto op schade + foto\'s maken', 'Volle tank = volle tank terug'], price: 'â‚¬140-180 (4 dagen)' }},
        { time: '20:15', title: 'Check-in', subtitle: 'Home2Book Santa Cruz', icon: 'ğŸ ', type: 'accommodation', loc: 'santa_cruz',
          info: { desc: accommodations.tenerife.name, address: accommodations.tenerife.location, price: 'â‚¬309,80 (4 nachten)', status: 'âœ… GEBOEKT' }},
        { time: '20:30', title: 'âš ï¸ SUPERMARKT', subtitle: 'Mercadona - Morgen DICHT!', icon: 'âš ï¸', type: 'warning', loc: 'santa_cruz',
          info: { desc: 'Supermarkten zijn zondag DICHT op Tenerife!', warning: 'âš ï¸ VANAVOND boodschappen halen!', tips: ['Mercadona open tot 21:30', 'Water, ontbijt, snacks kopen', 'Lokale producten proberen'], mustDo: true }},
        { time: '21:30', title: 'Diner', subtitle: 'Calle de la Noria', icon: 'ğŸ½ï¸', type: 'food', loc: 'santa_cruz',
          info: { desc: 'Gezellige tapasstraat in Santa Cruz', recommendations: ['Casa del Tapas', 'El Lateral 27', 'Tasca El Obispo'], specialty: 'Papas arrugadas con mojo', priceRange: 'â‚¬20-35 p.p.' }}
      ],
      2: [
        { time: '09:30', title: 'Vertrek Anaga', subtitle: 'UNESCO Biosfeerreservaat', icon: 'ğŸš—', type: 'transport', loc: 'anaga',
          info: { desc: 'Rijden naar Anaga gebergte', tips: ['Kronkelwegen - rustig rijden!', 'Tank vol'], duration: '30-40 min', distance: '15 km' }},
        { time: '10:15', title: 'Cruz del Carmen', subtitle: 'Bezoekerscentrum + panorama', icon: 'ğŸ‘€', type: 'highlight', loc: 'cruz_carmen',
          info: { desc: 'Start van Anaga verkenning', highlights: ['360Â° uitzicht', 'Gratis bezoekerscentrum', 'WC faciliteiten', 'Start wandelpaden'], tips: ['Gratis parkeren', 'Kaart meenemen'], mustSee: true }},
        { time: '10:45', title: 'Sendero de los Sentidos', subtitle: 'Wandeling nevelwoud (45 min)', icon: 'ğŸ¥¾', type: 'activity', loc: 'cruz_carmen',
          info: { desc: 'Magische wandeling door eeuwenoud laurierbos', highlights: ['Mysterieus nevelwoud', 'Oude laurierbomen', 'Vogelgeluiden'], duration: '45 min rondje', difficulty: 'Makkelijk', tips: ['Goede schoenen aan', 'Kan mistig zijn'] }},
        { time: '12:00', title: 'Lunch Taganana', subtitle: 'Verse vis bergdorpje', icon: 'ğŸ½ï¸', type: 'food', loc: 'taganana',
          info: { desc: 'Authentiek bergdorp met verse vis restaurants', recommendations: ['Casa Africa', 'El FrontÃ³n'], specialty: 'Verse gegrilde vis van de dag', priceRange: 'â‚¬15-25 p.p.', tips: ['Reserveren niet nodig', 'Cash meenemen'] }},
        { time: '14:00', title: 'â­ Playa de Benijo', subtitle: 'Wild zwart lavastrand!', icon: 'ğŸ–ï¸', type: 'highlight', loc: 'benijo',
          info: { desc: 'Spectaculair zwart vulkanisch strand met Roques de Anaga', highlights: ['Zwart vulkanisch zand', 'Roques de Anaga rotsen', 'Wilde golven - Instagram perfect!'], tips: ['âš ï¸ Zwemmen gevaarlijk (stroming)!', 'Wel prachtig voor fotos', 'Chiringuito voor drankjes'], mustSee: true }},
        { time: '16:30', title: 'Playa de las Teresitas', subtitle: 'Goudgeel Sahara-zand!', icon: 'ğŸ–ï¸', type: 'beach', loc: 'teresitas',
          info: { desc: 'Kunstmatig strand met geÃ¯mporteerd Sahara zand - uniek!', highlights: ['Goudgeel zand (enige op Tenerife!)', 'Palmbomen', 'Rustig water - veilig zwemmen'], tips: ['Gratis parkeren', 'Minder toeristisch dan zuiden', 'Lokale sfeer'], duration: '2-3 uur' }},
        { time: '19:30', title: 'Diner thuis', subtitle: 'Zelf koken (zondag = winkels dicht)', icon: 'ğŸ³', type: 'food', loc: 'santa_cruz',
          info: { desc: 'Koken met boodschappen van gisteren', tips: ['Supermarkten DICHT op zondag', 'Lokale producten gebruiken', 'Wijn uit supermarkt'] }}
      ],
      3: [
        { time: '08:30', title: 'Rijden Cueva del Viento', subtitle: '~1 uur rijden', icon: 'ğŸš—', type: 'transport', loc: 'cueva_viento',
          info: { distance: '65 km', duration: '~1 uur', tips: ['Via TF-5 richting Icod de los Vinos'] }},
        { time: '09:30', title: 'â­ CUEVA DEL VIENTO', subtitle: 'Grootste lavatunnel Europa!', icon: 'ğŸ¦‡', type: 'highlight', loc: 'cueva_viento',
          info: { desc: 'Ondergrondse lavatunnels - 17km lang, 5e langste ter wereld!', highlights: ['Lavatunnels verkennen', 'Stalactieten & stalagmieten', 'Unieke geologische formaties'], tips: ['âš ï¸ VOORAF BOEKEN VERPLICHT!', 'Comfortabele schoenen (ongelijk terrein)', 'Jas mee (15Â°C in grot)', 'Helm wordt verstrekt'], price: 'â‚¬20 p.p.', duration: '2 uur tour', website: 'cuevadelviento.net', warning: 'Reserveer 2 weken vooraf!', mustSee: true }},
        { time: '12:00', title: 'Lunch Los Gigantes', subtitle: 'Haven + 600m kliffen', icon: 'ğŸ½ï¸', type: 'food', loc: 'los_gigantes',
          info: { desc: 'Lunchen met uitzicht op spectaculaire kliffen', tips: ['Terrassen aan de haven', 'Uitzicht op 600m hoge kliffen'], priceRange: 'â‚¬15-25 p.p.' }},
        { time: '14:00', title: 'â­ WALVISSEN TOUR', subtitle: '90% kans! 2-3 uur', icon: 'ğŸ‹', type: 'highlight', loc: 'los_gigantes',
          info: { desc: 'Bootexcursie om walvissen en dolfijnen te spotten', highlights: ['Grienden (pilot whales)', 'Tuimelaars (dolfijnen)', 'Los Gigantes kliffen vanaf zee'], tips: ['âš ï¸ VOORAF BOEKEN!', 'ğŸ’Š Reiziektepillen meenemen!', 'Zonnebrand + pet', 'Camera met zoom'], price: 'â‚¬30-50 p.p.', duration: '2-3 uur', website: 'ladyshelley.com', mustSee: true }},
        { time: '17:00', title: 'Los Gigantes kliffen', subtitle: '600m hoge rotswanden', icon: 'ğŸ“¸', type: 'activity', loc: 'los_gigantes',
          info: { desc: 'Spectaculaire kliffen - 600m recht omhoog uit zee', tips: ['Beste licht late namiddag', 'Mirador de Archipenque voor foto\'s'], mustSee: true }},
        { time: '19:30', title: 'Guachinche diner', subtitle: 'Traditioneel! â‚¬15pp all-in', icon: 'ğŸ·', type: 'food', loc: 'los_gigantes',
          info: { desc: 'Authentieke Canarische eethuizen met lokale wijn', specialty: 'Carne fiesta, papas arrugadas, mojo', tips: ['Cash meenemen!', 'Geen menu - je krijgt wat er is', 'ECHTE lokale ervaring', 'Vaak in garages/schuren'], priceRange: 'â‚¬15 p.p. all-in!' }}
      ],
      4: [
        { time: '06:30', title: 'âš ï¸ VROEG OPSTAAN!', subtitle: 'Kabelbaan vÃ³Ã³r drukte!', icon: 'â°', type: 'warning', loc: 'santa_cruz',
          info: { warning: 'Vroeg vertrekken = geen wachtrijen bij kabelbaan!', tips: ['Ontbijt meenemen', 'Warme kleding aan!', 'Camera opladen'] }},
        { time: '07:30', title: 'Rijden El Teide', subtitle: '~1.5 uur', icon: 'ğŸš—', type: 'transport', loc: 'teide',
          info: { distance: '75 km', duration: '~1.5 uur', tips: ['Volle tank!', 'Snacks/water mee', 'Warme jas aan!'] }},
        { time: '08:30', title: 'â­ Roques de GarcÃ­a', subtitle: 'Iconische rotsformaties', icon: 'ğŸª¨', type: 'highlight', loc: 'roques_garcia',
          info: { desc: 'Beroemde rotsformaties in maanlandschap', highlights: ['Roque Cinchado (stond op 1000 peseta biljet!)', 'Maanlandschap', 'Spectaculaire foto\'s'], tips: ['Korte wandeling (30 min)', 'Vroeg = weinig mensen'], mustSee: true }},
        { time: '10:00', title: 'â­ KABELBAAN TEIDE', subtitle: 'Naar 3.555m!', icon: 'ğŸš¡', type: 'highlight', loc: 'teide',
          info: { desc: 'Kabelbaan naar bijna de top - spectaculair!', highlights: ['Van 2.356m naar 3.555m in 8 min', 'Uitzicht over alle Canarische Eilanden', 'Maanlandschap'], tips: ['âš ï¸ VOORAF TIJDSLOT BOEKEN!', 'Hoogte = minder zuurstof - rustig aan!', 'Kan koud zijn (5-10Â°C)'], price: 'â‚¬39 p.p. retour', duration: '8 min omhoog', website: 'volcanoteide.com', warning: 'Reserveer op volcanoteide.com!', mustSee: true }},
        { time: '11:30', title: 'Teide top wandeling', subtitle: '3.718m (vergunning nodig!)', icon: 'ğŸ¥¾', type: 'activity', loc: 'teide',
          info: { desc: 'Laatste 163m naar de absolute top van Spanje', warning: 'âš ï¸ VERGUNNING VERPLICHT - 2+ maanden vooraf!', tips: ['Alleen met vergunning', 'Fysiek zwaar door hoogte', 'Niet verplicht - uitzicht kabelbaan al geweldig'], website: 'reservasparquesnacionales.es' }},
        { time: '13:30', title: 'Picknick', subtitle: 'Lunch meenemen!', icon: 'ğŸ§º', type: 'food', loc: 'teide',
          info: { tips: ['Geen restaurants op hoogte', 'Meenemen van thuis/hotel', 'Veel water drinken'] }},
        { time: '15:30', title: 'Costa Adeje strand', subtitle: 'Relaxen na bergen', icon: 'ğŸ–ï¸', type: 'beach', loc: 'costa_adeje',
          info: { desc: 'Ontspannen aan het strand na intensieve ochtend', highlights: ['Playa del Duque', 'Luxe boulevard', 'Zwemmen'], tips: ['Ligbedden â‚¬10-15', 'Veel restaurants'] }},
        { time: '19:30', title: 'Diner', subtitle: 'Seafood Costa Adeje', icon: 'ğŸ½ï¸', type: 'food', loc: 'costa_adeje',
          info: { recommendations: ['El Molino Blanco', 'La Torre del Mirador'], priceRange: 'â‚¬25-40 p.p.' }}
      ],
      5: [
        { time: '08:00', title: 'Check-out Tenerife', subtitle: 'Home2Book Santa Cruz', icon: 'ğŸ“¦', type: 'accommodation', loc: 'santa_cruz',
          info: { tips: ['Niets vergeten!', 'Sleutels inleveren', 'Laatste check'] }},
        { time: '08:30', title: 'Auto inleveren', subtitle: 'CICAR haven (volle tank!)', icon: 'ğŸš—', type: 'transport', loc: 'santa_cruz',
          info: { tips: ['Volle tank tanken!', 'Foto van kilometerstand', 'Naar haven Santa Cruz'], warning: 'Volle tank verplicht!' }},
        { time: '10:00', title: 'â­ FERRY Gran Canaria', subtitle: 'Fred Olsen Express', icon: 'â›´ï¸', type: 'highlight', loc: 'agaete',
          info: { desc: 'Snelle ferry naar Gran Canaria', route: 'Santa Cruz de Tenerife â†’ Puerto de Agaete', duration: '1u 20min', tips: ['ğŸ’Š Reiziektepillen!', 'Buitendek = beste uitzicht', 'Online boeken = goedkoper'], price: 'â‚¬45-60 p.p.', website: 'fredolsen.es', mustSee: true }},
        { time: '11:30', title: 'Aankomst Agaete', subtitle: 'Puerto de las Nieves', icon: 'ğŸ›¬', type: 'transport', loc: 'agaete',
          info: { desc: 'Pittoresk haventje Gran Canaria' }},
        { time: '12:00', title: 'Bus Las Palmas', subtitle: 'Bus 103 (~50 min)', icon: 'ğŸšŒ', type: 'transport', loc: 'las_palmas',
          info: { price: 'â‚¬4.50 p.p.', duration: '50 min', tips: ['Buslijn 103', 'Regelmatige service'] }},
        { time: '13:00', title: 'Check-in Las Palmas', subtitle: 'Beach House Retreat', icon: 'ğŸ ', type: 'accommodation', loc: 'las_palmas',
          info: { desc: accommodations.grancanaria.name, address: accommodations.grancanaria.location, price: 'â‚¬323,36 (4 nachten)', status: 'âœ… GEBOEKT' }},
        { time: '15:30', title: 'Auto ophalen', subtitle: 'CICAR Las Palmas', icon: 'ğŸš—', type: 'transport', loc: 'las_palmas',
          info: { price: 'â‚¬148-185 (4 dagen)', tips: ['Creditcard verplicht'] }},
        { time: '16:30', title: 'Las Canteras strand', subtitle: 'Relaxen na reisdag', icon: 'ğŸ–ï¸', type: 'beach', loc: 'las_canteras',
          info: { desc: 'Prachtig stadsstrand - 3km lang!', highlights: ['Goudgeel zand', 'Surfen mogelijk', 'Boulevard met restaurants'], tips: ['Zwemmen veilig', 'Zonsondergang!'] }},
        { time: '20:00', title: 'Diner', subtitle: 'Tapas Las Canteras', icon: 'ğŸ½ï¸', type: 'food', loc: 'las_canteras',
          info: { priceRange: 'â‚¬20-35 p.p.', tips: ['Boulevard vol restaurants'] }}
      ],
      6: [
        { time: '08:30', title: 'Vertrek bergen', subtitle: 'Centrum eiland', icon: 'ğŸš—', type: 'transport', loc: 'roque_nublo',
          info: { duration: '~1 uur', tips: ['Mooie bergwegen!'] }},
        { time: '09:45', title: 'Pico de las Nieves', subtitle: '1.949m - hoogste punt!', icon: 'ğŸ”ï¸', type: 'activity', loc: 'roque_nublo',
          info: { desc: 'Hoogste punt van Gran Canaria', highlights: ['360Â° panorama uitzicht', 'Op heldere dag: Teide zien!', 'Militaire basis (niet betreden)'] }},
        { time: '10:30', title: 'â­ ROQUE NUBLO', subtitle: 'Wandeling 40 min omhoog', icon: 'ğŸª¨', type: 'highlight', loc: 'roque_nublo',
          info: { desc: 'Iconische rotsformatie - symbool van Gran Canaria!', highlights: ['80m hoge monoliet', 'Spectaculair 360Â° uitzicht', 'Door pijnbomenbos'], duration: '40 min omhoog + 40 terug', difficulty: 'Gemiddeld', tips: ['Water meenemen!', 'Goede schoenen', 'Fotogeniek!'], mustSee: true }},
        { time: '13:00', title: 'Lunch Tejeda', subtitle: 'Mooiste dorp + Bienmesabe!', icon: 'ğŸ½ï¸', type: 'food', loc: 'tejeda',
          info: { desc: 'Pittoresk bergdorp met beste uitzichten', specialty: 'Bienmesabe (amandeldessert)', recommendations: ['Restaurante Yolanda', 'El Refugio'], priceRange: 'â‚¬15-25 p.p.' }},
        { time: '14:30', title: 'Artenara', subtitle: 'Grotwoningen', icon: 'ğŸ˜ï¸', type: 'activity', loc: 'tejeda',
          info: { desc: 'Hoogste dorp - huizen uitgehakt in rotsen!', highlights: ['Authentieke grotwoningen', 'Panorama uitzicht', 'Lokale sfeer'] }},
        { time: '17:30', title: 'Vegueta', subtitle: 'UNESCO oude stad', icon: 'ğŸ›ï¸', type: 'highlight', loc: 'las_palmas',
          info: { desc: 'Historisch centrum Las Palmas - UNESCO Werelderfgoed', highlights: ['Kathedraal Santa Ana', 'Casa de ColÃ³n (Columbus)', 'Smalle straatjes'], tips: ['Te voet verkennen', 'Gratis musea'] }},
        { time: '20:00', title: 'Tapas Vegueta', subtitle: 'Papas arrugadas!', icon: 'ğŸ½ï¸', type: 'food', loc: 'las_palmas',
          info: { specialty: 'Papas arrugadas con mojo', priceRange: 'â‚¬20-30 p.p.' }}
      ],
      7: [
        { time: '08:30', title: 'Naar Maspalomas', subtitle: '45 min rijden', icon: 'ğŸš—', type: 'transport', loc: 'maspalomas',
          info: { tips: ['Zuidkust Gran Canaria', 'Via GC-1 snelweg'] }},
        { time: '09:30', title: 'â­ Maspalomas Duinen', subtitle: 'Mini Sahara!', icon: 'ğŸœï¸', type: 'highlight', loc: 'maspalomas',
          info: { desc: 'Spectaculaire zandduinen - lijkt op Sahara!', highlights: ['Gouden duinen', 'Faro (vuurtoren)', 'Kamelentocht mogelijk'], tips: ['Vroeg = koeler', 'Schoenen uit!', 'Zonsopgang/ondergang = magisch'], mustSee: true }},
        { time: '11:30', title: 'â­ JETSKI!', subtitle: '30-45 min varen', icon: 'ğŸš€', type: 'highlight', loc: 'puerto_rico',
          info: { desc: 'Jetski over de Atlantische Oceaan!', tips: ['Te boeken ter plekke Puerto Rico', 'Rijbewijs niet nodig', 'Zwemvest verplicht', 'âš ï¸ Check reisverzekering extreme sporten!'], price: 'â‚¬55-75 p.p. (30 min)', duration: '30-45 min', mustSee: true }},
        { time: '12:30', title: 'â­ PARASAILING!', subtitle: '80-150m hoog!', icon: 'ğŸª‚', type: 'highlight', loc: 'puerto_rico',
          info: { desc: 'Vliegen boven de oceaan - spectaculair!', tips: ['Samen vliegen = â‚¬80 voor 2', 'Geen ervaring nodig', 'Spectaculaire foto\'s!', 'Gewichtslimiet ~100kg p.p.'], price: 'â‚¬50 solo / â‚¬80 duo', duration: '~15 min vlucht', mustSee: true }},
        { time: '13:30', title: 'Lunch', subtitle: 'Puerto Rico haven', icon: 'ğŸ½ï¸', type: 'food', loc: 'puerto_rico',
          info: { priceRange: 'â‚¬15-25 p.p.' }},
        { time: '15:00', title: 'â­ Transparante Kayak', subtitle: '1.5u glazen bodem!', icon: 'ğŸ›¶', type: 'highlight', loc: 'mogan',
          info: { desc: 'Kayakken met doorzichtige bodem - zie onderwaterleven!', highlights: ['Glazen bodem kayak', 'Snorkelen mogelijk', 'Grotten verkennen'], price: 'â‚¬40-50 p.p.', duration: '1.5 uur', mustSee: true }},
        { time: '17:00', title: 'Puerto de MogÃ¡n', subtitle: '"Klein VenetiÃ«" + VRIJDAGMARKT!', icon: 'ğŸ˜ï¸', type: 'activity', loc: 'mogan',
          info: { desc: 'Pittoresk haventje met kanalen en bougainville', highlights: ['Kanalen door dorp', 'Bloemenpracht', 'Gezellige haven'], tips: ['ğŸ‰ VRIJDAG = GROTE MARKTDAG!', 'Souvenirs kopen', 'Zonsondergang perfect'] }},
        { time: '20:00', title: 'Diner', subtitle: 'Las Canteras boulevard', icon: 'ğŸ½ï¸', type: 'food', loc: 'las_canteras',
          info: { priceRange: 'â‚¬25-40 p.p.' }}
      ],
      8: [
        { time: '10:00', title: 'â­ POEMA DEL MAR', subtitle: 'Aquarium 2-3 uur', icon: 'ğŸŸ', type: 'highlight', loc: 'poema_mar',
          info: { desc: 'Spectaculair aquarium met 2e grootste panoramaruit ter wereld!', highlights: ['Haaien', 'Gigantische panoramaruit', 'Interactieve zones', 'PinguÃ¯ns'], tips: ['Online tickets = goedkoper', 'Niet haasten - veel te zien', '2-3 uur nodig'], price: 'â‚¬23-28 p.p.', duration: '2-3 uur', website: 'poemadelmar.com', mustSee: true }},
        { time: '13:00', title: 'Lunch', subtitle: 'Strandtent Las Canteras', icon: 'ğŸ½ï¸', type: 'food', loc: 'las_canteras',
          info: { priceRange: 'â‚¬15-25 p.p.' }},
        { time: '14:30', title: 'Laatste stranddag', subtitle: 'Relaxen & zwemmen', icon: 'ğŸ–ï¸', type: 'beach', loc: 'las_canteras',
          info: { desc: 'Genieten van laatste volledige dag', tips: ['Ligbedden huren', 'Zwemmen', 'Laatste zonnestralen opvangen'] }},
        { time: '17:30', title: 'Boulevard wandeling', subtitle: 'Souvenirs kopen', icon: 'ğŸ›ï¸', type: 'activity', loc: 'las_canteras',
          info: { tips: ['Souvenirs: Mojo sauzen, Gofio, Aloe vera producten', 'Winkels langs boulevard'] }},
        { time: '19:00', title: 'Auto inleveren', subtitle: 'CICAR Las Palmas', icon: 'ğŸš—', type: 'transport', loc: 'las_palmas',
          info: { tips: ['Volle tank!', 'Tijd voor controle inplannen'] }},
        { time: '20:30', title: 'â­ AFSCHEIDSDINER', subtitle: 'Reserveer vooraf!', icon: 'ğŸ½ï¸', type: 'highlight', loc: 'las_palmas',
          info: { desc: 'Laatste avond - maak er iets speciaals van!', recommendations: ['La Marinera (vis)', 'Deliciosa Marta (creatief)', 'El Churrasco (vlees)'], tips: ['âš ï¸ RESERVEER VOORAF!', 'Dress code: smart casual'], priceRange: 'â‚¬35-50 p.p.', mustSee: true }}
      ],
      9: [
        { time: '07:30', title: 'Laatste ontbijt', subtitle: 'Aan zee', icon: 'ğŸ³', type: 'food', loc: 'las_canteras',
          info: { desc: 'Genieten van laatste uurtjes', tips: ['Boulevard cafÃ©', 'Rustig wakker worden'] }},
        { time: '08:30', title: 'Check-out', subtitle: 'Beach House Retreat', icon: 'ğŸ“¦', type: 'accommodation', loc: 'las_palmas',
          info: { tips: ['Niets vergeten!', 'Sleutels inleveren'] }},
        { time: '09:00', title: 'Naar luchthaven', subtitle: 'Bus 60 of taxi', icon: 'ğŸšŒ', type: 'transport', loc: 'lpa_airport',
          info: { options: ['Bus 60: â‚¬3.50 p.p., 30 min', 'Taxi: ~â‚¬30, 25 min'], tips: ['Ruim op tijd!', '2 uur voor vlucht'] }},
        { time: '10:45', title: 'âœˆï¸ VLUCHT HUIS', subtitle: 'Las Palmas â†’ Amsterdam', icon: 'ğŸ›«', type: 'highlight', loc: 'lpa_airport',
          info: { desc: 'Terugvlucht naar Nederland', duration: '4u 30min', price: 'â‚¬472 (2p)', tips: ['Tax free shopping', 'Laatste Canarische snacks kopen'] }},
        { time: '16:15', title: 'ğŸ  Thuis!', subtitle: 'Aankomst Schiphol', icon: 'ğŸ ', type: 'transport', loc: 'lpa_airport',
          info: { desc: 'Welkom terug in Nederland!' }}
      ]
    };

    // BUDGET
    const budget = {
      booked: [],
      estimated: [
        { item: 'âœˆï¸ Vluchten (2 pers retour)', budget: 854, comfort: 950 },
        { item: 'ğŸ  Tenerife 4 nachten', budget: 310, comfort: 400 },
        { item: 'ğŸ  Gran Canaria 4 nachten', budget: 323, comfort: 420 },
        { item: 'ğŸš— Huurauto Tenerife (4d)', budget: 140, comfort: 180 },
        { item: 'ğŸš— Huurauto Gran Canaria (4d)', budget: 148, comfort: 185 },
        { item: 'â›½ Benzine (~500km)', budget: 50, comfort: 70 },
        { item: 'â›´ï¸ Ferry', budget: 90, comfort: 120 },
        { item: 'ğŸ…¿ï¸ Parkeren Tenerife', budget: 50, comfort: 70 },
        { item: 'ğŸ¦‡ Cueva del Viento', budget: 40, comfort: 40 },
        { item: 'ğŸ‹ Walvissen tour', budget: 60, comfort: 100 },
        { item: 'ğŸš¡ Teide Kabelbaan', budget: 78, comfort: 78 },
        { item: 'ğŸš€ Jetski', budget: 110, comfort: 150 },
        { item: 'ğŸª‚ Parasailing', budget: 80, comfort: 80 },
        { item: 'ğŸ›¶ Kayak', budget: 80, comfort: 100 },
        { item: 'ğŸŸ Poema del Mar', budget: 46, comfort: 56 },
        { item: 'ğŸ½ï¸ Eten (9 dagen)', budget: 400, comfort: 550 },
        { item: 'ğŸ¥ Reisverzekering', budget: 45, comfort: 65 },
        { item: 'ğŸ’° Buffer', budget: 100, comfort: 150 }
      ]
    };

    // CHECKLIST
    const checklistSections = [
      { title: 'ğŸ”´ NU BOEKEN', items: [
        { key: 'flights', label: 'âœˆï¸ Vluchten Amsterdam â†” Tenerife/Gran Canaria' },
        { key: 'accomTF', label: 'ğŸ  Accommodatie Tenerife (4 nachten)' },
        { key: 'accomGC', label: 'ğŸ  Accommodatie Gran Canaria (4 nachten)' },
        { key: 'insurance', label: 'Reisverzekering (extreme sporten!)' },
        { key: 'teidePermit', label: 'Teide TOP vergunning (2+ mnd vooraf!)' },
        { key: 'cueva', label: 'Cueva del Viento reserveren' }
      ]},
      { title: 'ğŸŸ  MAART/APRIL', items: [
        { key: 'teideCable', label: 'Teide Kabelbaan tijdslot' },
        { key: 'whales', label: 'Walvissen tour boeken' },
        { key: 'carTF', label: 'Huurauto Tenerife' },
        { key: 'carGC', label: 'Huurauto Gran Canaria' },
        { key: 'ferry', label: 'Ferry Fred Olsen' }
      ]},
      { title: 'ğŸŸ¢ MEI', items: [
        { key: 'jetski', label: 'Jetski (ter plekke)' },
        { key: 'parasail', label: 'Parasailing (ter plekke)' },
        { key: 'kayak', label: 'Transparante Kayak' },
        { key: 'poema', label: 'Poema del Mar tickets' }
      ]},
      { title: 'ğŸ“¦ INPAKKEN', items: [
        { key: 'passport', label: 'Paspoort / ID' },
        { key: 'license', label: 'Rijbewijs' },
        { key: 'creditcard', label: 'Creditcard' },
        { key: 'swimwear', label: 'Zwemkleding (2x)' },
        { key: 'hikingshoes', label: 'Wandelschoenen' },
        { key: 'winterjacket', label: 'Winterjas (Teide!)' },
        { key: 'seapills', label: 'ğŸ’Š Reiziektepillen!' },
        { key: 'sunscreen', label: 'Zonnebrand SPF50' }
      ]}
    ];

    // Helper functions
    function getCardClass(type) {
      const classes = {
        transport: 'card-transport',
        warning: 'card-warning',
        food: 'card-food',
        accommodation: 'card-accommodation',
        highlight: 'card-highlight',
        beach: 'card-beach',
        activity: 'card-activity'
      };
      return classes[type] || 'bg-white';
    }

    function toggleCheck(key) {
      checklist[key] = !checklist[key];
      localStorage.setItem('tenerifeChecklist2', JSON.stringify(checklist));
      render();
    }

    function togglePacking(key) {
      packingList[key] = !packingList[key];
      localStorage.setItem('tenerifePackingList', JSON.stringify(packingList));
      render();
    }

    // EXPENSES TRACKER
    let expenses = JSON.parse(localStorage.getItem('tenerifeExpenses') || '[]');
    
    function addExpense() {
      const desc = document.getElementById('expenseDesc').value;
      const amount = parseFloat(document.getElementById('expenseAmount').value);
      const category = document.getElementById('expenseCategory').value;
      if (desc && amount > 0) {
        expenses.push({ id: Date.now(), desc, amount, category, date: new Date().toLocaleDateString('nl-NL') });
        localStorage.setItem('tenerifeExpenses', JSON.stringify(expenses));
        document.getElementById('expenseDesc').value = '';
        document.getElementById('expenseAmount').value = '';
        render();
      }
    }
    
    function deleteExpense(id) {
      expenses = expenses.filter(e => e.id !== id);
      localStorage.setItem('tenerifeExpenses', JSON.stringify(expenses));
      render();
    }

    // REIS DAGBOEK / NOTES
    let dayNotes = JSON.parse(localStorage.getItem('tenerifeDayNotes') || '{}');

    function saveNote() {
      const note = document.getElementById('dayNoteInput').value;
      if (note.trim()) {
        if (!dayNotes[activeDay]) dayNotes[activeDay] = [];
        dayNotes[activeDay].push({ 
          id: Date.now(), 
          text: note, 
          timestamp: new Date().toLocaleString('nl-NL') 
        });
        localStorage.setItem('tenerifeDayNotes', JSON.stringify(dayNotes));
        document.getElementById('dayNoteInput').value = '';
        render();
      }
    }

    function deleteNote(noteId) {
      dayNotes[activeDay] = dayNotes[activeDay].filter(n => n.id !== noteId);
      localStorage.setItem('tenerifeDayNotes', JSON.stringify(dayNotes));
      render();
    }

    function setDay(d) { activeDay = d; render(); }
    function setTab(t) { activeTab = t; render(); }
    function openModal(act) { selectedModal = act; render(); }
    function closeModal() { selectedModal = null; render(); }

    // MAIN RENDER
    function render() {
      const day = days[activeDay - 1];
      const acts = activities[activeDay] || [];
      const accom = day.accom ? accommodations[day.accom] : null;
      
      const bookedTotal = budget.booked.reduce((s, i) => s + i.price, 0);
      const estBudget = budget.estimated.reduce((s, i) => s + i.budget, 0);
      const estComfort = budget.estimated.reduce((s, i) => s + i.comfort, 0);
      const totalBudget = Math.round(bookedTotal + estBudget);
      const totalComfort = Math.round(bookedTotal + estComfort);
      
      const checkedCount = Object.values(checklist).filter(Boolean).length;
      const totalChecks = checklistSections.reduce((s, sec) => s + sec.items.length, 0);

      // Countdown calculation
      const tripDate = new Date('2026-05-16T00:00:00');
      const now = new Date();
      const diff = tripDate - now;
      const daysLeft = Math.ceil(diff / (1000 * 60 * 60 * 24));
      const weeksLeft = Math.floor(daysLeft / 7);
      const remainingDays = daysLeft % 7;

      let html = `
        <!-- HEADER -->
        <div class="bg-white rounded-3xl p-5 shadow-lg mb-4">
          <div class="flex items-center justify-between">
            <div>
              <h1 class="text-2xl font-bold text-gray-800">${trip.title}</h1>
              <p class="text-blue-600 font-medium">${trip.subtitle}</p>
              <p class="text-gray-500 text-sm mt-1">${trip.dates} â€¢ ${trip.persons} personen â€¢ ${trip.duration}</p>
            </div>
            <a href="/" class="text-gray-400 hover:text-gray-600">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
            </a>
          </div>
          <div class="flex flex-wrap gap-2 mt-3">
            <div class="inline-flex items-center gap-2 bg-red-100 text-red-700 px-3 py-1.5 rounded-full text-sm font-medium">
              ${trip.timezone}
            </div>
            ${daysLeft > 0 ? `
              <div class="inline-flex items-center gap-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-1.5 rounded-full text-sm font-bold shadow-lg">
                âœˆï¸ Nog ${weeksLeft > 0 ? weeksLeft + ' weken' + (remainingDays > 0 ? ' en ' + remainingDays + ' dagen' : '') : daysLeft + ' dagen'}!
              </div>
            ` : daysLeft === 0 ? `
              <div class="inline-flex items-center gap-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-1.5 rounded-full text-sm font-bold shadow-lg animate-pulse">
                ğŸ‰ VANDAAG IS HET ZOVER!
              </div>
            ` : `
              <div class="inline-flex items-center gap-2 bg-gray-500 text-white px-4 py-1.5 rounded-full text-sm font-bold">
                âœ… Reis voltooid
              </div>
            `}
            ${weatherData ? `
              <div class="inline-flex items-center gap-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white px-3 py-1.5 rounded-full text-sm font-medium shadow">
                ${getWeatherEmoji(weatherData.current.weather_code)} ${Math.round(weatherData.current.temperature_2m)}Â°C
                <span class="text-white/70 text-xs">nu in Tenerife</span>
              </div>
            ` : `
              <button onclick="fetchWeather()" class="inline-flex items-center gap-1 bg-cyan-100 text-cyan-700 px-3 py-1.5 rounded-full text-sm font-medium hover:bg-cyan-200 transition">
                ğŸŒ¤ï¸ Weer laden
              </button>
            `}
          </div>
        </div>

        <!-- TABS -->
        <div class="flex gap-2 mb-4 overflow-x-auto hide-scrollbar">
          <button onclick="setTab('planning')" class="px-4 py-2 rounded-xl font-medium whitespace-nowrap ${activeTab === 'planning' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700'} shadow">ğŸ“… Dagplanning</button>
          <button onclick="setTab('map')" class="px-4 py-2 rounded-xl font-medium whitespace-nowrap ${activeTab === 'map' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700'} shadow">ğŸ—ºï¸ Kaart</button>
          <button onclick="setTab('budget')" class="px-4 py-2 rounded-xl font-medium whitespace-nowrap ${activeTab === 'budget' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700'} shadow">ğŸ’° Budget</button>
          <button onclick="setTab('checklist')" class="px-4 py-2 rounded-xl font-medium whitespace-nowrap ${activeTab === 'checklist' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700'} shadow">âœ… Checklist (${checkedCount}/${totalChecks})</button>
          <button onclick="setTab('packing')" class="px-4 py-2 rounded-xl font-medium whitespace-nowrap ${activeTab === 'packing' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700'} shadow">ğŸ’ Inpaklijst</button>
        </div>
      `;

      // PLANNING TAB
      if (activeTab === 'planning') {
        html += `
          <!-- Day Tabs -->
          <div class="flex gap-2 overflow-x-auto pb-3 hide-scrollbar">
            ${days.map(d => `
              <button onclick="setDay(${d.day})" class="day-tab flex items-center gap-2 px-4 py-2 rounded-xl font-medium whitespace-nowrap shadow ${activeDay === d.day ? 'active' : 'bg-white text-gray-700'}">
                <span>${d.icon}</span>
                <span>Dag ${d.day}</span>
              </button>
            `).join('')}
          </div>

          <!-- Day Header Card -->
          <div class="bg-white rounded-2xl p-5 shadow-lg mb-4">
            <div class="flex items-start gap-4">
              <img src="https://em-content.zobj.net/source/apple/391/${day.icon === 'âœˆï¸' ? 'airplane-departure_1f6eb' : day.icon === 'ğŸŒ¿' ? 'herb_1f33f' : day.icon === 'ğŸ‹' ? 'spouting-whale_1f433' : day.icon === 'ğŸŒ‹' ? 'volcano_1f30b' : day.icon === 'â›´ï¸' ? 'ferry_26f4-fe0f' : day.icon === 'ğŸ”ï¸' ? 'snow-capped-mountain_1f3d4-fe0f' : day.icon === 'ğŸš€' ? 'rocket_1f680' : day.icon === 'ğŸŸ' ? 'fish_1f41f' : 'house_1f3e0'}.png" alt="${day.icon}" class="w-16 h-16" onerror="this.outerHTML='<span class=\\'text-5xl\\'>${day.icon}</span>'">
              <div class="flex-1">
                <h2 class="text-2xl font-bold text-gray-800">Dag ${day.day}: ${day.title}</h2>
                <p class="text-gray-500">${day.date} â€¢ ${day.island}</p>
                <p class="text-blue-600 font-semibold mt-1">${day.highlight}</p>
              </div>
              <!-- Weather Badge -->
              ${day.weather ? `
              <div class="text-center bg-gradient-to-br from-sky-100 to-blue-100 rounded-xl px-3 py-2 border border-sky-200">
                <div class="text-2xl">${day.weather.icon}</div>
                <div class="text-lg font-bold text-gray-800">${day.weather.high}Â°</div>
                <div class="text-xs text-gray-500">mei gem</div>
              </div>
              ` : ''}
            </div>
            
            <!-- Weather Details -->
            ${day.weather ? `
              <div class="mt-4 grid grid-cols-4 gap-2 text-center text-sm">
                <div class="bg-orange-50 rounded-lg p-2">
                  <div class="text-orange-500">ğŸŒ¡ï¸ Max</div>
                  <div class="font-bold">${day.weather.high}Â°C</div>
                </div>
                <div class="bg-blue-50 rounded-lg p-2">
                  <div class="text-blue-500">ğŸŒ¡ï¸ Min</div>
                  <div class="font-bold">${day.weather.low}Â°C</div>
                </div>
                <div class="bg-yellow-50 rounded-lg p-2">
                  <div class="text-yellow-600">â˜€ï¸ Zon</div>
                  <div class="font-bold">11u</div>
                </div>
                <div class="bg-cyan-50 rounded-lg p-2">
                  <div class="text-cyan-600">ğŸ’§ Regen</div>
                  <div class="font-bold">${day.weather.rain}%</div>
                </div>
              </div>
              ${day.weather.note ? `<div class="mt-2 bg-amber-50 border border-amber-200 rounded-lg p-2 text-sm text-amber-700 text-center">${day.weather.note}</div>` : ''}
              <div class="mt-2 text-xs text-gray-400 text-center">ğŸ“Š Historisch gemiddelde mei</div>
            ` : ''}

            ${accom ? `
              <div class="mt-4 bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-xl p-4">
                <div class="flex items-center gap-2 text-amber-700 font-semibold text-sm mb-1">
                  <span>ğŸ </span>
                  <span>ACCOMMODATIE</span>
                </div>
                <div class="font-bold text-gray-800">${accom.name}</div>
                <div class="text-blue-600 text-sm">${accom.location}</div>
              </div>
            ` : ''}
          </div>

          ${day.showParking ? `
            <!-- Parking Section -->
            <div class="bg-gradient-to-br from-amber-100 to-orange-100 rounded-2xl p-5 shadow-lg mb-4">
              <div class="flex items-center justify-between flex-wrap gap-2 mb-4">
                <div class="flex items-center gap-2">
                  <span class="text-2xl">ğŸ…¿ï¸</span>
                  <span class="font-bold text-gray-800 text-lg">PARKEREN TENERIFE</span>
                </div>
                <div class="flex items-center gap-2">
                  <span class="bg-red-500 text-white text-xs px-2 py-1 rounded-full font-medium">Geen parking bij appartement!</span>
                  <span class="text-orange-600 font-bold">${parkingTenerife.estimated}</span>
                </div>
              </div>
              
              <div class="space-y-3">
                ${parkingTenerife.options.map(opt => `
                  <div class="bg-white rounded-xl p-4 ${opt.recommended ? 'ring-2 ring-green-400' : ''}">
                    <div class="flex items-center justify-between mb-2">
                      <span class="font-bold text-gray-800">${opt.name}</span>
                      ${opt.recommended ? '<span class="bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-medium">Aanbevolen</span>' : ''}
                    </div>
                    <div class="text-sm text-gray-600 space-y-1">
                      <div class="flex items-center gap-2"><span>ğŸ“</span>${opt.address}</div>
                      <div class="flex items-center gap-2"><span>ğŸš¶</span>${opt.distance}</div>
                      <div class="text-green-600 font-semibold">${opt.price}</div>
                    </div>
                    <div class="mt-2 bg-yellow-50 text-yellow-800 text-sm px-3 py-2 rounded-lg flex items-center gap-2">
                      <span>ğŸ’¡</span>
                      <span>${opt.tip}</span>
                    </div>
                  </div>
                `).join('')}
              </div>

              <div class="mt-4 bg-yellow-50 border border-yellow-300 rounded-xl p-4 text-yellow-800">
                ${parkingTenerife.recommendation}
              </div>
            </div>
          ` : ''}

          <!-- Activity Info Banner -->
          <div class="bg-white rounded-xl p-4 mb-4 shadow flex items-center gap-3">
            <span class="text-2xl">ğŸ’¡</span>
            <span class="text-gray-700"><strong>Klik op een activiteit</strong> voor gedetailleerde info, afstanden, tips en boekingsinformatie!</span>
          </div>

          <!-- Timeline -->
          <div class="bg-white rounded-2xl p-4 shadow-lg">
            <div class="space-y-3">
              ${acts.map((act, idx) => {
                const prevLoc = idx > 0 ? acts[idx-1].loc : null;
                const dist = prevLoc ? calcDist(prevLoc, act.loc) : null;
                
                return `
                  <div onclick='openModal(${JSON.stringify(act).replace(/'/g, "\\'")})' 
                       class="rounded-xl p-4 cursor-pointer hover:shadow-md transition-all ${getCardClass(act.type)}">
                    <div class="flex items-center gap-4">
                      <div class="font-mono font-bold text-gray-700 w-14 text-center text-lg">${act.time}</div>
                      <div class="text-3xl">${act.icon}</div>
                      <div class="flex-1 min-w-0">
                        <div class="font-bold text-gray-800 text-lg">${act.title}</div>
                        <div class="text-gray-600 text-sm truncate">${act.subtitle}</div>
                      </div>
                      ${dist && dist > 0 ? `
                        <div class="hidden md:block text-xs bg-white/70 px-2 py-1 rounded-full text-gray-600">
                          ğŸš— ${dist}km
                        </div>
                      ` : ''}
                      <div class="text-gray-400">â†’</div>
                    </div>
                  </div>
                `;
              }).join('')}
            </div>
          </div>

          <!-- Day-specific tips -->
          ${activeDay === 4 ? `
            <div class="mt-4 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-2xl p-5 shadow">
              <h4 class="font-bold text-blue-800 mb-3">ğŸ§¥ TEIDE - KLEDING MEENEMEN!</h4>
              <div class="flex flex-wrap gap-2">
                ${['Winterjas', 'Handschoenen', 'Muts', 'Zonnebril', 'SPF50'].map(i => `<span class="bg-white text-blue-800 px-3 py-1 rounded-full text-sm font-medium">${i}</span>`).join('')}
              </div>
              <p class="mt-3 text-blue-700 text-sm">ğŸŒ¡ï¸ Op 3.500m hoogte is het 5-10Â°C!</p>
            </div>
          ` : ''}
          ${activeDay === 7 ? `
            <div class="mt-4 bg-gradient-to-r from-amber-100 to-orange-100 rounded-2xl p-5 shadow">
              <h4 class="font-bold text-amber-800 mb-3">ğŸš€ WATERSPORT PRIJZEN</h4>
              <div class="grid grid-cols-2 gap-2 text-sm">
                <div class="bg-white p-3 rounded-xl"><span class="font-bold">ğŸš€ Jetski</span><br/>â‚¬55-75 p.p.</div>
                <div class="bg-white p-3 rounded-xl"><span class="font-bold">ğŸª‚ Parasailing</span><br/>â‚¬50-80 p.p.</div>
                <div class="bg-white p-3 rounded-xl"><span class="font-bold">ğŸ›¶ Kayak</span><br/>â‚¬40-50 p.p.</div>
              </div>
              <p class="mt-3 text-amber-700 text-sm">âš ï¸ Check reisverzekering voor extreme sporten!</p>
            </div>
          ` : ''}

          <!-- REIS DAGBOEK -->
          <div class="mt-4 bg-gradient-to-r from-pink-100 to-purple-100 rounded-2xl p-5 shadow">
            <h4 class="font-bold text-purple-800 mb-3 flex items-center gap-2">ğŸ“ Reis Dagboek - Dag ${activeDay}</h4>
            <div class="flex gap-2 mb-3">
              <input type="text" id="dayNoteInput" placeholder="Schrijf een notitie..." 
                class="flex-1 px-4 py-2 rounded-xl border border-purple-200 text-sm focus:outline-none focus:border-purple-400" />
              <button onclick="saveNote()" class="bg-purple-600 text-white px-4 py-2 rounded-xl font-medium hover:bg-purple-700 transition">
                + Toevoegen
              </button>
            </div>
            ${(dayNotes[activeDay] && dayNotes[activeDay].length > 0) ? `
              <div class="space-y-2 max-h-40 overflow-y-auto">
                ${dayNotes[activeDay].slice().reverse().map(n => `
                  <div class="bg-white rounded-lg p-3 flex justify-between items-start">
                    <div>
                      <p class="text-gray-800">${n.text}</p>
                      <p class="text-xs text-gray-400 mt-1">${n.timestamp}</p>
                    </div>
                    <button onclick="deleteNote(${n.id})" class="text-red-400 hover:text-red-600 text-lg ml-2">Ã—</button>
                  </div>
                `).join('')}
              </div>
            ` : `
              <p class="text-purple-600 text-sm italic">Nog geen notities voor deze dag. Voeg je eerste toe! âœï¸</p>
            `}
          </div>
        `;
      }

      // MAP TAB
      if (activeTab === 'map') {
        const dayLocations = acts.filter(a => a.loc && locations[a.loc]).map(a => ({
          name: a.title,
          icon: a.icon,
          time: a.time,
          ...locations[a.loc]
        }));

        // Calculate center of all locations for this day
        const centerLat = dayLocations.length > 0 
          ? dayLocations.reduce((s, l) => s + l.lat, 0) / dayLocations.length 
          : 28.3;
        const centerLng = dayLocations.length > 0 
          ? dayLocations.reduce((s, l) => s + l.lng, 0) / dayLocations.length 
          : -16.5;
        
        html += `
          <!-- Day Selector for Map -->
          <div class="flex gap-2 overflow-x-auto pb-3 hide-scrollbar mb-4">
            ${days.map(d => `
              <button onclick="setDay(${d.day}); setTab('map');" class="flex items-center gap-2 px-4 py-2 rounded-xl font-medium whitespace-nowrap shadow ${activeDay === d.day ? 'bg-blue-600 text-white' : 'bg-white text-gray-700'}">
                <span>${d.icon}</span>
                <span>Dag ${d.day}</span>
              </button>
            `).join('')}
          </div>

          <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
            <div class="p-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white">
              <h3 class="font-bold text-lg">ğŸ—ºï¸ Kaart - Dag ${activeDay}: ${day.title}</h3>
              <p class="text-white/80 text-sm">${dayLocations.length} locaties op ${day.island}</p>
            </div>
            
            <!-- Map as location list with links -->
            <div class="p-4 space-y-2">
              ${dayLocations.map((loc, idx) => '<a href="https://www.google.com/maps/search/?api=1&query=' + loc.lat + ',' + loc.lng + '" target="_blank" class="flex items-center gap-3 p-3 bg-gray-50 rounded-xl hover:bg-blue-50 transition"><div class="w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center font-bold text-sm">' + (idx + 1) + '</div><span class="text-2xl">' + loc.icon + '</span><div class="flex-1"><div class="font-medium">' + loc.name + '</div><div class="text-sm text-gray-500">' + loc.time + '</div></div><span class="text-blue-500">ğŸ“ Open</span></a>').join('')}
            </div>

            <div class="p-4 bg-blue-50 border-t">
              <a href="https://www.google.com/maps/dir/${dayLocations.map(l => l.lat + ',' + l.lng).join('/')}" 
                 target="_blank"
                 class="block w-full bg-blue-600 text-white text-center py-3 rounded-xl font-bold hover:bg-blue-700 transition">
                ğŸ—ºï¸ Open route in Google Maps
              </a>
            </div>
          </div>
        `;
      }

      // BUDGET TAB
      if (activeTab === 'budget') {
        const totalExpenses = expenses.reduce((s, e) => s + e.amount, 0);
        const categoryTotals = expenses.reduce((acc, e) => {
          acc[e.category] = (acc[e.category] || 0) + e.amount;
          return acc;
        }, {});
        
        html += `
          <div class="space-y-4">
            <!-- EXPENSES TRACKER -->
            <div class="bg-gradient-to-r from-purple-500 to-indigo-600 rounded-2xl p-5 text-white shadow-lg">
              <h3 class="font-bold text-lg mb-3 flex items-center gap-2">ğŸ’¸ Uitgaven Tracker</h3>
              <div class="grid grid-cols-3 gap-2 mb-4">
                <input type="text" id="expenseDesc" placeholder="Omschrijving" class="col-span-2 px-3 py-2 rounded-lg text-gray-800 text-sm" />
                <input type="number" id="expenseAmount" placeholder="â‚¬" step="0.01" class="px-3 py-2 rounded-lg text-gray-800 text-sm" />
              </div>
              <div class="flex gap-2">
                <select id="expenseCategory" class="flex-1 px-3 py-2 rounded-lg text-gray-800 text-sm">
                  <option value="ğŸ½ï¸ Eten">ğŸ½ï¸ Eten</option>
                  <option value="ğŸš— Vervoer">ğŸš— Vervoer</option>
                  <option value="ğŸ« Activiteit">ğŸ« Activiteit</option>
                  <option value="ğŸ›’ Shopping">ğŸ›’ Shopping</option>
                  <option value="ğŸ¨ Verblijf">ğŸ¨ Verblijf</option>
                  <option value="ğŸ’° Overig">ğŸ’° Overig</option>
                </select>
                <button onclick="addExpense()" class="bg-white text-purple-600 px-4 py-2 rounded-lg font-bold hover:bg-purple-100 transition">+ Toevoegen</button>
              </div>
              ${expenses.length > 0 ? `
                <div class="mt-4 pt-4 border-t border-white/30">
                  <div class="flex justify-between items-center">
                    <span class="text-white/80">Totaal uitgegeven:</span>
                    <span class="text-2xl font-bold">â‚¬${totalExpenses.toFixed(2)}</span>
                  </div>
                  <div class="text-sm text-white/70 mt-1">Budget remaining: â‚¬${(totalBudget - bookedTotal - totalExpenses).toFixed(2)}</div>
                </div>
              ` : ''}
            </div>
            
            ${expenses.length > 0 ? `
              <div class="bg-white rounded-2xl p-5 shadow-lg">
                <h3 class="font-bold text-lg mb-3">ğŸ“ Mijn Uitgaven</h3>
                <div class="space-y-2 max-h-48 overflow-y-auto">
                  ${expenses.slice().reverse().map(e => `
                    <div class="flex justify-between items-center py-2 px-3 bg-gray-50 rounded-lg">
                      <div>
                        <span class="text-sm">${e.category}</span>
                        <span class="font-medium ml-2">${e.desc}</span>
                        <span class="text-xs text-gray-400 ml-2">${e.date}</span>
                      </div>
                      <div class="flex items-center gap-2">
                        <span class="font-bold text-purple-600">â‚¬${e.amount.toFixed(2)}</span>
                        <button onclick="deleteExpense(${e.id})" class="text-red-400 hover:text-red-600 text-lg">Ã—</button>
                      </div>
                    </div>
                  `).join('')}
                </div>
              </div>
            ` : ''}

            <!-- Alert: Nog niets geboekt -->
            <div class="bg-gradient-to-r from-orange-100 to-amber-100 border-2 border-orange-300 rounded-2xl p-5 shadow-lg">
              <div class="flex items-center gap-3 mb-2">
                <span class="text-3xl">âš ï¸</span>
                <h3 class="font-bold text-lg text-orange-800">Nog niets geboekt!</h3>
              </div>
              <p class="text-orange-700">Boek snel je vluchten en accommodatie - prijzen stijgen naarmate de datum dichterbij komt!</p>
              <div class="mt-3 flex flex-wrap gap-2">
                <span class="bg-orange-200 text-orange-800 px-3 py-1 rounded-full text-sm font-medium">âœˆï¸ Vluchten</span>
                <span class="bg-orange-200 text-orange-800 px-3 py-1 rounded-full text-sm font-medium">ğŸ  Tenerife verblijf</span>
                <span class="bg-orange-200 text-orange-800 px-3 py-1 rounded-full text-sm font-medium">ğŸ  Gran Canaria verblijf</span>
              </div>
            </div>

            <div class="bg-white rounded-2xl p-5 shadow-lg overflow-x-auto">
              <h3 class="font-bold text-lg mb-4">ğŸ’° Geschat</h3>
              <table class="w-full text-sm">
                <thead><tr class="border-b-2"><th class="text-left py-2">Item</th><th class="text-right py-2">Budget</th><th class="text-right py-2">Comfort</th></tr></thead>
                <tbody>
                  ${budget.estimated.map(i => `<tr class="border-b border-gray-100"><td class="py-2">${i.item}</td><td class="text-right text-gray-600">â‚¬${i.budget}</td><td class="text-right">â‚¬${i.comfort}</td></tr>`).join('')}
                </tbody>
              </table>
            </div>

            <div class="grid grid-cols-2 gap-4">
              <div class="bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-5 text-white text-center">
                <div class="text-sm opacity-80">ğŸ’š Budget</div>
                <div class="text-3xl font-bold">â‚¬${totalBudget}</div>
                <div class="text-sm opacity-80">â‚¬${Math.round(totalBudget/2)} p.p.</div>
              </div>
              <div class="bg-gradient-to-br from-amber-500 to-orange-500 rounded-2xl p-5 text-white text-center">
                <div class="text-sm opacity-80">âœ¨ Comfort</div>
                <div class="text-3xl font-bold">â‚¬${totalComfort}</div>
                <div class="text-sm opacity-80">â‚¬${Math.round(totalComfort/2)} p.p.</div>
              </div>
            </div>
          </div>
        `;
      }

      // CHECKLIST TAB
      if (activeTab === 'checklist') {
        html += `
          <div class="space-y-4">
            ${checklistSections.map(sec => `
              <div class="bg-white rounded-2xl p-5 shadow-lg">
                <h3 class="font-bold mb-3">${sec.title}</h3>
                <div class="space-y-2">
                  ${sec.items.map(i => `
                    <label class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer">
                      <input type="checkbox" ${checklist[i.key] ? 'checked' : ''} onchange="toggleCheck('${i.key}')" class="w-5 h-5 rounded text-blue-600">
                      <span class="${checklist[i.key] ? 'line-through text-gray-400' : 'text-gray-700'}">${i.label}</span>
                    </label>
                  `).join('')}
                </div>
              </div>
            `).join('')}
            
            <div class="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-5 text-white">
              <h3 class="font-bold mb-3">ğŸ“Š Voortgang</h3>
              <div class="bg-white/20 rounded-full h-4 mb-2">
                <div class="bg-white rounded-full h-4 transition-all" style="width: ${Math.max((checkedCount/totalChecks)*100, 5)}%"></div>
              </div>
              <div class="text-center">${checkedCount} van ${totalChecks} items</div>
            </div>
          </div>
        `;
      }

      // PACKING TAB
      if (activeTab === 'packing') {
        const packingChecked = Object.keys(packingList).filter(k => packingList[k]).length;
        const packingTotal = Object.values(packingCategories).reduce((sum, cat) => sum + cat.items.length, 0);
        
        html += `
          <div class="space-y-4">
            <div class="bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-5 text-white">
              <h2 class="text-xl font-bold mb-2">ğŸ’ Slimme Inpaklijst</h2>
              <p class="text-white/80 text-sm">Automatisch gegenereerd op basis van je activiteiten!</p>
              <div class="mt-3 flex items-center gap-3">
                <div class="flex-1 bg-white/20 rounded-full h-3">
                  <div class="bg-white rounded-full h-3 transition-all" style="width: ${Math.max((packingChecked/packingTotal)*100, 3)}%"></div>
                </div>
                <span class="font-bold">${packingChecked}/${packingTotal}</span>
              </div>
            </div>
            
            ${Object.entries(packingCategories).map(([key, cat]) => `
              <div class="bg-white rounded-2xl p-5 shadow-lg">
                <h3 class="font-bold mb-3 text-lg">${cat.title}</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                  ${cat.items.map((item, idx) => {
                    const itemKey = key + '_' + idx;
                    return `
                      <label class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer">
                        <input type="checkbox" ${packingList[itemKey] ? 'checked' : ''} onchange="togglePacking('${itemKey}')" class="w-5 h-5 rounded text-purple-600">
                        <span class="${packingList[itemKey] ? 'line-through text-gray-400' : 'text-gray-700'}">${item}</span>
                      </label>
                    `;
                  }).join('')}
                </div>
              </div>
            `).join('')}
            
            <div class="bg-amber-50 border border-amber-200 rounded-2xl p-5">
              <h3 class="font-bold text-amber-800 mb-2">ğŸ’¡ Pro Tips</h3>
              <ul class="text-amber-700 text-sm space-y-1">
                <li>â€¢ El Teide: warme kleding is ESSENTIEEL (5-10Â°C op 3.555m!)</li>
                <li>â€¢ Reiziektepillen voor ferry Ã©n walvissen tour</li>
                <li>â€¢ Zonnebrand SPF50 - zon is sterk op Canarische Eilanden</li>
              </ul>
            </div>
          </div>
        `;
      }

      // MODAL
      if (selectedModal) {
        const m = selectedModal;
        const info = m.info || {};
        
        // Calculate distances for modal
        const accomLoc = day.accom === 'tenerife' ? 'santa_cruz' : day.accom === 'grancanaria' ? 'las_palmas' : null;
        const currentIdx = acts.findIndex(a => a.title === m.title && a.time === m.time);
        const prevAct = currentIdx > 0 ? acts[currentIdx - 1] : null;
        const distFromAccom = m.loc && accomLoc ? calcDist(accomLoc, m.loc) : null;
        const distFromPrev = m.loc && prevAct && prevAct.loc ? calcDist(prevAct.loc, m.loc) : null;
        
        let distanceHtml = '';
        if (distFromAccom || distFromPrev) {
          distanceHtml = '<div class="bg-blue-50 rounded-2xl p-4"><h4 class="font-bold text-blue-700 mb-3 flex items-center gap-2">ğŸ“ Afstanden & Rijtijd</h4><div class="grid grid-cols-2 gap-3">';
          if (distFromAccom) {
            distanceHtml += '<div class="bg-white rounded-xl p-3"><div class="text-gray-500 text-sm">Vanaf accommodatie</div><div class="text-blue-600 text-xl font-bold">' + distFromAccom + ' km</div><div class="text-gray-500 text-sm">' + driveTime(distFromAccom) + ' rijden</div></div>';
          }
          if (distFromPrev) {
            distanceHtml += '<div class="bg-white rounded-xl p-3"><div class="text-gray-500 text-sm">Vanaf vorige stop</div><div class="text-green-600 text-xl font-bold">' + distFromPrev + ' km</div><div class="text-gray-500 text-sm">' + driveTime(distFromPrev) + ' rijden</div></div>';
          }
          distanceHtml += '</div></div>';
        }
        
        html += `
          <div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50" onclick="closeModal()">
            <div class="bg-white rounded-3xl max-w-lg w-full max-h-[85vh] overflow-y-auto shadow-2xl" onclick="event.stopPropagation()">
              <div class="p-5 ${getCardClass(m.type)} rounded-t-3xl">
                <div class="flex justify-between items-start">
                  <div class="flex items-center gap-3">
                    <span class="text-4xl">${m.icon}</span>
                    <div>
                      <h3 class="text-xl font-bold text-gray-800">${m.title}</h3>
                      <p class="text-gray-600">${m.time} â€¢ ${m.subtitle}</p>
                    </div>
                  </div>
                  <button onclick="closeModal()" class="text-3xl text-gray-400 hover:text-gray-600">Ã—</button>
                </div>
              </div>
              
              <div class="p-5 space-y-4">
                ${distanceHtml}
                
                ${info.desc ? `<div><h4 class="font-bold text-gray-700 mb-1">ğŸ“– Beschrijving</h4><p class="text-gray-600">${info.desc}</p></div>` : ''}
                
                ${info.highlights ? `
                  <div>
                    <h4 class="font-bold text-gray-700 mb-2">âœ¨ Highlights</h4>
                    <div class="flex flex-wrap gap-2">${info.highlights.map(h => `<span class="bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm">${h}</span>`).join('')}</div>
                  </div>
                ` : ''}
                
                ${info.price || info.priceRange ? `
                  <div class="bg-green-50 p-4 rounded-xl">
                    <h4 class="font-bold text-green-800 mb-1">ğŸ’° Kosten</h4>
                    <p class="text-green-700 font-semibold text-lg">${info.price || info.priceRange}</p>
                  </div>
                ` : ''}
                
                ${info.duration ? `<div class="flex items-center gap-2 bg-gray-50 p-3 rounded-xl"><span>â±ï¸</span><strong>Duur:</strong> ${info.duration}</div>` : ''}
                
                ${info.tips ? `
                  <div>
                    <h4 class="font-bold text-gray-700 mb-2">ğŸ’¡ Tips</h4>
                    <ul class="space-y-1">${info.tips.map(t => `<li class="text-sm bg-blue-50 text-blue-800 p-2 rounded-lg">â€¢ ${t}</li>`).join('')}</ul>
                  </div>
                ` : ''}
                
                ${info.warning ? `
                  <div class="bg-red-50 border border-red-200 p-4 rounded-xl">
                    <h4 class="font-bold text-red-800 mb-1">âš ï¸ Let op!</h4>
                    <p class="text-red-700">${info.warning}</p>
                  </div>
                ` : ''}
                
                ${info.website ? `
                  <a href="https://${info.website}" target="_blank" rel="noopener" 
                     class="block w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white text-center py-3 px-4 rounded-xl font-semibold hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg mb-2">
                    ğŸ« Boek nu op ${info.website}
                  </a>
                ` : ''}
                
                ${info.recommendations ? `
                  <div>
                    <h4 class="font-bold text-gray-700 mb-2">ğŸ½ï¸ Aanbevelingen</h4>
                    <div class="flex flex-wrap gap-2">${info.recommendations.map(r => `<span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">${r}</span>`).join('')}</div>
                  </div>
                ` : ''}
                
                ${info.mustSee ? `
                  <div class="bg-gradient-to-r from-amber-100 to-yellow-100 p-4 rounded-xl text-center">
                    <span class="text-2xl">â­</span>
                    <span class="font-bold text-amber-800 ml-2">MUST SEE / DO!</span>
                  </div>
                ` : ''}
                
                ${m.loc && getMapsUrl(m.loc) ? `
                  <a href="${getMapsUrl(m.loc)}" target="_blank" rel="noopener" 
                     class="block w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white text-center py-3 px-4 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg">
                    ğŸ“ Open in Google Maps
                  </a>
                ` : ''}
              </div>
            </div>
          </div>
        `;
      }

      // Footer
      html += `
        <div class="text-center mt-6 space-y-3">
          <div class="flex flex-wrap justify-center gap-2">
            <button onclick="shareTrip()" class="bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-5 py-3 rounded-xl font-bold shadow-lg hover:from-blue-600 hover:to-cyan-600 transition-all">
              ğŸ”— Deel Trip
            </button>
            <button onclick="exportToPDF()" class="bg-gradient-to-r from-red-500 to-pink-500 text-white px-5 py-3 rounded-xl font-bold shadow-lg hover:from-red-600 hover:to-pink-600 transition-all">
              ğŸ“„ Export PDF
            </button>
            <button onclick="toggleDarkMode()" class="bg-gradient-to-r from-gray-600 to-gray-800 text-white px-5 py-3 rounded-xl font-bold shadow-lg hover:from-gray-700 hover:to-gray-900 transition-all">
              ${darkMode ? 'â˜€ï¸ Light' : 'ğŸŒ™ Dark'}
            </button>
          </div>
          <p class="${darkMode ? 'text-gray-400' : 'text-gray-600'} text-sm">ğŸŒ´ Ultimate Adventure Trip 2026</p>
          <a href="/" class="text-blue-500 hover:underline text-sm">â† Terug naar overzicht</a>
        </div>
      `;

      document.getElementById('app').innerHTML = html;
    }
    
    // Export to PDF function
    function exportToPDF() {
      let content = 'ğŸŒ´ ULTIMATE ADVENTURE TRIP - TENERIFE & GRAN CANARIA 2026\n';
      content += 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n';
      content += 'ğŸ“… Datum: 16-24 mei 2026\n';
      content += 'ğŸ‘¥ Personen: 2\n';
      content += 'â±ï¸ Duur: 9 dagen\n\n';
      
      days.forEach(day => {
        content += 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n';
        content += 'ğŸ“† DAG ' + day.day + ' - ' + day.date + ' - ' + day.title.toUpperCase() + '\n';
        content += 'ğŸ“ ' + day.island + ' | â­ ' + day.highlight + '\n';
        content += 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n';
        
        const dayActs = activities[day.day] || [];
        dayActs.forEach(act => {
          content += '  ' + act.time + ' â”‚ ' + act.icon + ' ' + act.title + '\n';
          content += '         â”‚ ' + act.subtitle + '\n';
          if (act.info && act.info.price) {
            content += '         â”‚ ğŸ’° ' + act.info.price + '\n';
          }
          content += '\n';
        });
        content += '\n';
      });
      
      content += 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n';
      content += 'ğŸ’° BUDGET OVERZICHT\n';
      content += 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n';
      
      content += 'âœ… GEBOEKT:\n';
      budget.booked.forEach(item => {
        content += '  â€¢ ' + item.item + ': â‚¬' + item.price.toFixed(2) + '\n';
      });
      
      content += '\nğŸ“Š TOTAAL: â‚¬' + (budget.booked.reduce((s,i) => s + i.price, 0) + budget.estimated.reduce((s,i) => s + i.budget, 0)).toFixed(0) + ' (budget) - â‚¬' + (budget.booked.reduce((s,i) => s + i.price, 0) + budget.estimated.reduce((s,i) => s + i.comfort, 0)).toFixed(0) + ' (comfort)\n';
      content += '\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n';
      content += 'ğŸŒ´ Gegenereerd door YUDI Travelplanner\n';
      content += 'ğŸ”— https://adventure-trip-2026.vercel.app\n';
      
      // Create and download text file (more compatible than PDF)
      const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'Tenerife-GranCanaria-Trip-2026.txt';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      // Also trigger print dialog for PDF
      setTimeout(() => {
        if (confirm('ğŸ“„ Tekstbestand gedownload!\n\nWil je ook een PDF maken via print?')) {
          window.print();
        }
      }, 500);
    }

    // Share Trip Link
    function shareTrip() {
      const url = window.location.href;
      if (navigator.share) {
        navigator.share({
          title: 'ğŸŒ´ Tenerife & Gran Canaria Trip 2026',
          text: 'Check mijn reisplanning!',
          url: url
        });
      } else {
        navigator.clipboard.writeText(url).then(() => {
          showToast('âœ… Link gekopieerd naar klembord!');
        });
      }
    }

    // Toast notification
    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-full shadow-lg z-50 animate-bounce';
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }

    // Dark Mode Toggle
    let darkMode = localStorage.getItem('darkMode') === 'true';
    
    function toggleDarkMode() {
      darkMode = !darkMode;
      localStorage.setItem('darkMode', darkMode);
      applyDarkMode();
      render();
    }

    function applyDarkMode() {
      if (darkMode) {
        document.body.classList.add('dark-mode');
        document.body.style.background = 'linear-gradient(135deg, #1e293b, #0f172a)';
      } else {
        document.body.classList.remove('dark-mode');
        document.body.style.background = 'linear-gradient(135deg, #e0f2fe, #dbeafe, #ccfbf1)';
      }
    }

    // Init
    applyDarkMode();
    render();
  </script>
</body>
</html>
