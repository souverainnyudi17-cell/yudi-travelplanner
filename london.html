<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ„ London Christmas 2025 - YUDI Travelplanner</title>
  <meta name="theme-color" content="#dc2626">
  <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon" href="/icon-192.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    .card-transport { background: linear-gradient(135deg, #fef3c7, #fde68a); border-left: 4px solid #f59e0b; }
    .card-warning { background: linear-gradient(135deg, #fecaca, #fca5a5); border-left: 4px solid #ef4444; }
    .card-food { background: linear-gradient(135deg, #d1fae5, #a7f3d0); border-left: 4px solid #10b981; }
    .card-accommodation { background: linear-gradient(135deg, #fef3c7, #fde68a); border-left: 4px solid #eab308; }
    .card-highlight { background: linear-gradient(135deg, #dbeafe, #bfdbfe); border-left: 4px solid #3b82f6; }
    .card-activity { background: linear-gradient(135deg, #e9d5ff, #d8b4fe); border-left: 4px solid #8b5cf6; }
    .snow {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 1024'%3E%3Ccircle fill='%23fff' cx='512' cy='512' r='3'/%3E%3Ccircle fill='%23fff' cx='102' cy='102' r='2'/%3E%3Ccircle fill='%23fff' cx='204' cy='820' r='2'/%3E%3Ccircle fill='%23fff' cx='310' cy='400' r='2'/%3E%3Ccircle fill='%23fff' cx='650' cy='150' r='3'/%3E%3Ccircle fill='%23fff' cx='800' cy='600' r='2'/%3E%3C/svg%3E");
      background-size: 1024px 1024px;
      animation: snow 20s linear infinite;
      opacity: 0.4;
    }
    @keyframes snow { from { background-position: 0 0; } to { background-position: 0 1024px; } }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-900 via-red-900 to-green-900">
  <div class="snow"></div>
  <div id="app" class="p-4 max-w-4xl mx-auto relative z-10"></div>

  <script>
    // STATE
    let activeDay = 1;
    let activeTab = 'planning';
    let selectedModal = null;
    let checklist = JSON.parse(localStorage.getItem('londonChecklist') || '{}');
    let expenses = JSON.parse(localStorage.getItem('londonExpenses') || '[]');

    // TRIP INFO
    const trip = {
      title: 'ğŸ„ London Christmas',
      subtitle: 'Winter Wonderland',
      dates: '27-30 november 2025',
      persons: 2,
      duration: '4 dagen'
    };

    // DAYS
    const days = [
      { day: 1, date: 'Do 27 nov', title: 'Aankomst & South Bank', icon: 'âœˆï¸', highlight: 'London Eye + Kerst sfeer' },
      { day: 2, date: 'Vr 28 nov', title: 'Winter Wonderland', icon: 'ğŸ¡', highlight: 'Hyde Park magisch!', featured: true },
      { day: 3, date: 'Za 29 nov', title: 'Kerst Shopping', icon: 'ğŸ', highlight: 'Oxford Street lichtjes', featured: true },
      { day: 4, date: 'Zo 30 nov', title: 'Vertrek', icon: 'ğŸ ', highlight: 'Laatste kerstsfeer' }
    ];

    // ACCOMMODATIONS
    const accommodation = {
      name: 'Hotel Central London',
      location: 'Covent Garden / South Bank',
      nights: 3,
      price: 450,
      booked: false
    };

    // LOCATIONS
    const locations = {
      stansted: { lat: 51.885, lng: 0.235 },
      covent_garden: { lat: 51.512, lng: -0.123 },
      winter_wonderland: { lat: 51.507, lng: -0.165 },
      southbank: { lat: 51.506, lng: -0.116 },
      london_eye: { lat: 51.503, lng: -0.119 },
      borough_market: { lat: 51.505, lng: -0.091 },
      harrods: { lat: 51.499, lng: -0.163 },
      oxford_street: { lat: 51.515, lng: -0.142 },
      carnaby: { lat: 51.513, lng: -0.139 },
      somerset_house: { lat: 51.511, lng: -0.117 },
      trafalgar: { lat: 51.508, lng: -0.128 },
      leicester: { lat: 51.511, lng: -0.128 }
    };

    // ACTIVITIES
    const activities = {
      1: [
        { time: '07:00', icon: 'âœˆï¸', title: 'Vlucht Amsterdam â†’ London', subtitle: 'Stansted ~1 uur', type: 'transport', loc: 'stansted', info: { price: 'â‚¬50-100 p.p. retour', tips: ['Check-in 2 uur vooraf', 'Handbagage = goedkoper'] } },
        { time: '10:00', icon: 'ğŸšƒ', title: 'Stansted Express', subtitle: 'Naar Liverpool Street', type: 'transport', loc: 'stansted', info: { price: 'Â£19-23 p.p.', duration: '47 min', tips: ['Boek online = goedkoper'] } },
        { time: '11:30', icon: 'ğŸ¨', title: 'Check-in hotel', subtitle: 'Bagage droppen', type: 'accommodation', loc: 'covent_garden', info: { tips: ['Vroeg inchecken vaak mogelijk'] } },
        { time: '12:30', icon: 'ğŸ½ï¸', title: 'Lunch Borough Market', subtitle: 'Beste foodmarkt!', type: 'food', loc: 'borough_market', info: { price: 'â‚¬10-20 p.p.', highlights: ['Raclette', 'Scotch eggs', 'Mulled wine'], mustSee: true } },
        { time: '14:30', icon: 'â­', title: 'South Bank Kerstwandeling', subtitle: 'Langs de Theems!', type: 'highlight', loc: 'southbank', info: { desc: 'Sfeervolle wandeling met kerstmarkt kraampjes', duration: '2-3 uur', mustSee: true } },
        { time: '17:00', icon: 'ğŸ¡', title: 'London Eye', subtitle: 'Zonsondergang views!', type: 'highlight', loc: 'london_eye', info: { price: 'Â£30-36 p.p.', duration: '30 min', tips: ['Boek online = skip the line'], mustSee: true } },
        { time: '18:30', icon: 'ğŸ„', title: 'Southbank Christmas Market', subtitle: 'GlÃ¼hwein & kraampjes', type: 'activity', loc: 'southbank', info: { highlights: ['Mulled wine', 'German sausages', 'Churros'] } },
        { time: '20:00', icon: 'ğŸ½ï¸', title: 'Diner', subtitle: 'Kerst pub dinner', type: 'food', loc: 'southbank', info: { price: 'â‚¬20-35 p.p.', recommendations: ['The Anchor Bankside', 'Founders Arms'] } }
      ],
      2: [
        { time: '09:30', icon: 'ğŸ³', title: 'Ontbijt', subtitle: 'Full English!', type: 'food', loc: 'covent_garden', info: { price: 'â‚¬12-18 p.p.', highlights: ['Full English Breakfast', 'Eggs Benedict'] } },
        { time: '11:00', icon: 'â­', title: 'WINTER WONDERLAND', subtitle: 'Magisch kerstpark!', type: 'highlight', loc: 'winter_wonderland', info: { desc: "Europa's grootste gratis kerstevenement!", price: 'Gratis entree, attracties â‚¬3-10', duration: '4-6 uur', highlights: ['Attracties & reuzenrad', 'Grootste ijsbaan UK', 'Bavarian Village', 'Kerstkraampjes'], tips: ['GRATIS ENTREE', 'Boek ijsbaan vooraf!'], warning: 'Boek ijsbaan + attracties VOORAF online!', mustSee: true } },
        { time: '12:30', icon: 'ğŸº', title: 'Lunch Bavarian Village', subtitle: 'Bratwurst & GlÃ¼hwein!', type: 'food', loc: 'winter_wonderland', info: { price: 'â‚¬15-25 p.p.', highlights: ['Bratwurst', 'Schweinshaxe', 'GlÃ¼hwein'] } },
        { time: '14:00', icon: 'â›¸ï¸', title: 'Ice Skating', subtitle: 'Grootste ijsbaan UK!', type: 'highlight', loc: 'winter_wonderland', info: { price: 'Â£15-20 p.p.', duration: '1 uur sessie', tips: ['VOORAF BOEKEN VERPLICHT', 'Handschoenen meenemen'], mustSee: true } },
        { time: '15:30', icon: 'ğŸ¢', title: 'Attracties', subtitle: 'Reuzenrad & meer!', type: 'activity', loc: 'winter_wonderland', info: { price: 'â‚¬5-12 per attractie', highlights: ['Giant Wheel', 'Ice Mountain', 'Magical Ice Kingdom'] } },
        { time: '19:00', icon: 'ğŸŒƒ', title: 'Wonderland by night', subtitle: 'Lichtjes & sfeer', type: 'activity', loc: 'winter_wonderland', info: { tips: ['Mooist na donker!', 'Fotos bij reuzenrad'] } },
        { time: '20:30', icon: 'ğŸ½ï¸', title: 'Diner West End', subtitle: 'Pre-theatre menu', type: 'food', loc: 'covent_garden', info: { price: 'â‚¬25-40 p.p.', recommendations: ['Dishoom', 'Flat Iron', 'Hoppers'] } }
      ],
      3: [
        { time: '10:00', icon: 'ğŸ¬', title: 'Harrods Christmas', subtitle: 'Iconische kerstdecoratie!', type: 'highlight', loc: 'harrods', info: { desc: 'Beroemdste warenhuis in kerstglorie!', duration: '1.5-2 uur', highlights: ['Christmas Windows', 'Food Halls', 'Christmas World 5e etage'], mustSee: true } },
        { time: '12:30', icon: 'ğŸ½ï¸', title: 'Lunch South Kensington', subtitle: 'Gezellige pubs', type: 'food', loc: 'harrods', info: { price: 'â‚¬15-25 p.p.' } },
        { time: '14:30', icon: 'â­', title: 'Oxford Street Lights', subtitle: '1 km kerstverlichting!', type: 'highlight', loc: 'oxford_street', info: { desc: 'Beroemdste kerstverlichting - 1 miljoen lampjes!', duration: '1-2 uur', tips: ['Mooist na 16:00', 'Selfridges windows zijn iconisch'], mustSee: true } },
        { time: '16:00', icon: 'ğŸ€', title: 'Carnaby Street', subtitle: 'Unieke decoraties!', type: 'highlight', loc: 'carnaby', info: { desc: 'Elk jaar ander thema - Instagram-worthy!', mustSee: true } },
        { time: '17:00', icon: 'ğŸ„', title: 'Covent Garden Christmas', subtitle: 'Gigantische kerstboom!', type: 'highlight', loc: 'covent_garden', info: { highlights: ['Enorme kerstboom', 'Mistletoe installatie', 'Straatartiesten'], mustSee: true } },
        { time: '18:30', icon: 'â›¸ï¸', title: 'Somerset House', subtitle: 'Meest romantische ijsbaan!', type: 'activity', loc: 'somerset_house', info: { price: 'Â£12-22 p.p.', duration: '1 uur', tips: ['BOEK VOORAF!', 'Skate Lates: DJ nights'], mustSee: true } },
        { time: '20:30', icon: 'ğŸ­', title: 'West End Show', subtitle: 'Musical magic!', type: 'highlight', loc: 'leicester', info: { price: 'Â£30-150 p.p.', duration: '2.5-3 uur', recommendations: ['The Lion King', 'Wicked', 'Hamilton', 'Les MisÃ©rables'], tips: ['Boek VOORAF', 'TKTS booth voor deals'], mustSee: true } }
      ],
      4: [
        { time: '09:00', icon: 'ğŸ³', title: 'Laatste ontbijt', subtitle: 'Uitchecken', type: 'food', loc: 'covent_garden', info: { tips: ['Bagage bij hotel als vlucht later is'] } },
        { time: '10:30', icon: 'ğŸ„', title: 'Trafalgar Square', subtitle: 'Noorse kerstboom', type: 'activity', loc: 'trafalgar', info: { desc: 'Elk jaar geschonken door Noorwegen sinds 1947', duration: '30 min' } },
        { time: '11:30', icon: 'ğŸ', title: 'Leicester Square Market', subtitle: 'Laatste souvenirs', type: 'activity', loc: 'leicester', info: { tips: ["M&M's World vlakbij", 'Chinatown op loopafstand'] } },
        { time: '13:00', icon: 'ğŸšƒ', title: 'Naar vliegveld', subtitle: 'Stansted Express', type: 'transport', loc: 'stansted', info: { price: 'Â£19-23 p.p.', tips: ['2.5 uur voor vlucht'] } },
        { time: '17:00', icon: 'âœˆï¸', title: 'Vlucht â†’ Amsterdam', subtitle: 'Tot ziens London!', type: 'transport', loc: 'stansted', info: { tips: ['Tax free shopping', 'Cadbury chocolade!'] } }
      ]
    };

    // BUDGET
    const budget = {
      booked: [],
      estimated: [
        { item: 'âœˆï¸ Vluchten (2p retour)', budget: 150, comfort: 250 },
        { item: 'ğŸ¨ Hotel 3 nachten', budget: 400, comfort: 600 },
        { item: 'ğŸšƒ Stansted Express (2p retour)', budget: 76, comfort: 76 },
        { item: 'ğŸš‡ Oyster card transport', budget: 50, comfort: 50 },
        { item: 'ğŸ¡ London Eye (2p)', budget: 60, comfort: 72 },
        { item: 'â›¸ï¸ Ice skating 2x (2p)', budget: 60, comfort: 80 },
        { item: 'ğŸ¢ Winter Wonderland attracties', budget: 40, comfort: 60 },
        { item: 'ğŸ­ West End Show (2p)', budget: 80, comfort: 200 },
        { item: 'ğŸ½ï¸ Eten & drinken (4 dagen)', budget: 200, comfort: 350 },
        { item: 'ğŸ Shopping & souvenirs', budget: 50, comfort: 150 },
        { item: 'ğŸ’° Buffer', budget: 34, comfort: 62 }
      ]
    };

    // CHECKLIST
    const checklistSections = [
      { title: 'ğŸ”´ NU BOEKEN (Nov = druk!)', items: [
        { key: 'flights', label: 'Vluchten Amsterdam â†” London' },
        { key: 'hotel', label: 'Hotel (centrum!)' },
        { key: 'winterWonderland', label: 'Winter Wonderland ijsbaan' },
        { key: 'somersetHouse', label: 'Somerset House ijsbaan' },
        { key: 'westEnd', label: 'West End Show tickets' }
      ]},
      { title: 'ğŸŸ  WEEK VAN TEVOREN', items: [
        { key: 'stanstedExpress', label: 'Stansted Express tickets' },
        { key: 'londonEye', label: 'London Eye tickets' },
        { key: 'oysterCard', label: 'Oyster card online' }
      ]},
      { title: 'ğŸ§³ INPAKKEN', items: [
        { key: 'passport', label: 'Paspoort' },
        { key: 'warmClothes', label: 'Warme jas & sjaal' },
        { key: 'gloves', label: 'Handschoenen (schaatsen!)' },
        { key: 'comfyShoes', label: 'Comfortabele schoenen' },
        { key: 'umbrella', label: 'Paraplu (Londen = regen!)' },
        { key: 'adapter', label: 'UK stekker adapter' }
      ]}
    ];

    // Initialize checklist
    checklistSections.forEach(sec => sec.items.forEach(item => {
      if (checklist[item.key] === undefined) checklist[item.key] = false;
    }));

    // HELPER FUNCTIONS
    function getCardClass(type) {
      const classes = {
        transport: 'card-transport', warning: 'card-warning', food: 'card-food',
        accommodation: 'card-accommodation', highlight: 'card-highlight', activity: 'card-activity'
      };
      return classes[type] || 'bg-white';
    }

    function getMapsUrl(locKey) {
      if (!locations[locKey]) return null;
      const loc = locations[locKey];
      return `https://www.google.com/maps/search/?api=1&query=${loc.lat},${loc.lng}`;
    }

    function toggleCheck(key) {
      checklist[key] = !checklist[key];
      localStorage.setItem('londonChecklist', JSON.stringify(checklist));
      render();
    }

    function addExpense() {
      const desc = document.getElementById('expenseDesc').value;
      const amount = parseFloat(document.getElementById('expenseAmount').value);
      const category = document.getElementById('expenseCategory').value;
      if (desc && amount > 0) {
        expenses.push({ id: Date.now(), desc, amount, category, date: new Date().toLocaleDateString('nl-NL') });
        localStorage.setItem('londonExpenses', JSON.stringify(expenses));
        document.getElementById('expenseDesc').value = '';
        document.getElementById('expenseAmount').value = '';
        render();
      }
    }

    function deleteExpense(id) {
      expenses = expenses.filter(e => e.id !== id);
      localStorage.setItem('londonExpenses', JSON.stringify(expenses));
      render();
    }

    function setDay(d) { activeDay = d; render(); }
    function setTab(t) { activeTab = t; render(); }
    function openModal(act) { selectedModal = act; render(); }
    function closeModal() { selectedModal = null; render(); }

    // MAIN RENDER
    function render() {
      const day = days[activeDay - 1];
      const acts = activities[activeDay] || [];

      const estBudget = budget.estimated.reduce((s, i) => s + i.budget, 0);
      const estComfort = budget.estimated.reduce((s, i) => s + i.comfort, 0);
      const totalExpenses = expenses.reduce((s, e) => s + e.amount, 0);

      const checkedCount = Object.values(checklist).filter(Boolean).length;
      const totalChecks = checklistSections.reduce((s, sec) => s + sec.items.length, 0);

      // Countdown
      const tripDate = new Date('2025-11-27T00:00:00');
      const now = new Date();
      const diff = tripDate - now;
      const daysLeft = Math.ceil(diff / (1000 * 60 * 60 * 24));
      const weeksLeft = Math.floor(daysLeft / 7);
      const remainingDays = daysLeft % 7;

      let html = `
        <!-- HEADER -->
        <div class="bg-white/95 backdrop-blur rounded-3xl p-5 shadow-lg mb-4">
          <div class="flex items-center justify-between">
            <div>
              <h1 class="text-2xl font-bold text-gray-800">${trip.title}</h1>
              <p class="text-red-600 font-medium">${trip.subtitle}</p>
              <p class="text-gray-500 text-sm mt-1">${trip.dates} â€¢ ${trip.persons} personen â€¢ ${trip.duration}</p>
            </div>
            <a href="/" class="text-gray-400 hover:text-gray-600">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
            </a>
          </div>
          <div class="flex flex-wrap gap-2 mt-3">
            ${daysLeft > 0 ? `
              <div class="inline-flex items-center gap-2 bg-gradient-to-r from-red-500 to-green-600 text-white px-4 py-1.5 rounded-full text-sm font-bold shadow-lg">
                ğŸ„ Nog ${weeksLeft > 0 ? weeksLeft + ' weken' + (remainingDays > 0 ? ' en ' + remainingDays + ' dagen' : '') : daysLeft + ' dagen'}!
              </div>
            ` : ''}
          </div>
        </div>

        <!-- TABS -->
        <div class="flex gap-2 mb-4 overflow-x-auto hide-scrollbar">
          <button onclick="setTab('planning')" class="px-4 py-2 rounded-xl font-medium whitespace-nowrap ${activeTab === 'planning' ? 'bg-red-600 text-white' : 'bg-white/90 text-gray-700'} shadow">ğŸ“… Dagplanning</button>
          <button onclick="setTab('budget')" class="px-4 py-2 rounded-xl font-medium whitespace-nowrap ${activeTab === 'budget' ? 'bg-red-600 text-white' : 'bg-white/90 text-gray-700'} shadow">ğŸ’° Budget</button>
          <button onclick="setTab('checklist')" class="px-4 py-2 rounded-xl font-medium whitespace-nowrap ${activeTab === 'checklist' ? 'bg-red-600 text-white' : 'bg-white/90 text-gray-700'} shadow">âœ… Checklist (${checkedCount}/${totalChecks})</button>
        </div>
      `;

      // PLANNING TAB
      if (activeTab === 'planning') {
        html += `
          <!-- Day Selector -->
          <div class="flex gap-2 mb-4 overflow-x-auto hide-scrollbar pb-2">
            ${days.map(d => `
              <button onclick="setDay(${d.day})" class="flex-shrink-0 px-4 py-2 rounded-xl font-medium ${activeDay === d.day ? 'bg-gradient-to-r from-red-600 to-green-600 text-white shadow-lg' : 'bg-white/90 text-gray-700'} transition-all">
                <span class="mr-2">${d.icon}</span>Dag ${d.day}
              </button>
            `).join('')}
          </div>

          <!-- Day Header -->
          <div class="bg-white/95 backdrop-blur rounded-2xl p-5 shadow-lg mb-4">
            <div class="flex items-start gap-4">
              <span class="text-5xl">${day.icon}</span>
              <div class="flex-1">
                <h2 class="text-2xl font-bold text-gray-800">Dag ${day.day}: ${day.title}</h2>
                <p class="text-gray-500">${day.date}</p>
                <p class="text-red-600 font-semibold mt-1">${day.highlight}</p>
              </div>
              <!-- Weather -->
              <div class="text-center bg-gradient-to-br from-sky-100 to-blue-100 rounded-xl px-3 py-2">
                <div class="text-2xl">â„ï¸</div>
                <div class="text-lg font-bold text-gray-800">7Â°C</div>
                <div class="text-xs text-gray-500">nov avg</div>
              </div>
            </div>
            <div class="mt-4 grid grid-cols-4 gap-2 text-center text-sm">
              <div class="bg-orange-50 rounded-lg p-2"><div class="text-orange-500">ğŸŒ¡ï¸</div><div class="font-bold">10Â°C</div></div>
              <div class="bg-blue-50 rounded-lg p-2"><div class="text-blue-500">ğŸŒ¡ï¸</div><div class="font-bold">4Â°C</div></div>
              <div class="bg-gray-50 rounded-lg p-2"><div class="text-gray-500">ğŸŒ§ï¸</div><div class="font-bold">60%</div></div>
              <div class="bg-yellow-50 rounded-lg p-2"><div class="text-yellow-600">â˜€ï¸</div><div class="font-bold">8u</div></div>
            </div>
          </div>

          <!-- Activities -->
          <div class="bg-white/95 backdrop-blur rounded-2xl p-5 shadow-lg">
            <div class="space-y-3">
              ${acts.map(act => `
                <div onclick='openModal(${JSON.stringify(act).replace(/'/g, "\\'")})' class="flex items-center gap-3 p-3 rounded-xl cursor-pointer hover:shadow-lg transition-all ${getCardClass(act.type)}">
                  <div class="font-mono text-sm font-bold w-14 text-center">${act.time}</div>
                  <div class="text-2xl">${act.icon}</div>
                  <div class="flex-1 min-w-0">
                    <div class="font-semibold truncate">${act.title}</div>
                    <div class="text-sm opacity-80 truncate">${act.subtitle}</div>
                  </div>
                  <div class="text-gray-400">â†’</div>
                </div>
              `).join('')}
            </div>
          </div>

          ${activeDay === 2 ? `
            <div class="mt-4 bg-gradient-to-r from-red-100 to-green-100 border border-red-300 rounded-2xl p-5">
              <h4 class="font-bold text-red-800 mb-3">ğŸ¡ WINTER WONDERLAND TIPS</h4>
              <div class="grid grid-cols-2 gap-2 text-sm">
                <div class="bg-white/70 rounded-lg p-2">â›¸ï¸ Boek ijsbaan VOORAF</div>
                <div class="bg-white/70 rounded-lg p-2">ğŸ¢ Attracties = tokens</div>
                <div class="bg-white/70 rounded-lg p-2">ğŸº Bavarian Village = gezellig</div>
                <div class="bg-white/70 rounded-lg p-2">ğŸ“¸ Reuzenrad = beste fotos</div>
              </div>
            </div>
          ` : ''}
        `;
      }

      // BUDGET TAB
      if (activeTab === 'budget') {
        html += `
          <div class="space-y-4">
            <!-- Expenses Tracker -->
            <div class="bg-gradient-to-r from-red-500 to-green-600 rounded-2xl p-5 text-white shadow-lg">
              <h3 class="font-bold text-lg mb-3">ğŸ’¸ Uitgaven Tracker</h3>
              <div class="grid grid-cols-3 gap-2 mb-4">
                <input type="text" id="expenseDesc" placeholder="Omschrijving" class="col-span-2 px-3 py-2 rounded-lg text-gray-800 text-sm" />
                <input type="number" id="expenseAmount" placeholder="Â£" step="0.01" class="px-3 py-2 rounded-lg text-gray-800 text-sm" />
              </div>
              <div class="flex gap-2">
                <select id="expenseCategory" class="flex-1 px-3 py-2 rounded-lg text-gray-800 text-sm">
                  <option value="ğŸ½ï¸ Eten">ğŸ½ï¸ Eten</option>
                  <option value="ğŸšƒ Vervoer">ğŸšƒ Vervoer</option>
                  <option value="ğŸ« Activiteit">ğŸ« Activiteit</option>
                  <option value="ğŸ›’ Shopping">ğŸ›’ Shopping</option>
                </select>
                <button onclick="addExpense()" class="bg-white text-red-600 px-4 py-2 rounded-lg font-bold">+ Toevoegen</button>
              </div>
              ${expenses.length > 0 ? `
                <div class="mt-4 pt-4 border-t border-white/30">
                  <div class="flex justify-between"><span>Totaal:</span><span class="text-2xl font-bold">Â£${totalExpenses.toFixed(2)}</span></div>
                </div>
              ` : ''}
            </div>

            ${expenses.length > 0 ? `
              <div class="bg-white/95 rounded-2xl p-5 shadow-lg">
                <h3 class="font-bold mb-3">ğŸ“ Mijn Uitgaven</h3>
                <div class="space-y-2 max-h-48 overflow-y-auto">
                  ${expenses.slice().reverse().map(e => `
                    <div class="flex justify-between items-center py-2 px-3 bg-gray-50 rounded-lg">
                      <div><span class="text-sm">${e.category}</span> <span class="font-medium">${e.desc}</span></div>
                      <div class="flex items-center gap-2">
                        <span class="font-bold text-red-600">Â£${e.amount.toFixed(2)}</span>
                        <button onclick="deleteExpense(${e.id})" class="text-red-400 hover:text-red-600">Ã—</button>
                      </div>
                    </div>
                  `).join('')}
                </div>
              </div>
            ` : ''}

            <div class="bg-white/95 rounded-2xl p-5 shadow-lg">
              <h3 class="font-bold mb-4">ğŸ’° Geschatte Kosten</h3>
              <div class="space-y-2">
                ${budget.estimated.map(i => `
                  <div class="flex justify-between py-2 border-b border-gray-100">
                    <span>${i.item}</span>
                    <span class="font-mono">â‚¬${i.budget} | â‚¬${i.comfort}</span>
                  </div>
                `).join('')}
              </div>
              <div class="mt-4 pt-4 border-t-2 flex justify-between font-bold text-lg">
                <span>TOTAAL</span>
                <span>â‚¬${estBudget} | â‚¬${estComfort}</span>
              </div>
            </div>

            <div class="grid grid-cols-2 gap-4">
              <div class="bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-5 text-white text-center">
                <div class="text-sm opacity-80">ğŸ’š Budget</div>
                <div class="text-3xl font-bold">â‚¬${estBudget}</div>
                <div class="text-sm opacity-80">â‚¬${Math.round(estBudget/2)} p.p.</div>
              </div>
              <div class="bg-gradient-to-br from-amber-500 to-orange-500 rounded-2xl p-5 text-white text-center">
                <div class="text-sm opacity-80">âœ¨ Comfort</div>
                <div class="text-3xl font-bold">â‚¬${estComfort}</div>
                <div class="text-sm opacity-80">â‚¬${Math.round(estComfort/2)} p.p.</div>
              </div>
            </div>
          </div>
        `;
      }

      // CHECKLIST TAB
      if (activeTab === 'checklist') {
        html += `
          <div class="space-y-4">
            ${checklistSections.map(sec => `
              <div class="bg-white/95 rounded-2xl p-5 shadow-lg">
                <h3 class="font-bold mb-3">${sec.title}</h3>
                <div class="space-y-2">
                  ${sec.items.map(item => `
                    <label class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer">
                      <input type="checkbox" ${checklist[item.key] ? 'checked' : ''} onchange="toggleCheck('${item.key}')" class="w-5 h-5 rounded">
                      <span class="${checklist[item.key] ? 'line-through text-gray-400' : ''}">${item.label}</span>
                    </label>
                  `).join('')}
                </div>
              </div>
            `).join('')}

            <div class="bg-gradient-to-r from-red-600 to-green-600 rounded-2xl p-5 text-white">
              <h3 class="font-bold mb-3">ğŸ“Š Voortgang</h3>
              <div class="bg-white/20 rounded-full h-4 mb-2">
                <div class="bg-white rounded-full h-4" style="width: ${Math.max((checkedCount/totalChecks)*100, 5)}%"></div>
              </div>
              <div class="text-center">${checkedCount} van ${totalChecks} items</div>
            </div>
          </div>
        `;
      }

      // MODAL
      if (selectedModal) {
        const m = selectedModal;
        const info = m.info || {};
        html += `
          <div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50" onclick="closeModal()">
            <div class="bg-white rounded-3xl max-w-lg w-full max-h-[85vh] overflow-y-auto shadow-2xl" onclick="event.stopPropagation()">
              <div class="p-5 ${getCardClass(m.type)} rounded-t-3xl">
                <div class="flex justify-between items-start">
                  <div class="flex items-center gap-3">
                    <span class="text-4xl">${m.icon}</span>
                    <div>
                      <h3 class="text-xl font-bold text-gray-800">${m.title}</h3>
                      <p class="text-gray-600">${m.time} â€¢ ${m.subtitle}</p>
                    </div>
                  </div>
                  <button onclick="closeModal()" class="text-3xl text-gray-400 hover:text-gray-600">Ã—</button>
                </div>
              </div>
              <div class="p-5 space-y-4">
                ${info.desc ? `<div><h4 class="font-bold text-gray-700 mb-1">ğŸ“– Beschrijving</h4><p class="text-gray-600">${info.desc}</p></div>` : ''}
                ${info.highlights ? `<div><h4 class="font-bold text-gray-700 mb-2">âœ¨ Highlights</h4><div class="flex flex-wrap gap-2">${info.highlights.map(h => `<span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm">${h}</span>`).join('')}</div></div>` : ''}
                ${info.price ? `<div class="bg-green-50 p-4 rounded-xl"><h4 class="font-bold text-green-800 mb-1">ğŸ’° Kosten</h4><p class="text-green-700 font-semibold text-lg">${info.price}</p></div>` : ''}
                ${info.duration ? `<div class="flex items-center gap-2 bg-gray-50 p-3 rounded-xl"><span>â±ï¸</span><strong>Duur:</strong> ${info.duration}</div>` : ''}
                ${info.tips ? `<div><h4 class="font-bold text-gray-700 mb-2">ğŸ’¡ Tips</h4><ul class="space-y-1">${info.tips.map(t => `<li class="text-sm bg-blue-50 text-blue-800 p-2 rounded-lg">â€¢ ${t}</li>`).join('')}</ul></div>` : ''}
                ${info.warning ? `<div class="bg-red-50 border border-red-200 p-4 rounded-xl"><h4 class="font-bold text-red-800 mb-1">âš ï¸ Let op!</h4><p class="text-red-700">${info.warning}</p></div>` : ''}
                ${info.recommendations ? `<div><h4 class="font-bold text-gray-700 mb-2">ğŸ­ Aanbevelingen</h4><div class="flex flex-wrap gap-2">${info.recommendations.map(r => `<span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm">${r}</span>`).join('')}</div></div>` : ''}
                ${info.mustSee ? `<div class="bg-gradient-to-r from-red-100 to-green-100 p-4 rounded-xl text-center"><span class="text-2xl">â­</span><span class="font-bold text-gray-800 ml-2">MUST SEE / DO!</span></div>` : ''}
                ${m.loc && getMapsUrl(m.loc) ? `<a href="${getMapsUrl(m.loc)}" target="_blank" class="block w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white text-center py-3 px-4 rounded-xl font-semibold">ğŸ“ Open in Google Maps</a>` : ''}
              </div>
            </div>
          </div>
        `;
      }

      html += `
        <div class="text-center mt-6 text-white/80 text-sm">
          <p>ğŸ„ London Christmas 2025 ğŸ„</p>
          <a href="/" class="text-white hover:underline">â† Terug naar overzicht</a>
        </div>
      `;

      document.getElementById('app').innerHTML = html;
    }

    render();
  </script>
</body>
</html>
