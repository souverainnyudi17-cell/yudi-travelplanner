<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üèîÔ∏è Montenegro Adventure 2026</title>
  <meta name="theme-color" content="#d97706">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon" href="/icon-192.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    body.dark { background: linear-gradient(135deg, #1e293b, #0f172a) !important; }
    body.dark .bg-white { background: #1e293b !important; }
    body.dark .text-gray-800, body.dark .text-gray-700 { color: #f1f5f9 !important; }
    body.dark .text-gray-600, body.dark .text-gray-500 { color: #94a3b8 !important; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-100 via-stone-50 to-amber-50">
  <div id="app" class="max-w-2xl mx-auto p-4 pb-8"></div>

  <script>
    // ============================================
    // MONTENEGRO ADVENTURE 2026 - COMPLETE VERSION
    // ============================================

    let activeDay = 1;
    let activeTab = 'planning';
    let selectedModal = null;
    let checklist = JSON.parse(localStorage.getItem('montenegroChecklist') || '{}');
    let expenses = JSON.parse(localStorage.getItem('montenegroExpenses') || '[]');
    let dayNotes = JSON.parse(localStorage.getItem('montenegroDayNotes') || '{}');
    let darkMode = localStorage.getItem('montenegroDarkMode') === 'true';

    const trip = {
      title: 'üèîÔ∏è Montenegro Adventure',
      subtitle: 'Bergen, Canyon & Kust',
      dates: '16-24 mei 2026',
      duration: '9 dagen',
      persons: 2
    };

    const accommodations = {
      kotor: { name: 'Appartement Kotor Old Town', area: 'Kotor Old Town / Dobrota', dates: '16-19 mei', nights: 3, price: 195, lat: 42.4247, lng: 18.7712 },
      durmitor: { name: 'Mountain Lodge ≈Ωabljak', area: '≈Ωabljak, Durmitor', dates: '19-21 mei', nights: 2, price: 100, lat: 43.1556, lng: 19.1228 },
      budva: { name: 'Beach Apartment Budva', area: 'Budva Riviera', dates: '21-24 mei', nights: 3, price: 210, lat: 42.2864, lng: 18.8400 }
    };

    const locations = {
      tivat: { lat: 42.4047, lng: 18.7233 },
      kotor: { lat: 42.4247, lng: 18.7712 },
      kotor_fortress: { lat: 42.4280, lng: 18.7720 },
      perast: { lat: 42.4867, lng: 18.6983 },
      our_lady: { lat: 42.4870, lng: 18.6910 },
      lovcen: { lat: 42.3994, lng: 18.8389 },
      cetinje: { lat: 42.3903, lng: 18.9233 },
      njegos: { lat: 42.3994, lng: 18.8389 },
      ostrog: { lat: 42.6747, lng: 19.0297 },
      zabljak: { lat: 43.1556, lng: 19.1228 },
      black_lake: { lat: 43.1453, lng: 19.0967 },
      tara_bridge: { lat: 43.1500, lng: 19.2833 },
      tara_canyon: { lat: 43.1167, lng: 19.3500 },
      budva: { lat: 42.2864, lng: 18.8400 },
      sveti_stefan: { lat: 42.2569, lng: 18.8903 },
      mogren: { lat: 42.2903, lng: 18.8333 },
      jaz: { lat: 42.2917, lng: 18.8083 },
      blue_cave: { lat: 42.3833, lng: 18.7167 },
      skadar: { lat: 42.2167, lng: 19.1000 },
      virpazar: { lat: 42.2417, lng: 19.0917 }
    };

    function calcDist(loc1, loc2) {
      if (!locations[loc1] || !locations[loc2]) return null;
      const R = 6371;
      const l1 = locations[loc1], l2 = locations[loc2];
      const dLat = (l2.lat - l1.lat) * Math.PI / 180;
      const dLon = (l2.lng - l1.lng) * Math.PI / 180;
      const a = Math.sin(dLat/2)**2 + Math.cos(l1.lat * Math.PI/180) * Math.cos(l2.lat * Math.PI/180) * Math.sin(dLon/2)**2;
      return Math.round(R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)));
    }

    function estTime(km) {
      if (!km) return '';
      const m = Math.round((km / 40) * 60);
      return m < 60 ? `~${m} min` : `~${Math.floor(m/60)}u${m%60 > 0 ? ` ${m%60}min` : ''}`;
    }

    function getMapsUrl(loc) {
      if (!locations[loc]) return null;
      return `https://www.google.com/maps/search/?api=1&query=${locations[loc].lat},${locations[loc].lng}`;
    }

    const days = [
      { day: 1, date: 'Za 16 mei', title: 'Aankomst Kotor', icon: '‚úàÔ∏è', region: 'Kotor', highlight: 'Old Town verkennen', accom: 'kotor' },
      { day: 2, date: 'Zo 17 mei', title: 'Bay of Kotor', icon: '‚õµ', region: 'Kotor', highlight: 'Boottrip + Perast', accom: 'kotor' },
      { day: 3, date: 'Ma 18 mei', title: 'Lovƒáen & Cetinje', icon: 'üèîÔ∏è', region: 'Bergen', highlight: 'Bergpanorama', accom: 'kotor' },
      { day: 4, date: 'Di 19 mei', title: 'Naar Durmitor', icon: 'üöó', region: 'Bergen', highlight: 'Ostrog + Black Lake', accom: 'durmitor', featured: true },
      { day: 5, date: 'Wo 20 mei', title: 'Tara Rafting!', icon: 'üö£', region: 'Durmitor', highlight: 'Diepste canyon Europa!', accom: 'durmitor', featured: true },
      { day: 6, date: 'Do 21 mei', title: 'Naar Budva', icon: 'üèñÔ∏è', region: 'Kust', highlight: 'Sveti Stefan', accom: 'budva' },
      { day: 7, date: 'Vr 22 mei', title: 'Watersport Dag!', icon: 'üöÄ', region: 'Budva', highlight: 'Jetski + Parasailing', accom: 'budva', featured: true },
      { day: 8, date: 'Za 23 mei', title: 'Skadar Lake', icon: 'ü¶Ö', region: 'Budva', highlight: 'Vogelparadijs + Wijn', accom: 'budva' },
      { day: 9, date: 'Zo 24 mei', title: 'Vertrek', icon: 'üè†', region: 'Terug', highlight: 'Afscheid Montenegro', accom: 'budva' }
    ];

    const activities = {
      1: [
        { time: '11:00', title: 'Vertrek Amsterdam', subtitle: 'Vlucht via overstap', icon: '‚úàÔ∏è', type: 'transport', loc: 'tivat', info: { desc: 'Vlucht Amsterdam ‚Üí Tivat', tips: ['2 uur voor vertrek', 'Online inchecken'], duration: '~3.5u totaal' }},
        { time: '14:30', title: 'Landing Tivat', subtitle: 'Kleine luchthaven', icon: 'üõ¨', type: 'transport', loc: 'tivat', info: { tips: ['Paspoort klaar', 'Kleine airport = snel door'] }},
        { time: '15:00', title: 'Auto ophalen', subtitle: 'Huurauto klaar', icon: 'üöó', type: 'transport', loc: 'tivat', info: { tips: ['Creditcard verplicht', 'Check op schade + fotos'], price: '~‚Ç¨25-35/dag' }},
        { time: '15:45', title: 'Check-in Kotor', subtitle: 'Appartement Old Town', icon: 'üè†', type: 'accommodation', loc: 'kotor', info: { price: '‚Ç¨195 totaal (3 nachten)', desc: 'Appartement in of nabij de oude stad' }},
        { time: '17:00', title: '‚≠ê Kotor Old Town', subtitle: 'UNESCO Werelderfgoed', icon: 'üè∞', type: 'highlight', loc: 'kotor', info: { desc: 'Middeleeuwse ommuurde stad - spectaculair!', highlights: ['Sea Gate', 'Clock Tower', 'St. Tryphon Cathedral', 'Cats Museum'], tips: ['Verdwaal in de steegjes!', 'Veel katten üê±', 'Gratis toegang'], duration: '2-3 uur', mustSee: true }},
        { time: '19:00', title: 'Fortress Climb', subtitle: '1350 treden!', icon: 'ü•æ', type: 'activity', loc: 'kotor_fortress', info: { desc: 'Beklim naar San Giovanni Fortress voor spectaculair uitzicht', tips: ['Voor zonsondergang beginnen!', 'Water meenemen', '‚Ç¨8 entree overdag, gratis na 20:00'], duration: '1-1.5 uur', price: '‚Ç¨8 p.p.', mustSee: true }},
        { time: '21:00', title: 'Diner Old Town', subtitle: 'Lokale keuken', icon: 'üçΩÔ∏è', type: 'food', loc: 'kotor', info: { recommendations: ['Galion', 'Bastion', 'Cesarica'], mustTry: ['ƒÜevapi', 'Zwarte risotto', 'Njegu≈°ki pr≈°ut'], price: '‚Ç¨15-25 p.p.' }}
      ],
      2: [
        { time: '09:30', title: '‚≠ê Bay of Kotor Boottocht', subtitle: 'Hele baai per boot', icon: '‚õµ', type: 'highlight', loc: 'kotor', info: { desc: 'Spectaculaire Bay of Kotor tour - fjord-achtig landschap!', highlights: ['Perast bezoeken', 'Our Lady of the Rocks', 'Blue Cave zwemmen'], tips: ['Boek vooraf of op de kade', 'Zonnebrand mee!'], price: '‚Ç¨25-40 p.p.', duration: '3-4 uur', mustSee: true }},
        { time: '10:30', title: 'Our Lady of the Rocks', subtitle: 'Kunstmatig eiland', icon: '‚õ™', type: 'activity', loc: 'our_lady', info: { desc: 'Klein eiland met 17e-eeuwse kerk', tips: ['Onderdeel van boottocht', 'Museum binnenin'], duration: '30 min' }},
        { time: '11:30', title: 'Perast', subtitle: 'Barok dorpje', icon: 'üèòÔ∏è', type: 'activity', loc: 'perast', info: { desc: 'Pittoresk barok stadje aan de baai', highlights: ['St. Nicholas Church toren beklimmen', 'Waterkant paleizen', 'Authentieke sfeer'], tips: ['Minder toeristisch dan Kotor'], mustSee: true }},
        { time: '13:00', title: 'Lunch Perast', subtitle: 'Verse vis aan zee', icon: 'üçΩÔ∏è', type: 'food', loc: 'perast', info: { mustTry: ['Gegrilde vis', 'Mosselen', 'Octopus salade'], price: '‚Ç¨12-20 p.p.', tips: ['Terrassen aan het water'] }},
        { time: '15:00', title: 'Blue Cave', subtitle: 'Zwemmen in blauwe grot', icon: 'üèä', type: 'highlight', loc: 'blue_cave', info: { desc: 'Zeegrot met spectaculair blauw licht', tips: ['Zwemmen mogelijk!', 'Snorkelset meenemen', 'Vaak onderdeel boottocht'], mustSee: true }},
        { time: '20:00', title: 'Diner Kotor', subtitle: 'Seafood avond', icon: 'üçΩÔ∏è', type: 'food', loc: 'kotor', info: { price: '‚Ç¨20-30 p.p.' }}
      ],
      3: [
        { time: '08:30', title: 'Vertrek naar Lovƒáen', subtitle: '25 haarspeldbochten!', icon: 'üöó', type: 'transport', loc: 'lovcen', info: { desc: 'Spectaculaire bergweg met 25 tornanti!', warning: 'Smalle weg, steile afgronden - rustig rijden!', duration: '1-1.5 uur' }},
        { time: '10:00', title: '‚≠ê Njego≈° Mausoleum', subtitle: '461 treden naar de top', icon: 'üèõÔ∏è', type: 'highlight', loc: 'njegos', info: { desc: 'Mausoleum op 1657m hoogte met 360¬∞ uitzicht', tips: ['461 treden door tunnel', 'Jas meenemen - koud!', 'Helder weer = je ziet Itali√´'], price: '‚Ç¨5 p.p.', duration: '1-1.5 uur', mustSee: true }},
        { time: '12:00', title: 'Lovƒáen Nationaal Park', subtitle: 'Panorama wandeling', icon: 'üå≤', type: 'activity', loc: 'lovcen', info: { tips: ['Korte wandelingen mogelijk', 'Picknicken met uitzicht'] }},
        { time: '13:30', title: 'Lunch Njegu≈°i', subtitle: 'Pr≈°ut & kaas dorp', icon: 'üçΩÔ∏è', type: 'food', loc: 'lovcen', info: { desc: 'Beroemd om gerookte ham en kaas!', mustTry: ['Njegu≈°ki pr≈°ut (ham)', 'Njegu≈°ki sir (kaas)', 'Lokale wijn'], price: '‚Ç¨10-15 p.p.', mustSee: true }},
        { time: '15:00', title: 'Cetinje', subtitle: 'Oude koninklijke hoofdstad', icon: 'üè∞', type: 'activity', loc: 'cetinje', info: { desc: 'Historische hoofdstad van Montenegro', highlights: ['Cetinje Monastery', 'King Nikola Museum', 'Oude ambassades'], duration: '1-2 uur' }},
        { time: '20:00', title: 'Diner Kotor', subtitle: 'Laatste avond Kotor', icon: 'üçΩÔ∏è', type: 'food', loc: 'kotor', info: { price: '‚Ç¨15-25 p.p.' }}
      ],
      4: [
        { time: '08:00', title: 'Check-out Kotor', subtitle: 'Naar de bergen!', icon: 'üì¶', type: 'accommodation', loc: 'kotor', info: { tips: ['Water & snacks meenemen', 'Volle tank tanken'] }},
        { time: '10:30', title: '‚≠ê Ostrog Monastery', subtitle: 'In rotswand gebouwd!', icon: '‚õ™', type: 'highlight', loc: 'ostrog', info: { desc: 'Spectaculair klooster uitgehakt in rotswand - belangrijkste bedevaartsoord Balkan!', highlights: ['Upper Monastery (in de rots)', 'Relikwie√´n St. Basil', 'Prachtige berglocatie'], tips: ['Knie√´n/schouders bedekken', 'Gratis entree', 'Respecteer religieuze sfeer'], warning: 'Steile smalle weg naar boven!', mustSee: true }},
        { time: '12:30', title: 'Lunch onderweg', subtitle: 'Lokaal restaurant', icon: 'üçΩÔ∏è', type: 'food', loc: 'ostrog', info: { mustTry: ['Kaƒçamak (polenta)', 'ƒÜevapi', 'Kajmak'], price: '‚Ç¨8-15 p.p.' }},
        { time: '16:30', title: 'Check-in ≈Ωabljak', subtitle: 'Mountain Lodge', icon: 'üè†', type: 'accommodation', loc: 'zabljak', info: { price: '‚Ç¨100 totaal (2 nachten)', desc: 'Bergverblijf nabij Durmitor NP' }},
        { time: '17:30', title: '‚≠ê Black Lake', subtitle: 'Wandeling rond bergmeer', icon: 'üèîÔ∏è', type: 'highlight', loc: 'black_lake', info: { desc: '"Crno Jezero" - Oog van de Berg - prachtig bergmeer!', tips: ['3.5 km wandeling rondom', 'Makkelijk pad', 'Perfect voor zonsondergang!'], price: '‚Ç¨3 parkentree', duration: '1-1.5 uur', mustSee: true }},
        { time: '20:00', title: 'Bergdiner', subtitle: 'Hearty mountain food', icon: 'üçΩÔ∏è', type: 'food', loc: 'zabljak', info: { mustTry: ['Lamsvlees', 'Kaƒçamak', 'Cicvara'], price: '‚Ç¨10-18 p.p.' }}
      ],
      5: [
        { time: '06:00', title: '‚ö†Ô∏è VROEG opstaan!', subtitle: 'Rafting pickup', icon: '‚è∞', type: 'warning', loc: 'zabljak', info: { warning: 'Vroege pickup voor rafting!' }},
        { time: '08:30', title: 'Ontbijt rafting kamp', subtitle: 'Traditioneel ontbijt', icon: 'üç≥', type: 'food', loc: 'tara_canyon', info: { desc: 'Ontbijt bij het rafting basiskamp', price: 'Inbegrepen' }},
        { time: '10:00', title: '‚≠ê TARA RIVER RAFTING!', subtitle: '2e diepste canyon ter wereld!', icon: 'üö£', type: 'highlight', loc: 'tara_canyon', info: { desc: 'Raft door de 2e diepste canyon van de wereld - na Grand Canyon!', highlights: ['18 km route', 'Kristalhelder water', '50+ stroomversnellingen', 'Watervallen', '1300m diepe kloof'], tips: ['VOORAF BOEKEN!', 'Luister naar de gids!', 'Waterproof camera!', 'Zwemkleding ONDER kleding aan'], warning: 'Water is KOUD (12¬∞C)! Wetsuit wordt verstrekt.', price: '‚Ç¨65-85 p.p.', duration: '3-4 uur op water', mustSee: true }},
        { time: '14:00', title: 'BBQ Lunch', subtitle: 'Aan de rivier', icon: 'üçñ', type: 'food', loc: 'tara_canyon', info: { desc: 'BBQ lunch na het raften', price: 'Inbegrepen' }},
        { time: '15:30', title: 'Tara Bridge', subtitle: '172m hoge brug!', icon: 'üåâ', type: 'activity', loc: 'tara_bridge', info: { desc: 'ƒêurƒëeviƒáa Tara - iconische brug 172m boven de rivier', tips: ['Wandelen over de brug', 'Zipline mogelijk (‚Ç¨20)', 'Spectaculaire fotos!'], mustSee: true }},
        { time: '20:00', title: 'Afscheidsdiner bergen', subtitle: 'Laatste avond Durmitor', icon: 'üçΩÔ∏è', type: 'food', loc: 'zabljak', info: { tips: ['Rakija proberen!'], price: '‚Ç¨12-20 p.p.' }}
      ],
      6: [
        { time: '09:00', title: 'Check-out ≈Ωabljak', subtitle: 'Naar de kust!', icon: 'üì¶', type: 'accommodation', loc: 'zabljak', info: { tips: ['~3.5 uur rijden naar Budva'] }},
        { time: '13:00', title: 'Check-in Budva', subtitle: 'Beach Apartment', icon: 'üè†', type: 'accommodation', loc: 'budva', info: { price: '‚Ç¨210 totaal (3 nachten)' }},
        { time: '15:30', title: 'Budva Old Town', subtitle: '2500 jaar oud', icon: 'üè∞', type: 'activity', loc: 'budva', info: { desc: 'Een van de oudste nederzettingen aan de Adriatische kust', highlights: ['Citadel met uitzicht', 'Stadsmuren', 'Smalle steegjes'], duration: '1-2 uur' }},
        { time: '17:30', title: '‚≠ê Sveti Stefan', subtitle: 'Iconisch eiland-hotel', icon: 'üèùÔ∏è', type: 'highlight', loc: 'sveti_stefan', info: { desc: 'HET iconische beeld van Montenegro - luxe eiland-hotel!', tips: ['Eiland zelf = Aman Resort (niet toegankelijk)', 'GRATIS uitzicht vanaf strand/weg', 'Beste fotos bij zonsondergang', 'Strand naast eiland is openbaar'], mustSee: true }},
        { time: '19:30', title: 'Diner met view', subtitle: 'Sveti Stefan uitzicht', icon: 'üçΩÔ∏è', type: 'food', loc: 'sveti_stefan', info: { price: '‚Ç¨18-28 p.p.' }}
      ],
      7: [
        { time: '09:30', title: 'üöÄ Jetski!', subtitle: 'Langs de kust racen', icon: 'üöÄ', type: 'highlight', loc: 'budva', info: { desc: 'Jetski over de Adriatische Zee!', tips: ['Boek ter plekke op strand', 'Vroeg = rustiger water', 'Zwemvest verplicht'], price: '‚Ç¨30-60 p.p. (15-30 min)', duration: '15-30 min', mustSee: true }},
        { time: '10:30', title: 'ü™Ç Parasailing!', subtitle: 'Vliegen boven Budva', icon: 'ü™Ç', type: 'highlight', loc: 'budva', info: { desc: 'Zweef tot 60m boven de zee met uitzicht op Sveti Stefan!', tips: ['Samen = ‚Ç¨80 voor duo', 'Geen ervaring nodig', 'Spectaculaire fotos!'], price: '‚Ç¨50 solo / ‚Ç¨80 duo', duration: '~15 min vlucht', mustSee: true }},
        { time: '11:30', title: '‚≠ê Mogren Beach', subtitle: 'Mooiste strand relaxen', icon: 'üèñÔ∏è', type: 'highlight', loc: 'mogren', info: { desc: 'Twee stranden verbonden door tunnel in de rotsen!', tips: ['Ligbedden ‚Ç¨10-15', 'Restaurant op strand', 'Tunnel naar Mogren II'], mustSee: true }},
        { time: '13:00', title: 'Lunch op strand', subtitle: 'Beachbar vibes', icon: 'üçΩÔ∏è', type: 'food', loc: 'mogren', info: { mustTry: ['Verse vis', 'Calamares'], price: '‚Ç¨10-18 p.p.' }},
        { time: '14:30', title: 'üçå Banana Boat', subtitle: 'Klassieke strandpret', icon: 'üçå', type: 'activity', loc: 'budva', info: { desc: 'Achter speedboot over de golven!', tips: ['Probeer niet te vallen! üòÑ', 'Boek op strand'], price: '‚Ç¨15-20 p.p.', duration: '~15 min' }},
        { time: '15:30', title: 'üèÑ Wakeboard / SUP', subtitle: 'Jaz Beach watersporten', icon: 'üèÑ', type: 'activity', loc: 'jaz', info: { desc: 'Extra watersporten op Jaz Beach', tips: ['Jaz Beach = beste faciliteiten', 'SUP huren ‚Ç¨10-20/uur', 'Wakeboard ‚Ç¨30-50'], price: '‚Ç¨10-50' }},
        { time: '18:30', title: 'Jaz Beach sunset', subtitle: 'Zonsondergang cocktails', icon: 'üåÖ', type: 'beach', loc: 'jaz', info: { desc: 'Relaxen na actieve dag bij zonsondergang', tips: ['Sea Dance festival strand', 'Minder druk dan Budva', 'Mooie zonsondergang'] }},
        { time: '20:30', title: 'Diner', subtitle: 'Verdiend na sportieve dag!', icon: 'üçΩÔ∏è', type: 'food', loc: 'budva', info: { price: '‚Ç¨20-35 p.p.' }}
      ],
      8: [
        { time: '10:00', title: '‚≠ê Skadar Lake', subtitle: 'Grootste meer van Balkan', icon: 'ü¶Ö', type: 'highlight', loc: 'skadar', info: { desc: 'Nationaal Park - vogelparadijs!', highlights: ['Pelikanen', 'Aalscholvers', 'Reigers', 'Waterlelievelden'], tips: ['Boot vanuit Virpazar', 'Mei = waterlelies!'], mustSee: true }},
        { time: '10:30', title: 'Boottrip Skadar', subtitle: 'Waterlelievelden', icon: '‚õµ', type: 'activity', loc: 'virpazar', info: { desc: 'Boottocht door waterlelievelden', highlights: ['Waterlelies (mei = perfect!)', 'Vogeleilanden', 'Oude kloosters'], price: '‚Ç¨15-25 p.p.', duration: '2-3 uur' }},
        { time: '13:30', title: 'Lunch + Wijnproeverij', subtitle: 'Lokale wijnen', icon: 'üç∑', type: 'food', loc: 'skadar', info: { desc: 'Regio beroemd om Vranac wijn!', mustTry: ['Vranac (rode wijn)', 'Krstaƒç (witte wijn)', 'Lokale kaas'], tips: ['Wijnhuizen rond Virpazar'], price: '‚Ç¨15-25 p.p.' }},
        { time: '21:00', title: '‚≠ê Afscheidsdiner', subtitle: 'Beste restaurant!', icon: 'üçΩÔ∏è', type: 'highlight', loc: 'budva', info: { tips: ['Reserveer vooraf!', 'Rakija als digestief'], price: '‚Ç¨30-45 p.p.', mustSee: true }}
      ],
      9: [
        { time: '08:00', title: 'Laatste ontbijt', subtitle: 'Aan zee', icon: 'üç≥', type: 'food', loc: 'budva', info: {} },
        { time: '10:00', title: 'Check-out', subtitle: 'Apartment Budva', icon: 'üì¶', type: 'accommodation', loc: 'budva', info: {} },
        { time: '10:30', title: 'Auto inleveren', subtitle: 'Tivat Airport', icon: 'üöó', type: 'transport', loc: 'tivat', info: { tips: ['Volle tank!', 'Ruim op tijd!'], warning: 'Tank vol voor inleveren!' }},
        { time: '15:00', title: '‚úàÔ∏è Vlucht naar huis', subtitle: 'Tivat ‚Üí Amsterdam', icon: '‚úàÔ∏è', type: 'highlight', loc: 'tivat', info: { desc: 'Terugvlucht naar Nederland', tips: ['Aankomst ~20:30 NL tijd'] }},
        { time: '20:30', title: 'üè† Thuis!', subtitle: 'Welkom terug', icon: 'üè†', type: 'transport', loc: 'tivat', info: {} }
      ]
    };

    const budget = {
      estimated: [
        { item: '‚úàÔ∏è Vluchten (2p)', budget: 730, comfort: 850 },
        { item: 'üè† Kotor (3n)', budget: 195, comfort: 250 },
        { item: 'üè† Durmitor (2n)', budget: 100, comfort: 140 },
        { item: 'üè† Budva (3n)', budget: 210, comfort: 280 },
        { item: 'üöó Huurauto (8 dagen)', budget: 200, comfort: 280 },
        { item: '‚õΩ Benzine (~600km)', budget: 60, comfort: 80 },
        { item: 'üö£ Tara Rafting (2p)', budget: 140, comfort: 170 },
        { item: '‚õµ Kotor boottocht (2p)', budget: 60, comfort: 80 },
        { item: 'üöÄ Jetski (2p)', budget: 60, comfort: 100 },
        { item: 'ü™Ç Parasailing (duo)', budget: 80, comfort: 80 },
        { item: 'üçå Banana + Wakeboard', budget: 60, comfort: 80 },
        { item: '‚õµ Skadar boottrip (2p)', budget: 40, comfort: 50 },
        { item: 'üé´ Entreegelden', budget: 30, comfort: 40 },
        { item: 'üçΩÔ∏è Eten (9 dagen)', budget: 350, comfort: 500 },
        { item: 'üè• Reisverzekering', budget: 40, comfort: 60 },
        { item: 'üí∞ Buffer', budget: 85, comfort: 120 }
      ]
    };

    const checklistSections = [
      { title: 'üî¥ NU BOEKEN', items: [
        { key: 'flights', label: '‚úàÔ∏è Vluchten Amsterdam ‚Üî Tivat' },
        { key: 'accomKotor', label: 'üè† Accommodatie Kotor (3n)' },
        { key: 'accomDurmitor', label: 'üè† Accommodatie ≈Ωabljak (2n)' },
        { key: 'accomBudva', label: 'üè† Accommodatie Budva (3n)' },
        { key: 'insurance', label: 'üè• Reisverzekering' },
        { key: 'rafting', label: 'üö£ TARA RAFTING BOEKEN!' }
      ]},
      { title: 'üü† APRIL', items: [
        { key: 'carRental', label: 'üöó Huurauto' },
        { key: 'boatTour', label: '‚õµ Bay of Kotor boottocht' },
        { key: 'watersports', label: 'üöÄ Watersport check' }
      ]},
      { title: 'üì¶ WEEK VOOR', items: [
        { key: 'mapsOffline', label: 'üì± Google Maps offline' },
        { key: 'printDocs', label: 'üñ®Ô∏è Bevestigingen printen' },
        { key: 'eurosCash', label: 'üí∂ Euro\'s cash' }
      ]},
      { title: 'üß≥ DOCUMENTEN', items: [
        { key: 'passport', label: 'Paspoort / ID' },
        { key: 'license', label: 'Rijbewijs' },
        { key: 'creditcard', label: 'Creditcard' },
        { key: 'ehic', label: 'EHIC kaart' }
      ]},
      { title: 'üéí INPAKKEN', items: [
        { key: 'hikingShoes', label: 'ü•æ Wandelschoenen!' },
        { key: 'swimwear', label: 'üëô Zwemkleding (2x)' },
        { key: 'sunscreen', label: '‚òÄÔ∏è Zonnebrand SPF50' },
        { key: 'rainJacket', label: 'üß• Regenjas (bergen!)' },
        { key: 'camera', label: 'üì∑ Camera + waterproof' }
      ]}
    ];

    checklistSections.forEach(sec => sec.items.forEach(i => { if (checklist[i.key] === undefined) checklist[i.key] = false; }));

    function getTypeClass(type) {
      const classes = {
        transport: 'bg-gradient-to-r from-amber-100 to-yellow-100 border-l-4 border-amber-500',
        accommodation: 'bg-gradient-to-r from-amber-100 to-yellow-100 border-l-4 border-yellow-500',
        highlight: 'bg-gradient-to-r from-orange-100 to-amber-100 border-l-4 border-orange-500',
        food: 'bg-gradient-to-r from-green-100 to-emerald-100 border-l-4 border-green-500',
        activity: 'bg-gradient-to-r from-violet-100 to-purple-100 border-l-4 border-purple-500',
        beach: 'bg-gradient-to-r from-cyan-100 to-blue-100 border-l-4 border-cyan-500',
        warning: 'bg-gradient-to-r from-red-200 to-rose-200 border-l-4 border-red-600'
      };
      return classes[type] || 'bg-gray-100 border-l-4 border-gray-400';
    }

    function setDay(d) { activeDay = d; render(); }
    function setTab(t) { activeTab = t; render(); }
    function openModal(act) { selectedModal = act; render(); }
    function closeModal() { selectedModal = null; render(); }
    function toggleCheck(key) { checklist[key] = !checklist[key]; localStorage.setItem('montenegroChecklist', JSON.stringify(checklist)); render(); }
    function toggleDarkMode() { darkMode = !darkMode; localStorage.setItem('montenegroDarkMode', darkMode.toString()); document.body.classList.toggle('dark', darkMode); render(); }

    function addExpense() {
      const desc = document.getElementById('expenseDesc')?.value;
      const amount = parseFloat(document.getElementById('expenseAmount')?.value);
      const cat = document.getElementById('expenseCategory')?.value || 'üí∞ Overig';
      if (desc && amount > 0) {
        expenses.push({ id: Date.now(), desc, amount, category: cat });
        localStorage.setItem('montenegroExpenses', JSON.stringify(expenses));
        render();
      }
    }
    function deleteExpense(id) { expenses = expenses.filter(e => e.id !== id); localStorage.setItem('montenegroExpenses', JSON.stringify(expenses)); render(); }

    function saveNote() {
      const note = document.getElementById('dayNoteInput')?.value;
      if (note && note.trim()) {
        if (!dayNotes[activeDay]) dayNotes[activeDay] = [];
        dayNotes[activeDay].push({ id: Date.now(), text: note, ts: new Date().toLocaleString('nl-NL') });
        localStorage.setItem('montenegroDayNotes', JSON.stringify(dayNotes));
        render();
      }
    }
    function deleteNote(id) { dayNotes[activeDay] = (dayNotes[activeDay] || []).filter(n => n.id !== id); localStorage.setItem('montenegroDayNotes', JSON.stringify(dayNotes)); render(); }

    function shareTrip() {
      if (navigator.share) navigator.share({ title: trip.title, url: window.location.href });
      else { navigator.clipboard.writeText(window.location.href); alert('Link gekopieerd!'); }
    }

    function exportTrip() {
      let txt = `${trip.title}\n${trip.dates}\n\n`;
      days.forEach(d => {
        txt += `=== DAG ${d.day}: ${d.title} ===\n`;
        (activities[d.day] || []).forEach(a => { txt += `${a.time} - ${a.title}\n`; });
        txt += '\n';
      });
      const blob = new Blob([txt], { type: 'text/plain' });
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'montenegro-trip.txt'; a.click();
    }

    // MAIN RENDER
    function render() {
      const day = days[activeDay - 1];
      const acts = activities[activeDay] || [];
      const accom = day.accom ? accommodations[day.accom] : null;

      const estBudget = budget.estimated.reduce((s, i) => s + i.budget, 0);
      const estComfort = budget.estimated.reduce((s, i) => s + i.comfort, 0);
      const totalExpenses = expenses.reduce((s, e) => s + e.amount, 0);
      const checkedCount = Object.values(checklist).filter(Boolean).length;
      const totalChecks = checklistSections.reduce((s, sec) => s + sec.items.length, 0);

      const tripDate = new Date('2026-05-16');
      const daysLeft = Math.ceil((tripDate - new Date()) / (1000*60*60*24));

      let html = '';

      // HEADER
      html += `
        <div class="bg-white rounded-3xl p-5 shadow-lg mb-4">
          <div class="flex items-center justify-between">
            <div>
              <h1 class="text-2xl font-bold text-gray-800">${trip.title}</h1>
              <p class="text-amber-600 font-medium">${trip.subtitle}</p>
              <p class="text-gray-500 text-sm mt-1">${trip.dates} ‚Ä¢ ${trip.persons} pers ‚Ä¢ ${trip.duration}</p>
            </div>
            <a href="/" class="text-gray-400 hover:text-gray-600 text-2xl">√ó</a>
          </div>
          <div class="flex flex-wrap gap-2 mt-3">
            ${daysLeft > 0 ? `<span class="bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-1.5 rounded-full text-sm font-bold">üèîÔ∏è Nog ${daysLeft} dagen!</span>` : ''}
            <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm">üè∞ Kotor UNESCO</span>
            <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm">üö£ Tara Rafting</span>
          </div>
        </div>
      `;

      // TABS
      html += `<div class="flex gap-2 mb-4 overflow-x-auto hide-scrollbar">`;
      [
        { id: 'planning', label: 'üìÖ Planning' },
        { id: 'map', label: 'üó∫Ô∏è Kaart' },
        { id: 'budget', label: 'üí∞ Budget' },
        { id: 'checklist', label: `‚úÖ (${checkedCount}/${totalChecks})` }
      ].forEach(t => {
        html += `<button onclick="setTab('${t.id}')" class="px-4 py-2 rounded-xl font-medium whitespace-nowrap shadow ${activeTab === t.id ? 'bg-amber-600 text-white' : 'bg-white text-gray-700 hover:bg-amber-50'}">${t.label}</button>`;
      });
      html += `</div>`;

      // PLANNING TAB
      if (activeTab === 'planning') {
        html += `<div class="flex gap-2 overflow-x-auto pb-3 hide-scrollbar">`;
        days.forEach(d => {
          html += `<button onclick="setDay(${d.day})" class="flex items-center gap-2 px-4 py-2 rounded-xl font-medium whitespace-nowrap shadow ${activeDay === d.day ? 'bg-amber-600 text-white' : 'bg-white text-gray-700'}">${d.icon} Dag ${d.day}</button>`;
        });
        html += `</div>`;

        html += `
          <div class="bg-white rounded-2xl p-5 shadow-lg mb-4">
            <div class="flex items-center gap-4">
              <span class="text-5xl">${day.icon}</span>
              <div class="flex-1">
                <h2 class="text-2xl font-bold text-gray-800">Dag ${day.day}: ${day.title}</h2>
                <p class="text-gray-500">${day.date} ‚Ä¢ ${day.region}</p>
                <p class="text-amber-600 font-semibold">${day.highlight}</p>
              </div>
            </div>
            ${accom ? `<div class="mt-3 bg-amber-50 rounded-xl p-3"><span class="text-xs text-amber-600 font-bold">üè® ACCOMMODATIE</span><div class="font-bold text-amber-800">${accom.name}</div><div class="text-sm text-amber-600">${accom.area}</div></div>` : ''}
          </div>
        `;

        html += `<div class="bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-4 mb-4 text-sm flex items-center gap-3"><span class="text-xl">üí°</span><span><strong>Klik op een activiteit</strong> voor gedetailleerde info!</span></div>`;

        html += `<div class="bg-white rounded-2xl p-4 shadow-lg mb-4"><div class="space-y-2">`;
        acts.forEach((act, idx) => {
          const prevLoc = idx > 0 ? acts[idx-1].loc : (accom ? day.accom : null);
          const dist = prevLoc && act.loc ? calcDist(prevLoc, act.loc) : null;
          html += `
            <div onclick='openModal(${JSON.stringify(act).replace(/'/g, "\\'")})' class="rounded-xl p-3 cursor-pointer hover:shadow-md transition ${getTypeClass(act.type)}">
              <div class="flex items-center gap-3">
                <div class="font-mono font-bold text-gray-700 w-12 text-center">${act.time}</div>
                <div class="text-2xl">${act.icon}</div>
                <div class="flex-1 min-w-0">
                  <div class="font-bold text-gray-800">${act.title}</div>
                  <div class="text-gray-600 text-sm truncate">${act.subtitle}</div>
                </div>
                ${dist ? `<div class="text-xs bg-white/60 px-2 py-1 rounded-full hidden md:block">${dist}km</div>` : ''}
                <div class="text-gray-400">‚Üí</div>
              </div>
            </div>
          `;
        });
        html += `</div></div>`;

        // Special day info boxes
        if (activeDay === 5) {
          html += `
            <div class="bg-gradient-to-r from-blue-100 to-cyan-100 border border-blue-300 rounded-2xl p-4 mb-4">
              <h4 class="font-bold text-blue-800 mb-2">üö£ RAFTING DAG - WAT MEENEMEN</h4>
              <div class="flex flex-wrap gap-2">
                ${['üëô Zwemkleding (aan!)', 'üëü Sportschoenen', '‚òÄÔ∏è Zonnebrand', 'üì∑ Waterproof camera', 'üß¥ Handdoek'].map(i => `<span class="bg-blue-200 text-blue-800 px-3 py-1 rounded-full text-sm">${i}</span>`).join('')}
              </div>
              <p class="mt-2 text-blue-700 text-sm">‚ö†Ô∏è Water is KOUD (12¬∞C) maar wetsuit wordt verstrekt!</p>
            </div>
          `;
        }

        if (activeDay === 7) {
          html += `
            <div class="bg-gradient-to-r from-amber-100 to-orange-100 border border-amber-300 rounded-2xl p-4 mb-4">
              <h4 class="font-bold text-amber-800 mb-2">üöÄ WATERSPORT DAG - PRIJZEN</h4>
              <div class="grid grid-cols-2 md:grid-cols-3 gap-2 text-sm">
                <div class="bg-white p-2 rounded-lg"><strong>üöÄ Jetski</strong><br/>‚Ç¨30-60 p.p.</div>
                <div class="bg-white p-2 rounded-lg"><strong>ü™Ç Parasailing</strong><br/>‚Ç¨50/‚Ç¨80 duo</div>
                <div class="bg-white p-2 rounded-lg"><strong>üçå Banana</strong><br/>‚Ç¨15-20 p.p.</div>
                <div class="bg-white p-2 rounded-lg"><strong>üèÑ Wakeboard</strong><br/>‚Ç¨30-50</div>
                <div class="bg-white p-2 rounded-lg"><strong>üõ∂ SUP</strong><br/>‚Ç¨10-20/uur</div>
              </div>
            </div>
          `;
        }

        // Day Notes
        html += `
          <div class="bg-gradient-to-r from-amber-100 to-orange-100 rounded-2xl p-4 shadow">
            <h4 class="font-bold text-amber-800 mb-3">üìù Notities - Dag ${activeDay}</h4>
            <div class="flex gap-2 mb-3">
              <input type="text" id="dayNoteInput" placeholder="Schrijf notitie..." class="flex-1 px-4 py-2 rounded-xl border text-sm">
              <button onclick="saveNote()" class="bg-amber-600 text-white px-4 py-2 rounded-xl font-medium">+</button>
            </div>
            ${(dayNotes[activeDay] || []).length > 0 ? `<div class="space-y-2">${(dayNotes[activeDay] || []).map(n => `
              <div class="bg-white rounded-lg p-3 flex justify-between">
                <div><p class="text-gray-800">${n.text}</p><p class="text-xs text-gray-400">${n.ts}</p></div>
                <button onclick="deleteNote(${n.id})" class="text-red-400 hover:text-red-600">√ó</button>
              </div>
            `).join('')}</div>` : ''}
          </div>
        `;
      }

      // MAP TAB
      if (activeTab === 'map') {
        const dayLocs = acts.filter(a => a.loc && locations[a.loc]).map(a => ({ ...a, ...locations[a.loc] }));
        
        html += `<div class="flex gap-2 overflow-x-auto pb-3 hide-scrollbar mb-4">`;
        days.forEach(d => {
          html += `<button onclick="setDay(${d.day}); setTab('map');" class="flex items-center gap-2 px-4 py-2 rounded-xl font-medium whitespace-nowrap shadow ${activeDay === d.day ? 'bg-amber-600 text-white' : 'bg-white text-gray-700'}">${d.icon} Dag ${d.day}</button>`;
        });
        html += `</div>`;

        html += `
          <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
            <div class="p-4 bg-gradient-to-r from-amber-500 to-orange-500 text-white">
              <h3 class="font-bold text-lg">üó∫Ô∏è Dag ${activeDay}: ${day.title}</h3>
              <p class="text-white/80 text-sm">${dayLocs.length} locaties</p>
            </div>
            <div class="p-4 space-y-2">
              ${dayLocs.map((loc, i) => `
                <a href="${getMapsUrl(loc.loc)}" target="_blank" class="flex items-center gap-3 p-3 bg-gray-50 rounded-xl hover:bg-amber-50 transition">
                  <div class="w-8 h-8 rounded-full bg-amber-600 text-white flex items-center justify-center font-bold text-sm">${i+1}</div>
                  <span class="text-2xl">${loc.icon}</span>
                  <div class="flex-1"><div class="font-medium text-gray-800">${loc.title}</div><div class="text-sm text-gray-500">${loc.time}</div></div>
                  <span class="text-amber-500">üìç</span>
                </a>
              `).join('')}
            </div>
            ${dayLocs.length > 1 ? `
              <div class="p-4 bg-amber-50 border-t">
                <a href="https://www.google.com/maps/dir/${dayLocs.map(l => `${l.lat},${l.lng}`).join('/')}" target="_blank" class="block w-full bg-amber-600 text-white text-center py-3 rounded-xl font-bold">üó∫Ô∏è Open volledige route</a>
              </div>
            ` : ''}
          </div>
        `;
      }

      // BUDGET TAB
      if (activeTab === 'budget') {
        html += `
          <div class="space-y-4">
            <div class="bg-gradient-to-r from-amber-500 to-orange-500 rounded-2xl p-5 text-white shadow-lg">
              <h3 class="font-bold text-lg mb-3">üí∏ Uitgaven Tracker</h3>
              <div class="grid grid-cols-3 gap-2 mb-3">
                <input type="text" id="expenseDesc" placeholder="Omschrijving" class="col-span-2 px-3 py-2 rounded-lg text-gray-800 text-sm">
                <input type="number" id="expenseAmount" placeholder="‚Ç¨" step="0.01" class="px-3 py-2 rounded-lg text-gray-800 text-sm">
              </div>
              <div class="flex gap-2">
                <select id="expenseCategory" class="flex-1 px-3 py-2 rounded-lg text-gray-800 text-sm">
                  <option>üçΩÔ∏è Eten</option><option>üöó Vervoer</option><option>üé´ Activiteit</option><option>üéÅ Shopping</option><option>üí∞ Overig</option>
                </select>
                <button onclick="addExpense()" class="bg-white text-amber-600 px-4 py-2 rounded-lg font-bold">+</button>
              </div>
              ${expenses.length > 0 ? `<div class="mt-4 pt-4 border-t border-white/30 flex justify-between"><span>Totaal uitgegeven:</span><span class="text-2xl font-bold">‚Ç¨${totalExpenses.toFixed(2)}</span></div>` : ''}
            </div>

            ${expenses.length > 0 ? `
              <div class="bg-white rounded-2xl p-4 shadow-lg">
                <h3 class="font-bold text-gray-800 mb-3">üìù Uitgaven</h3>
                <div class="space-y-2 max-h-48 overflow-y-auto">
                  ${expenses.slice().reverse().map(e => `
                    <div class="flex justify-between items-center py-2 px-3 bg-gray-50 rounded-lg">
                      <div><span class="text-sm text-gray-500">${e.category}</span> <span class="font-medium text-gray-800">${e.desc}</span></div>
                      <div class="flex items-center gap-2">
                        <span class="font-bold text-amber-600">‚Ç¨${e.amount.toFixed(2)}</span>
                        <button onclick="deleteExpense(${e.id})" class="text-gray-400 hover:text-red-500">√ó</button>
                      </div>
                    </div>
                  `).join('')}
                </div>
              </div>
            ` : ''}

            <div class="bg-white rounded-2xl p-4 shadow-lg">
              <h3 class="font-bold text-gray-800 mb-3">üìä Geschatte Kosten</h3>
              <div class="space-y-1 max-h-64 overflow-y-auto">
                ${budget.estimated.map(i => `
                  <div class="flex justify-between py-2 border-b border-gray-100">
                    <span class="text-sm text-gray-700">${i.item}</span>
                    <span class="font-mono text-sm text-gray-600">‚Ç¨${i.budget} | ‚Ç¨${i.comfort}</span>
                  </div>
                `).join('')}
              </div>
              <div class="mt-3 pt-3 border-t-2 border-amber-200 flex justify-between font-bold">
                <span class="text-gray-800">TOTAAL</span>
                <span class="text-gray-800">‚Ç¨${estBudget} | ‚Ç¨${estComfort}</span>
              </div>
            </div>

            <div class="grid grid-cols-2 gap-4">
              <div class="bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 text-white text-center">
                <div class="text-sm opacity-80">üíö Budget</div>
                <div class="text-3xl font-bold">‚Ç¨${estBudget}</div>
                <div class="text-sm opacity-80">‚Ç¨${Math.round(estBudget/2)} p.p.</div>
              </div>
              <div class="bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl p-4 text-white text-center">
                <div class="text-sm opacity-80">‚ú® Comfort</div>
                <div class="text-3xl font-bold">‚Ç¨${estComfort}</div>
                <div class="text-sm opacity-80">‚Ç¨${Math.round(estComfort/2)} p.p.</div>
              </div>
            </div>
          </div>
        `;
      }

      // CHECKLIST TAB
      if (activeTab === 'checklist') {
        html += `<div class="space-y-4">`;
        checklistSections.forEach(sec => {
          const secChecked = sec.items.filter(i => checklist[i.key]).length;
          html += `
            <div class="bg-white rounded-2xl p-4 shadow-lg">
              <h3 class="font-bold text-gray-800 mb-3 flex items-center gap-2">${sec.title} <span class="text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded-full">${secChecked}/${sec.items.length}</span></h3>
              <div class="space-y-2">
                ${sec.items.map(i => `
                  <label class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer">
                    <input type="checkbox" ${checklist[i.key] ? 'checked' : ''} onchange="toggleCheck('${i.key}')" class="w-5 h-5 rounded text-amber-600">
                    <span class="${checklist[i.key] ? 'line-through text-gray-400' : 'text-gray-700'}">${i.label}</span>
                  </label>
                `).join('')}
              </div>
            </div>
          `;
        });
        html += `
          <div class="bg-gradient-to-r from-amber-500 to-orange-500 rounded-2xl p-5 text-white">
            <h3 class="font-bold mb-3">üìä Voortgang</h3>
            <div class="bg-white/20 rounded-full h-4 mb-2">
              <div class="bg-white rounded-full h-4 transition-all" style="width: ${Math.max((checkedCount/totalChecks)*100, 5)}%"></div>
            </div>
            <div class="text-center">${checkedCount} / ${totalChecks} items</div>
          </div>
        </div>`;
      }

      // MODAL
      if (selectedModal) {
        const m = selectedModal;
        const info = m.info || {};
        const accomLoc = day.accom || 'kotor';
        const dist = m.loc ? calcDist(accomLoc, m.loc) : null;

        html += `
          <div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50" onclick="closeModal()">
            <div class="bg-white rounded-3xl max-w-lg w-full max-h-[85vh] overflow-y-auto shadow-2xl" onclick="event.stopPropagation()">
              <div class="p-5 ${getTypeClass(m.type)} rounded-t-3xl">
                <div class="flex justify-between items-start">
                  <div class="flex items-center gap-3">
                    <span class="text-4xl">${m.icon}</span>
                    <div>
                      <h3 class="text-xl font-bold text-gray-800">${m.title}</h3>
                      <p class="text-gray-600">${m.time} ‚Ä¢ ${m.subtitle}</p>
                    </div>
                  </div>
                  <button onclick="closeModal()" class="text-3xl text-gray-400 hover:text-gray-600">√ó</button>
                </div>
              </div>
              <div class="p-5 space-y-4">
                ${dist ? `
                  <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-4">
                    <h4 class="font-bold text-blue-800 mb-2">üìç Afstanden</h4>
                    <div class="bg-white p-3 rounded-xl shadow-sm">
                      <div class="text-gray-500 text-xs">Vanaf accommodatie</div>
                      <div class="font-bold text-blue-700 text-lg">${dist} km</div>
                      <div class="text-xs text-gray-500">${estTime(dist)}</div>
                    </div>
                  </div>
                ` : ''}
                ${info.desc ? `<div><h4 class="font-bold text-gray-700 mb-1">üìñ Beschrijving</h4><p class="text-gray-600">${info.desc}</p></div>` : ''}
                ${info.highlights ? `<div><h4 class="font-bold text-gray-700 mb-2">‚ú® Highlights</h4><div class="flex flex-wrap gap-2">${info.highlights.map(h => `<span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm">${h}</span>`).join('')}</div></div>` : ''}
                ${info.price ? `<div class="bg-green-50 p-4 rounded-xl"><h4 class="font-bold text-green-800 mb-1">üí∞ Kosten</h4><p class="text-green-700 font-semibold text-lg">${info.price}</p></div>` : ''}
                ${info.duration ? `<div class="flex items-center gap-2 bg-gray-50 p-3 rounded-xl"><span>‚è±Ô∏è</span><strong>Duur:</strong> ${info.duration}</div>` : ''}
                ${info.tips ? `<div><h4 class="font-bold text-gray-700 mb-2">üí° Tips</h4><ul class="space-y-1">${info.tips.map(t => `<li class="text-sm bg-blue-50 text-blue-800 p-2 rounded-lg">‚Ä¢ ${t}</li>`).join('')}</ul></div>` : ''}
                ${info.mustTry ? `<div><h4 class="font-bold text-gray-700 mb-2">üç¥ Must Try</h4><div class="flex flex-wrap gap-2">${info.mustTry.map(t => `<span class="bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm">${t}</span>`).join('')}</div></div>` : ''}
                ${info.recommendations ? `<div><h4 class="font-bold text-gray-700 mb-2">üéØ Aanbevelingen</h4><div class="flex flex-wrap gap-2">${info.recommendations.map(r => `<span class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm">${r}</span>`).join('')}</div></div>` : ''}
                ${info.warning ? `<div class="bg-red-50 border border-red-200 p-4 rounded-xl"><h4 class="font-bold text-red-800 mb-1">‚ö†Ô∏è Let op!</h4><p class="text-red-700">${info.warning}</p></div>` : ''}
                ${info.mustSee ? `<div class="bg-gradient-to-r from-amber-100 to-orange-100 p-4 rounded-xl text-center"><span class="text-2xl">‚≠ê</span><span class="font-bold text-gray-800 ml-2">MUST SEE / DO!</span></div>` : ''}
                ${m.loc && getMapsUrl(m.loc) ? `<a href="${getMapsUrl(m.loc)}" target="_blank" class="block w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white text-center py-3 px-4 rounded-xl font-semibold">üìç Open in Google Maps</a>` : ''}
              </div>
            </div>
          </div>
        `;
      }

      // FOOTER
      html += `
        <div class="mt-6 space-y-3 text-center">
          <div class="flex flex-wrap justify-center gap-2">
            <button onclick="shareTrip()" class="bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-2 rounded-xl font-bold shadow">üîó Deel</button>
            <button onclick="exportTrip()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-xl font-bold shadow">üìÑ Export</button>
            <button onclick="toggleDarkMode()" class="bg-gradient-to-r from-gray-600 to-gray-800 text-white px-4 py-2 rounded-xl font-bold shadow">${darkMode ? '‚òÄÔ∏è Light' : 'üåô Dark'}</button>
          </div>
          <p class="text-gray-600 text-sm">üèîÔ∏è Montenegro Adventure 2026 üèîÔ∏è</p>
          <a href="/" class="text-amber-600 hover:underline text-sm">‚Üê Terug naar overzicht</a>
        </div>
      `;

      document.getElementById('app').innerHTML = html;
    }

    render();
  </script>
</body>
</html>
