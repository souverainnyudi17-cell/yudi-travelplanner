<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üèîÔ∏è Montenegro Adventure 2026 - YUDI</title>
  <meta name="theme-color" content="#f59e0b">
  <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon" href="/icon-192.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    .card-transport { background: linear-gradient(135deg, #fef3c7, #fde68a); border-left: 4px solid #f59e0b; }
    .card-warning { background: linear-gradient(135deg, #fecaca, #fca5a5); border-left: 4px solid #ef4444; }
    .card-food { background: linear-gradient(135deg, #d1fae5, #a7f3d0); border-left: 4px solid #10b981; }
    .card-accommodation { background: linear-gradient(135deg, #fef3c7, #fde68a); border-left: 4px solid #eab308; }
    .card-highlight { background: linear-gradient(135deg, #fed7aa, #fdba74); border-left: 4px solid #ea580c; }
    .card-activity { background: linear-gradient(135deg, #e9d5ff, #d8b4fe); border-left: 4px solid #8b5cf6; }
    .card-beach { background: linear-gradient(135deg, #cffafe, #a5f3fc); border-left: 4px solid #06b6d4; }
    body.dark { background: linear-gradient(135deg, #292524, #1c1917) !important; }
    body.dark .bg-white { background: #292524 !important; color: #e7e5e4 !important; }
    body.dark .text-gray-800, body.dark .text-gray-700, body.dark .text-gray-600 { color: #d6d3d1 !important; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-amber-100 via-orange-50 to-stone-100">
  <div id="app" class="p-4 max-w-4xl mx-auto"></div>

  <script>
    // STATE
    var activeDay = 1;
    var activeTab = 'planning';
    var selectedModal = null;
    var darkMode = localStorage.getItem('montenegroDarkMode') === 'true';
    var checklist = JSON.parse(localStorage.getItem('montenegroChecklist') || '{}');
    var expenses = JSON.parse(localStorage.getItem('montenegroExpenses') || '[]');
    var dayNotes = JSON.parse(localStorage.getItem('montenegroDayNotes') || '{}');

    var trip = { title: 'üèîÔ∏è Montenegro Adventure', subtitle: 'Bergen, Canyon & Kust', dates: '16-24 mei 2026', duration: '9 dagen', persons: 2 };

    var days = [
      { day: 1, date: 'Za 16 mei', title: 'Aankomst Kotor', icon: '‚úàÔ∏è', region: 'Kotor', highlight: 'Old Town verkennen' },
      { day: 2, date: 'Zo 17 mei', title: 'Bay of Kotor', icon: '‚õµ', region: 'Kotor', highlight: 'Boottrip + Perast' },
      { day: 3, date: 'Ma 18 mei', title: 'Lovƒáen & Cetinje', icon: 'üèîÔ∏è', region: 'Kotor', highlight: 'Bergpanorama' },
      { day: 4, date: 'Di 19 mei', title: 'Naar Durmitor', icon: 'üöó', region: 'Bergen', highlight: 'Ostrog + Black Lake', featured: true },
      { day: 5, date: 'Wo 20 mei', title: 'Tara Rafting!', icon: 'üö£', region: 'Durmitor', highlight: 'Diepste canyon EU!', featured: true },
      { day: 6, date: 'Do 21 mei', title: 'Naar Budva', icon: 'üèñÔ∏è', region: 'Kust', highlight: 'Sveti Stefan' },
      { day: 7, date: 'Vr 22 mei', title: 'Watersport Dag!', icon: 'üöÄ', region: 'Budva', highlight: 'Jetski + Parasailing', featured: true },
      { day: 8, date: 'Za 23 mei', title: 'Skadar Lake', icon: 'ü¶Ö', region: 'Budva', highlight: 'Vogelparadijs + Wijn' },
      { day: 9, date: 'Zo 24 mei', title: 'Vertrek', icon: 'üè†', region: 'Terug', highlight: 'Afscheid Montenegro' }
    ];

    var locations = {
      tivat: { lat: 42.4047, lng: 18.7233 }, kotor: { lat: 42.4247, lng: 18.7712 },
      kotor_fortress: { lat: 42.4280, lng: 18.7720 }, perast: { lat: 42.4867, lng: 18.6983 },
      our_lady: { lat: 42.4870, lng: 18.6910 }, lovcen: { lat: 42.3994, lng: 18.8389 },
      cetinje: { lat: 42.3903, lng: 18.9233 }, ostrog: { lat: 42.6747, lng: 19.0297 },
      zabljak: { lat: 43.1556, lng: 19.1228 }, black_lake: { lat: 43.1453, lng: 19.0967 },
      tara_canyon: { lat: 43.1167, lng: 19.3500 }, tara_bridge: { lat: 43.1500, lng: 19.2833 },
      budva: { lat: 42.2864, lng: 18.8400 }, sveti_stefan: { lat: 42.2569, lng: 18.8903 },
      mogren: { lat: 42.2903, lng: 18.8333 }, jaz: { lat: 42.2917, lng: 18.8083 },
      skadar: { lat: 42.2167, lng: 19.1000 }, virpazar: { lat: 42.2417, lng: 19.0917 }
    };

    var activities = {
      1: [
        { time: '11:00', icon: '‚úàÔ∏è', title: 'Vlucht Amsterdam ‚Üí Tivat', subtitle: 'Via overstap', type: 'transport', loc: 'tivat', info: { price: '‚Ç¨350-400 p.p.' } },
        { time: '14:30', icon: 'üõ¨', title: 'Landing Tivat', subtitle: 'Kleine luchthaven', type: 'transport', loc: 'tivat', info: {} },
        { time: '15:00', icon: 'üöó', title: 'Auto ophalen', subtitle: 'Huurauto', type: 'transport', loc: 'tivat', info: { price: '‚Ç¨25-35/dag', tips: ['Creditcard verplicht'] } },
        { time: '15:45', icon: 'üè†', title: 'Check-in Kotor', subtitle: 'Appartement Old Town', type: 'accommodation', loc: 'kotor', info: { price: '‚Ç¨195 (3 nachten)' } },
        { time: '17:00', icon: '‚≠ê', title: 'Kotor Old Town', subtitle: 'UNESCO Werelderfgoed', type: 'highlight', loc: 'kotor', info: { desc: 'Middeleeuwse ommuurde stad!', tips: ['Verdwaal in steegjes', 'Veel katten üê±'], mustSee: true } },
        { time: '19:00', icon: 'ü•æ', title: 'Fortress Climb', subtitle: '1350 treden!', type: 'activity', loc: 'kotor_fortress', info: { price: '‚Ç¨8', duration: '1-1.5 uur', tips: ['Voor zonsondergang!'] } },
        { time: '21:00', icon: 'üçΩÔ∏è', title: 'Diner Old Town', subtitle: 'Lokale keuken', type: 'food', loc: 'kotor', info: { price: '‚Ç¨15-25 p.p.', specialty: 'ƒÜevapi, zwarte risotto' } }
      ],
      2: [
        { time: '09:30', icon: '‚≠ê', title: 'Bay of Kotor Boottocht', subtitle: 'Hele baai per boot', type: 'highlight', loc: 'kotor', info: { price: '‚Ç¨25-40 p.p.', duration: '3-4 uur', mustSee: true } },
        { time: '10:30', icon: '‚õ™', title: 'Our Lady of the Rocks', subtitle: 'Kunstmatig eiland', type: 'activity', loc: 'our_lady', info: { desc: '17e-eeuwse kerk op eiland' } },
        { time: '11:30', icon: 'üèòÔ∏è', title: 'Perast', subtitle: 'Barok dorpje', type: 'highlight', loc: 'perast', info: { mustSee: true } },
        { time: '13:00', icon: 'üçΩÔ∏è', title: 'Lunch Perast', subtitle: 'Verse vis', type: 'food', loc: 'perast', info: { price: '‚Ç¨12-20 p.p.' } },
        { time: '15:00', icon: 'üèä', title: 'Blue Cave', subtitle: 'Zwemmen in grot', type: 'activity', loc: 'kotor', info: { tips: ['Snorkelset mee!'] } },
        { time: '20:00', icon: 'üçΩÔ∏è', title: 'Diner', subtitle: 'Seafood', type: 'food', loc: 'kotor', info: { price: '‚Ç¨20-30 p.p.' } }
      ],
      3: [
        { time: '08:30', icon: 'üöó', title: 'Vertrek Lovƒáen', subtitle: '25 haarspeldbochten!', type: 'transport', loc: 'lovcen', info: { warning: 'Smalle weg!', duration: '1-1.5 uur' } },
        { time: '10:00', icon: '‚≠ê', title: 'Njego≈° Mausoleum', subtitle: '461 treden naar top!', type: 'highlight', loc: 'lovcen', info: { price: '‚Ç¨5 p.p.', desc: '1657m hoogte, 360¬∞ uitzicht', mustSee: true } },
        { time: '12:00', icon: 'üèîÔ∏è', title: 'Lovƒáen NP', subtitle: 'Panorama', type: 'activity', loc: 'lovcen', info: {} },
        { time: '13:30', icon: 'üçΩÔ∏è', title: 'Lunch Njegu≈°i', subtitle: 'Pr≈°ut & kaas!', type: 'food', loc: 'lovcen', info: { price: '‚Ç¨10-15 p.p.', specialty: 'Njegu≈°ki pr≈°ut' } },
        { time: '15:00', icon: 'üèõÔ∏è', title: 'Cetinje', subtitle: 'Oude hoofdstad', type: 'activity', loc: 'cetinje', info: {} },
        { time: '20:00', icon: 'üçΩÔ∏è', title: 'Diner', subtitle: 'Laatste avond Kotor', type: 'food', loc: 'kotor', info: { price: '‚Ç¨15-25 p.p.' } }
      ],
      4: [
        { time: '08:00', icon: 'üè†', title: 'Check-out Kotor', subtitle: 'Naar de bergen!', type: 'accommodation', loc: 'kotor', info: { tips: ['Water & snacks mee'] } },
        { time: '10:30', icon: '‚≠ê', title: 'Ostrog Monastery', subtitle: 'In rotswand gebouwd!', type: 'highlight', loc: 'ostrog', info: { desc: 'Spectaculair klooster!', tips: ['Knie√´n/schouders bedekt'], mustSee: true } },
        { time: '12:30', icon: 'üçΩÔ∏è', title: 'Lunch onderweg', subtitle: 'Lokaal', type: 'food', loc: 'ostrog', info: { price: '‚Ç¨8-15 p.p.', specialty: 'Kaƒçamak' } },
        { time: '16:30', icon: 'üè†', title: 'Check-in ≈Ωabljak', subtitle: 'Mountain Lodge', type: 'accommodation', loc: 'zabljak', info: { price: '‚Ç¨100 (2 nachten)' } },
        { time: '17:30', icon: '‚≠ê', title: 'Black Lake', subtitle: 'Wandeling rond meer', type: 'highlight', loc: 'black_lake', info: { duration: '3.5 km rondje', price: '‚Ç¨3 parkentree', mustSee: true } },
        { time: '20:00', icon: 'üçΩÔ∏è', title: 'Diner', subtitle: 'Bergdiner', type: 'food', loc: 'zabljak', info: { price: '‚Ç¨10-18 p.p.', specialty: 'Lamsvlees' } }
      ],
      5: [
        { time: '06:00', icon: '‚ö†Ô∏è', title: 'VROEG opstaan!', subtitle: 'Rafting pickup', type: 'warning', loc: 'zabljak', info: { warning: 'Vroege pickup!' } },
        { time: '08:30', icon: 'üç≥', title: 'Ontbijt kamp', subtitle: 'Traditioneel', type: 'food', loc: 'tara_canyon', info: { price: 'Inbegrepen' } },
        { time: '10:00', icon: '‚≠ê', title: 'TARA RIVER RAFTING!', subtitle: '2e diepste canyon wereld!', type: 'highlight', loc: 'tara_canyon', info: { price: '‚Ç¨65-85 p.p.', duration: '3-4 uur', warning: 'VOORAF BOEKEN!', tips: ['Water is KOUD 12¬∞C!'], mustSee: true } },
        { time: '14:00', icon: 'üçΩÔ∏è', title: 'Lunch rivier', subtitle: 'BBQ', type: 'food', loc: 'tara_canyon', info: { price: 'Inbegrepen' } },
        { time: '15:30', icon: 'üåâ', title: 'Tara Bridge', subtitle: '172m hoog!', type: 'activity', loc: 'tara_bridge', info: { tips: ['Ziplining ‚Ç¨20'] } },
        { time: '20:00', icon: 'üçΩÔ∏è', title: 'Afscheidsdiner', subtitle: 'Bergen', type: 'food', loc: 'zabljak', info: { price: '‚Ç¨12-20 p.p.', tips: ['Rakija proberen!'] } }
      ],
      6: [
        { time: '09:00', icon: 'üè†', title: 'Check-out ≈Ωabljak', subtitle: 'Naar kust!', type: 'accommodation', loc: 'zabljak', info: { tips: ['~3.5 uur rijden'] } },
        { time: '13:00', icon: 'üè†', title: 'Check-in Budva', subtitle: 'Beach Apartment', type: 'accommodation', loc: 'budva', info: { price: '‚Ç¨210 (3 nachten)' } },
        { time: '15:30', icon: 'üèõÔ∏è', title: 'Budva Old Town', subtitle: '2500 jaar oud', type: 'activity', loc: 'budva', info: {} },
        { time: '17:30', icon: '‚≠ê', title: 'Sveti Stefan', subtitle: 'Iconisch eiland', type: 'highlight', loc: 'sveti_stefan', info: { desc: 'Beroemdste beeld Montenegro!', tips: ['Zonsondergang!'], mustSee: true } },
        { time: '19:30', icon: 'üçΩÔ∏è', title: 'Diner', subtitle: 'Terras', type: 'food', loc: 'budva', info: { price: '‚Ç¨18-28 p.p.' } }
      ],
      7: [
        { time: '09:30', icon: '‚≠ê', title: 'JETSKI', subtitle: 'Langs de kust!', type: 'highlight', loc: 'budva', info: { price: '‚Ç¨30-60 p.p.', duration: '15-30 min', mustSee: true } },
        { time: '10:30', icon: '‚≠ê', title: 'PARASAILING', subtitle: 'Vliegen boven Budva!', type: 'highlight', loc: 'budva', info: { price: '‚Ç¨50 solo / ‚Ç¨80 duo', mustSee: true } },
        { time: '11:30', icon: 'üèñÔ∏è', title: 'Mogren Beach', subtitle: 'Mooiste strand', type: 'beach', loc: 'mogren', info: { tips: ['Tunnel naar Mogren II'], mustSee: true } },
        { time: '13:00', icon: 'üçΩÔ∏è', title: 'Lunch strand', subtitle: 'Beachbar', type: 'food', loc: 'mogren', info: { price: '‚Ç¨10-18 p.p.' } },
        { time: '14:30', icon: 'üçå', title: 'Banana Boat', subtitle: 'Strandpret!', type: 'activity', loc: 'budva', info: { price: '‚Ç¨15-20 p.p.' } },
        { time: '15:30', icon: 'üèÑ', title: 'Wakeboard / SUP', subtitle: 'Jaz Beach', type: 'activity', loc: 'jaz', info: { price: '‚Ç¨10-50' } },
        { time: '18:30', icon: 'üåÖ', title: 'Jaz Beach sunset', subtitle: 'Beachbar', type: 'beach', loc: 'jaz', info: {} },
        { time: '20:30', icon: 'üçΩÔ∏è', title: 'Diner', subtitle: 'Seafood feast', type: 'food', loc: 'budva', info: { price: '‚Ç¨20-35 p.p.' } }
      ],
      8: [
        { time: '10:00', icon: '‚≠ê', title: 'Skadar Lake', subtitle: 'Grootste meer Balkan', type: 'highlight', loc: 'skadar', info: { desc: 'Nationaal Park - vogelparadijs!', mustSee: true } },
        { time: '10:30', icon: '‚õµ', title: 'Boottrip Skadar', subtitle: 'Waterlelievelden', type: 'activity', loc: 'virpazar', info: { price: '‚Ç¨15-25 p.p.', duration: '2-3 uur' } },
        { time: '13:30', icon: 'üç∑', title: 'Lunch + Wijn', subtitle: 'Wijnproeverij', type: 'food', loc: 'skadar', info: { price: '‚Ç¨15-25 p.p.', specialty: 'Vranac wijn' } },
        { time: '21:00', icon: '‚≠ê', title: 'Afscheidsdiner', subtitle: 'Beste restaurant!', type: 'highlight', loc: 'budva', info: { price: '‚Ç¨30-45 p.p.', tips: ['Reserveer vooraf!'] } }
      ],
      9: [
        { time: '08:00', icon: 'üç≥', title: 'Laatste ontbijt', subtitle: 'Aan zee', type: 'food', loc: 'budva', info: {} },
        { time: '10:00', icon: 'üè†', title: 'Check-out', subtitle: 'Apartment', type: 'accommodation', loc: 'budva', info: {} },
        { time: '10:30', icon: 'üöó', title: 'Auto inleveren', subtitle: 'Tivat', type: 'transport', loc: 'tivat', info: { tips: ['Volle tank!'] } },
        { time: '15:00', icon: '‚úàÔ∏è', title: 'Vlucht naar huis', subtitle: 'Tivat ‚Üí Amsterdam', type: 'highlight', loc: 'tivat', info: {} },
        { time: '20:30', icon: 'üè†', title: 'Thuis!', subtitle: 'Welkom terug', type: 'transport', loc: 'tivat', info: {} }
      ]
    };

    var budget = { estimated: [
      { item: '‚úàÔ∏è Vluchten (2p)', budget: 730, comfort: 850 },
      { item: 'üè† Kotor 3n', budget: 195, comfort: 250 },
      { item: 'üè† Durmitor 2n', budget: 100, comfort: 140 },
      { item: 'üè† Budva 3n', budget: 210, comfort: 280 },
      { item: 'üöó Huurauto 8d', budget: 200, comfort: 280 },
      { item: '‚õΩ Benzine', budget: 60, comfort: 80 },
      { item: 'üö£ Tara Rafting', budget: 140, comfort: 170 },
      { item: '‚õµ Kotor boottocht', budget: 60, comfort: 80 },
      { item: 'üöÄ Jetski', budget: 60, comfort: 100 },
      { item: 'ü™Ç Parasailing', budget: 80, comfort: 80 },
      { item: 'üçå Banana+Wakeboard', budget: 60, comfort: 80 },
      { item: '‚õµ Skadar boottrip', budget: 40, comfort: 50 },
      { item: 'üé´ Entreegelden', budget: 30, comfort: 40 },
      { item: 'üçΩÔ∏è Eten 9d', budget: 350, comfort: 500 },
      { item: 'üè• Verzekering', budget: 40, comfort: 60 },
      { item: 'üí∞ Buffer', budget: 85, comfort: 120 }
    ]};

    var checklistSections = [
      { title: 'üî¥ NU BOEKEN', items: [
        { key: 'flights', label: '‚úàÔ∏è Vluchten Amsterdam ‚Üî Tivat' },
        { key: 'accomKotor', label: 'üè† Kotor (3n)' },
        { key: 'accomDurmitor', label: 'üè† ≈Ωabljak (2n)' },
        { key: 'accomBudva', label: 'üè† Budva (3n)' },
        { key: 'insurance', label: 'üè• Reisverzekering' },
        { key: 'rafting', label: 'üö£ TARA RAFTING!' }
      ]},
      { title: 'üü† APRIL', items: [
        { key: 'car', label: 'üöó Huurauto' },
        { key: 'boatTour', label: '‚õµ Bay of Kotor boottocht' },
        { key: 'kayak', label: 'üöÄ Watersport check' }
      ]},
      { title: 'üß≥ INPAKKEN', items: [
        { key: 'passport', label: 'Paspoort / ID' },
        { key: 'license', label: 'Rijbewijs' },
        { key: 'hikingshoes', label: 'Wandelschoenen!' },
        { key: 'swimwear', label: 'Zwemkleding (2x)' },
        { key: 'raincoat', label: 'Regenjas (bergen!)' },
        { key: 'camera', label: 'Camera + waterproof' }
      ]}
    ];

    checklistSections.forEach(function(s) { s.items.forEach(function(i) { if (checklist[i.key] === undefined) checklist[i.key] = false; }); });

    function getCardClass(type) {
      var c = { transport: 'card-transport', warning: 'card-warning', food: 'card-food', accommodation: 'card-accommodation', highlight: 'card-highlight', activity: 'card-activity', beach: 'card-beach' };
      return c[type] || 'bg-white';
    }

    function setDay(d) { activeDay = d; render(); }
    function setTab(t) { activeTab = t; render(); }
    function openModal(act) { selectedModal = act; render(); }
    function closeModal() { selectedModal = null; render(); }
    function toggleCheck(key) { checklist[key] = !checklist[key]; localStorage.setItem('montenegroChecklist', JSON.stringify(checklist)); render(); }
    function toggleDarkMode() { darkMode = !darkMode; localStorage.setItem('montenegroDarkMode', darkMode); document.body.classList.toggle('dark', darkMode); render(); }

    function addExpense() {
      var desc = document.getElementById('expenseDesc').value;
      var amount = parseFloat(document.getElementById('expenseAmount').value);
      if (desc && amount > 0) {
        expenses.push({ id: Date.now(), desc: desc, amount: amount, category: document.getElementById('expenseCategory').value });
        localStorage.setItem('montenegroExpenses', JSON.stringify(expenses));
        render();
      }
    }
    function deleteExpense(id) { expenses = expenses.filter(function(e) { return e.id !== id; }); localStorage.setItem('montenegroExpenses', JSON.stringify(expenses)); render(); }

    function saveNote() {
      var note = document.getElementById('dayNoteInput').value;
      if (note && note.trim()) {
        if (!dayNotes[activeDay]) dayNotes[activeDay] = [];
        dayNotes[activeDay].push({ id: Date.now(), text: note, timestamp: new Date().toLocaleString('nl-NL') });
        localStorage.setItem('montenegroDayNotes', JSON.stringify(dayNotes));
        render();
      }
    }
    function deleteNote(id) { dayNotes[activeDay] = (dayNotes[activeDay] || []).filter(function(n) { return n.id !== id; }); localStorage.setItem('montenegroDayNotes', JSON.stringify(dayNotes)); render(); }

    function shareTrip() {
      if (navigator.share) { navigator.share({ title: trip.title, url: window.location.href }); }
      else { navigator.clipboard.writeText(window.location.href); alert('Link gekopieerd!'); }
    }

    function exportTrip() {
      var txt = trip.title + '\n' + trip.dates + '\n\n';
      days.forEach(function(d) {
        txt += '=== DAG ' + d.day + ': ' + d.title + ' ===\n';
        (activities[d.day] || []).forEach(function(a) { txt += a.time + ' - ' + a.title + '\n'; });
        txt += '\n';
      });
      var blob = new Blob([txt], { type: 'text/plain' });
      var a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'montenegro-trip.txt'; a.click();
    }

    if (darkMode) document.body.classList.add('dark');

    function render() {
      var day = days[activeDay - 1];
      var acts = activities[activeDay] || [];
      var estBudget = budget.estimated.reduce(function(s, i) { return s + i.budget; }, 0);
      var estComfort = budget.estimated.reduce(function(s, i) { return s + i.comfort; }, 0);
      var totalExpenses = expenses.reduce(function(s, e) { return s + e.amount; }, 0);
      var checkedCount = Object.values(checklist).filter(Boolean).length;
      var totalChecks = checklistSections.reduce(function(s, sec) { return s + sec.items.length; }, 0);
      var tripDate = new Date('2026-05-16');
      var daysLeft = Math.ceil((tripDate - new Date()) / (1000*60*60*24));

      var html = '';
      
      // HEADER
      html += '<div class="bg-white rounded-3xl p-5 shadow-lg mb-4">';
      html += '<div class="flex items-center justify-between">';
      html += '<div><h1 class="text-2xl font-bold text-gray-800">' + trip.title + '</h1>';
      html += '<p class="text-amber-600 font-medium">' + trip.subtitle + '</p>';
      html += '<p class="text-gray-500 text-sm mt-1">' + trip.dates + ' ‚Ä¢ ' + trip.persons + ' pers ‚Ä¢ ' + trip.duration + '</p></div>';
      html += '<a href="/" class="text-gray-400 hover:text-gray-600 text-2xl">√ó</a></div>';
      html += '<div class="flex flex-wrap gap-2 mt-3">';
      if (daysLeft > 0) html += '<span class="bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-1.5 rounded-full text-sm font-bold">‚úàÔ∏è Nog ' + daysLeft + ' dagen!</span>';
      html += '<span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm">üè∞ Kotor UNESCO</span>';
      html += '<span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm">üö£ Tara Rafting</span>';
      html += '</div></div>';

      // TABS
      html += '<div class="flex gap-2 mb-4 overflow-x-auto hide-scrollbar">';
      ['planning', 'map', 'budget', 'checklist'].forEach(function(t) {
        var label = t === 'planning' ? 'üìÖ Planning' : t === 'map' ? 'üó∫Ô∏è Kaart' : t === 'budget' ? 'üí∞ Budget' : '‚úÖ (' + checkedCount + '/' + totalChecks + ')';
        html += '<button onclick="setTab(\'' + t + '\')" class="px-4 py-2 rounded-xl font-medium whitespace-nowrap ' + (activeTab === t ? 'bg-amber-600 text-white' : 'bg-white text-gray-700') + ' shadow">' + label + '</button>';
      });
      html += '</div>';

      // PLANNING TAB
      if (activeTab === 'planning') {
        html += '<div class="flex gap-2 overflow-x-auto pb-3 hide-scrollbar">';
        days.forEach(function(d) {
          html += '<button onclick="setDay(' + d.day + ')" class="flex items-center gap-2 px-4 py-2 rounded-xl font-medium whitespace-nowrap shadow ' + (activeDay === d.day ? 'bg-amber-600 text-white' : 'bg-white text-gray-700') + '">' + d.icon + ' Dag ' + d.day + '</button>';
        });
        html += '</div>';

        html += '<div class="bg-white rounded-2xl p-5 shadow-lg mb-4"><div class="flex items-center gap-4">';
        html += '<span class="text-5xl">' + day.icon + '</span><div>';
        html += '<h2 class="text-2xl font-bold text-gray-800">Dag ' + day.day + ': ' + day.title + '</h2>';
        html += '<p class="text-gray-500">' + day.date + ' ‚Ä¢ ' + day.region + '</p>';
        html += '<p class="text-amber-600 font-semibold">' + day.highlight + '</p></div></div></div>';

        html += '<div class="bg-white rounded-2xl p-4 shadow-lg mb-4"><div class="space-y-2">';
        acts.forEach(function(act) {
          html += '<div onclick="openModal(' + JSON.stringify(act).replace(/"/g, '&quot;') + ')" class="rounded-xl p-3 cursor-pointer hover:shadow-md transition ' + getCardClass(act.type) + '">';
          html += '<div class="flex items-center gap-3">';
          html += '<div class="font-mono font-bold text-gray-700 w-12 text-center">' + act.time + '</div>';
          html += '<div class="text-2xl">' + act.icon + '</div>';
          html += '<div class="flex-1 min-w-0"><div class="font-bold text-gray-800">' + act.title + '</div><div class="text-gray-600 text-sm truncate">' + act.subtitle + '</div></div>';
          html += '<div class="text-gray-400">‚Üí</div></div></div>';
        });
        html += '</div></div>';

        // Notes
        html += '<div class="bg-gradient-to-r from-amber-100 to-orange-100 rounded-2xl p-4 shadow">';
        html += '<h4 class="font-bold text-amber-800 mb-3">üìù Notities - Dag ' + activeDay + '</h4>';
        html += '<div class="flex gap-2 mb-3"><input type="text" id="dayNoteInput" placeholder="Schrijf notitie..." class="flex-1 px-4 py-2 rounded-xl border text-sm"><button onclick="saveNote()" class="bg-amber-600 text-white px-4 py-2 rounded-xl font-medium">+</button></div>';
        if (dayNotes[activeDay] && dayNotes[activeDay].length > 0) {
          html += '<div class="space-y-2">';
          dayNotes[activeDay].forEach(function(n) {
            html += '<div class="bg-white rounded-lg p-3 flex justify-between"><div><p class="text-gray-800">' + n.text + '</p><p class="text-xs text-gray-400">' + n.timestamp + '</p></div><button onclick="deleteNote(' + n.id + ')" class="text-red-400">√ó</button></div>';
          });
          html += '</div>';
        }
        html += '</div>';
      }

      // MAP TAB
      if (activeTab === 'map') {
        var dayLocs = acts.filter(function(a) { return a.loc && locations[a.loc]; }).map(function(a) { return { title: a.title, icon: a.icon, time: a.time, lat: locations[a.loc].lat, lng: locations[a.loc].lng }; });
        
        html += '<div class="flex gap-2 overflow-x-auto pb-3 hide-scrollbar mb-4">';
        days.forEach(function(d) {
          html += '<button onclick="setDay(' + d.day + '); setTab(\'map\');" class="flex items-center gap-2 px-4 py-2 rounded-xl font-medium whitespace-nowrap shadow ' + (activeDay === d.day ? 'bg-amber-600 text-white' : 'bg-white text-gray-700') + '">' + d.icon + ' Dag ' + d.day + '</button>';
        });
        html += '</div>';

        html += '<div class="bg-white rounded-2xl shadow-lg overflow-hidden">';
        html += '<div class="p-4 bg-gradient-to-r from-amber-500 to-orange-500 text-white">';
        html += '<h3 class="font-bold text-lg">üó∫Ô∏è Dag ' + activeDay + ': ' + day.title + '</h3>';
        html += '<p class="text-white/80 text-sm">' + dayLocs.length + ' locaties in ' + day.region + '</p></div>';
        html += '<div class="p-4 space-y-2">';
        dayLocs.forEach(function(loc, i) {
          html += '<a href="https://www.google.com/maps/search/?api=1&query=' + loc.lat + ',' + loc.lng + '" target="_blank" class="flex items-center gap-3 p-3 bg-gray-50 rounded-xl hover:bg-amber-50 transition">';
          html += '<div class="w-8 h-8 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold text-sm">' + (i+1) + '</div>';
          html += '<span class="text-2xl">' + loc.icon + '</span>';
          html += '<div class="flex-1"><div class="font-medium">' + loc.title + '</div><div class="text-sm text-gray-500">' + loc.time + '</div></div>';
          html += '<span class="text-amber-500">üìç</span></a>';
        });
        html += '</div>';
        if (dayLocs.length > 1) {
          var routeUrl = 'https://www.google.com/maps/dir/' + dayLocs.map(function(l) { return l.lat + ',' + l.lng; }).join('/');
          html += '<div class="p-4 bg-amber-50 border-t"><a href="' + routeUrl + '" target="_blank" class="block w-full bg-amber-600 text-white text-center py-3 rounded-xl font-bold">üó∫Ô∏è Open volledige route</a></div>';
        }
        html += '</div>';
      }

      // BUDGET TAB
      if (activeTab === 'budget') {
        html += '<div class="space-y-4">';
        html += '<div class="bg-gradient-to-r from-amber-500 to-orange-600 rounded-2xl p-5 text-white shadow-lg">';
        html += '<h3 class="font-bold text-lg mb-3">üí∏ Uitgaven Tracker</h3>';
        html += '<div class="grid grid-cols-3 gap-2 mb-3">';
        html += '<input type="text" id="expenseDesc" placeholder="Omschrijving" class="col-span-2 px-3 py-2 rounded-lg text-gray-800 text-sm">';
        html += '<input type="number" id="expenseAmount" placeholder="‚Ç¨" step="0.01" class="px-3 py-2 rounded-lg text-gray-800 text-sm"></div>';
        html += '<div class="flex gap-2"><select id="expenseCategory" class="flex-1 px-3 py-2 rounded-lg text-gray-800 text-sm"><option>üçΩÔ∏è Eten</option><option>üöó Vervoer</option><option>üé´ Activiteit</option><option>üí∞ Overig</option></select>';
        html += '<button onclick="addExpense()" class="bg-white text-amber-600 px-4 py-2 rounded-lg font-bold">+</button></div>';
        if (expenses.length > 0) html += '<div class="mt-4 pt-4 border-t border-white/30 flex justify-between"><span>Totaal:</span><span class="text-2xl font-bold">‚Ç¨' + totalExpenses.toFixed(2) + '</span></div>';
        html += '</div>';

        if (expenses.length > 0) {
          html += '<div class="bg-white rounded-2xl p-4 shadow-lg"><h3 class="font-bold mb-3">üìù Uitgaven</h3><div class="space-y-2 max-h-40 overflow-y-auto">';
          expenses.slice().reverse().forEach(function(e) {
            html += '<div class="flex justify-between items-center py-2 px-3 bg-gray-50 rounded-lg"><div><span class="text-sm">' + e.category + '</span> <span class="font-medium">' + e.desc + '</span></div><div class="flex items-center gap-2"><span class="font-bold text-amber-600">‚Ç¨' + e.amount.toFixed(2) + '</span><button onclick="deleteExpense(' + e.id + ')" class="text-red-400">√ó</button></div></div>';
          });
          html += '</div></div>';
        }

        html += '<div class="bg-white rounded-2xl p-4 shadow-lg"><h3 class="font-bold mb-3">üìä Geschatte Kosten</h3><div class="space-y-1 max-h-64 overflow-y-auto">';
        budget.estimated.forEach(function(i) {
          html += '<div class="flex justify-between py-2 border-b border-gray-100"><span class="text-sm">' + i.item + '</span><span class="font-mono text-sm">‚Ç¨' + i.budget + ' | ‚Ç¨' + i.comfort + '</span></div>';
        });
        html += '</div><div class="mt-3 pt-3 border-t-2 flex justify-between font-bold"><span>TOTAAL</span><span>‚Ç¨' + estBudget + ' | ‚Ç¨' + estComfort + '</span></div></div>';

        html += '<div class="grid grid-cols-2 gap-4">';
        html += '<div class="bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 text-white text-center"><div class="text-sm opacity-80">üíö Budget</div><div class="text-3xl font-bold">‚Ç¨' + estBudget + '</div><div class="text-sm opacity-80">‚Ç¨' + Math.round(estBudget/2) + ' p.p.</div></div>';
        html += '<div class="bg-gradient-to-br from-amber-500 to-orange-500 rounded-2xl p-4 text-white text-center"><div class="text-sm opacity-80">‚ú® Comfort</div><div class="text-3xl font-bold">‚Ç¨' + estComfort + '</div><div class="text-sm opacity-80">‚Ç¨' + Math.round(estComfort/2) + ' p.p.</div></div>';
        html += '</div></div>';
      }

      // CHECKLIST TAB
      if (activeTab === 'checklist') {
        html += '<div class="space-y-4">';
        checklistSections.forEach(function(sec) {
          html += '<div class="bg-white rounded-2xl p-4 shadow-lg"><h3 class="font-bold mb-3">' + sec.title + '</h3><div class="space-y-2">';
          sec.items.forEach(function(item) {
            html += '<label class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer"><input type="checkbox" ' + (checklist[item.key] ? 'checked' : '') + ' onchange="toggleCheck(\'' + item.key + '\')" class="w-5 h-5 rounded"><span class="' + (checklist[item.key] ? 'line-through text-gray-400' : '') + '">' + item.label + '</span></label>';
          });
          html += '</div></div>';
        });
        html += '<div class="bg-gradient-to-r from-amber-600 to-orange-500 rounded-2xl p-5 text-white"><h3 class="font-bold mb-3">üìä Voortgang</h3><div class="bg-white/20 rounded-full h-4 mb-2"><div class="bg-white rounded-full h-4" style="width:' + Math.max((checkedCount/totalChecks)*100, 5) + '%"></div></div><div class="text-center">' + checkedCount + ' / ' + totalChecks + ' items</div></div>';
        html += '</div>';
      }

      // MODAL
      if (selectedModal) {
        var m = selectedModal, info = m.info || {};
        html += '<div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50" onclick="closeModal()">';
        html += '<div class="bg-white rounded-3xl max-w-lg w-full max-h-[85vh] overflow-y-auto shadow-2xl" onclick="event.stopPropagation()">';
        html += '<div class="p-5 ' + getCardClass(m.type) + ' rounded-t-3xl"><div class="flex justify-between items-start">';
        html += '<div class="flex items-center gap-3"><span class="text-4xl">' + m.icon + '</span><div><h3 class="text-xl font-bold text-gray-800">' + m.title + '</h3><p class="text-gray-600">' + m.time + ' ‚Ä¢ ' + m.subtitle + '</p></div></div>';
        html += '<button onclick="closeModal()" class="text-3xl text-gray-400 hover:text-gray-600">√ó</button></div></div>';
        html += '<div class="p-5 space-y-4">';
        if (info.desc) html += '<p class="text-gray-600">' + info.desc + '</p>';
        if (info.price) html += '<div class="bg-green-50 p-3 rounded-xl"><span class="font-bold text-green-800">üí∞ ' + info.price + '</span></div>';
        if (info.duration) html += '<div class="flex items-center gap-2 text-gray-600">‚è±Ô∏è Duur: ' + info.duration + '</div>';
        if (info.tips) { html += '<div><h4 class="font-bold mb-2">üí° Tips</h4><ul class="space-y-1">'; info.tips.forEach(function(t) { html += '<li class="text-sm bg-amber-50 p-2 rounded-lg">‚Ä¢ ' + t + '</li>'; }); html += '</ul></div>'; }
        if (info.warning) html += '<div class="bg-red-50 border border-red-200 p-3 rounded-xl text-red-700">‚ö†Ô∏è ' + info.warning + '</div>';
        if (info.specialty) html += '<div class="text-gray-600">üç¥ ' + info.specialty + '</div>';
        if (info.mustSee) html += '<div class="bg-yellow-100 p-3 rounded-xl text-center">‚≠ê <strong>MUST SEE!</strong></div>';
        if (m.loc && locations[m.loc]) html += '<a href="https://www.google.com/maps/search/?api=1&query=' + locations[m.loc].lat + ',' + locations[m.loc].lng + '" target="_blank" class="block w-full bg-amber-600 text-white text-center py-3 rounded-xl font-bold">üìç Open in Google Maps</a>';
        html += '</div></div></div>';
      }

      // FOOTER
      html += '<div class="mt-6 space-y-3 text-center">';
      html += '<div class="flex flex-wrap justify-center gap-2">';
      html += '<button onclick="shareTrip()" class="bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-2 rounded-xl font-bold shadow">üîó Deel</button>';
      html += '<button onclick="exportTrip()" class="bg-gradient-to-r from-red-500 to-pink-500 text-white px-4 py-2 rounded-xl font-bold shadow">üìÑ Export</button>';
      html += '<button onclick="toggleDarkMode()" class="bg-gradient-to-r from-gray-600 to-gray-800 text-white px-4 py-2 rounded-xl font-bold shadow">' + (darkMode ? '‚òÄÔ∏è Light' : 'üåô Dark') + '</button>';
      html += '</div>';
      html += '<p class="text-gray-500 text-sm">' + trip.title + ' ‚Ä¢ ' + trip.dates + '</p>';
      html += '<a href="/" class="text-amber-600 hover:underline text-sm">‚Üê Terug naar overzicht</a>';
      html += '</div>';

      document.getElementById('app').innerHTML = html;
    }

    render();
  </script>
</body>
</html>
